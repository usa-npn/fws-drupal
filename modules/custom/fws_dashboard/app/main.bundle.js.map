{"version":3,"sources":["/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/cache-service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/config.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/doy.pipe.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/guid.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/legend-doy.pipe.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/network.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/npn-service-utils.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/phenophase.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species-title.pipe.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/common/window.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/environments/environment.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/date-extent-util.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/gridded-common.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/pipes.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-layer.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-layer.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-opacity-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-pipe-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curve.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/curve-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-selection-factory.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-statistics.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.html","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.scss","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/species-phenophase-input.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/year-range-input.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.html","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.scss","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-date-vis-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency.component.html","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-control.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/index.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-controls.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/site-or-summary-vis-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.html","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.scss","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/vis-selection.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.html","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.scss","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-download.component.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-selection-factory.service.ts","/Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/$_gendir lazy","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/app.module.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/findings.component.scss","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/findings.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/focal-species.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/new-visualization-dialog.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge-dashboard.component.scss","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge-dashboard.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge.service.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/resources.component.ts","/Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {environment} from '../environments/environment';\nimport {Md5} from 'ts-md5/dist/md5';\n\n@Injectable()\nexport class CacheService {\n    ttl: number = environment.cacheTTL;\n\n    private cacheKey(key:any): string {\n        if(typeof(key) !== 'string') {\n            key = JSON.stringify(key);\n        }\n        // not sure about the .toString() on the end since Md=5.hashStr returns string Int32Array\n        return Md5.hashStr(key).toString();\n    }\n\n    get(key:any): any {\n        if(environment.cacheTTL <= 0) {\n            return null; // caching disabled\n        }\n        let ck = this.cacheKey(key),\n            entry:any = sessionStorage.getItem(ck);\n        if(entry) {\n            entry = JSON.parse(entry) as CacheEntry;\n            if(Date.now() < entry.expiry) {\n                console.log('cache hit',ck,entry.data);\n                return entry.data;\n            }\n            console.log('cache expired',ck);\n            window.sessionStorage.removeItem(ck);\n        } else {\n            console.log('cache miss',ck);\n        }\n        return null;\n    }\n\n    set(key:any,data:any):void {\n        if(environment.cacheTTL <= 0) {\n            return null; // caching disabled\n        }\n        let ck = this.cacheKey(key);\n        if(data) {\n            let entry:CacheEntry = {\n                    expiry: (Date.now()+environment.cacheTTL),\n                    data: data\n                };\n            console.log('caching',ck,data);\n            sessionStorage.setItem(ck,JSON.stringify(entry));\n        } else {\n            console.log('removing from cache',ck);\n            sessionStorage.removeItem(ck);\n        }\n    }\n}\n\nclass CacheEntry {\n    expiry: number;\n    data: any;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/cache-service.ts","import {InjectionToken} from '@angular/core';\n\nexport class NpnConfiguration {\n    apiRoot: string; // URL of NPN web services\n    dataApiRoot: string; // URL of NPN data web services\n    geoServerRoot: string; // URL of the NPN geo server\n    [x: string]: any; // not going to dictate what else it might have\n}\n\nexport const NPN_CONFIGURATION = new InjectionToken<NpnConfiguration>('NpnConfiguration');\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/config.ts","import {Pipe,PipeTransform} from '@angular/core';\n\nconst ONE_DAY_MILLIS = (24*60*60*1000);\n\n@Pipe({name: 'doy'})\nexport class DoyPipe implements PipeTransform {\n    transform(date,ignoreLeapYear?:boolean): any {\n        if(typeof(date) === 'string') {\n            var parts = date.split('-');\n            if(parts.length === 3) {\n                var year = parseInt(parts[0]),\n                    month = parseInt(parts[1]),\n                    day = parseInt(parts[2]);\n                if(!isNaN(year) && !isNaN(month) && !isNaN(day) && month < 13 && day < 32) {\n                    date = new Date(year,(month-1),day);\n                }\n            }\n        }\n        if(date instanceof Date) {\n            date = new Date(date.getTime());\n            if(ignoreLeapYear) {\n                // ignore leap years, using 2010 which is known to be a non-leap year\n                date.setFullYear(2010);\n            }\n            var doy = date.getDate();\n            while (date.getMonth() > 0) {\n                // back up to the last day of the last month\n                date.setDate(1);\n                date.setTime(date.getTime()-ONE_DAY_MILLIS);\n                doy += date.getDate();\n            }\n            return doy;\n        }\n        return date;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/doy.pipe.ts","// https://stackoverflow.com/questions/26501688/a-typescript-guid-class\nexport class Guid {\n    static newGuid() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n            var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n            return v.toString(16);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/guid.ts","import {NgModule,InjectionToken} from '@angular/core';\n\nimport {CacheService} from './cache-service';\nimport {SpeciesService} from './species.service';\nimport {NetworkService} from './network.service';\n\nimport {SpeciesTitlePipe} from './species-title.pipe';\nimport {DoyPipe} from './doy.pipe';\nimport {LegendDoyPipe} from './legend-doy.pipe';\n\nimport {DatePipe} from '@angular/common';\n\nimport {NpnConfiguration,NPN_CONFIGURATION} from './config';\nimport {NpnServiceUtils} from './npn-service-utils.service';\n\nexport const NPN_BASE_HREF = new InjectionToken<string>('npnBaseHref');\n\n@NgModule({\n    declarations: [\n        SpeciesTitlePipe,\n        LegendDoyPipe\n    ],\n    exports: [\n        SpeciesTitlePipe,\n        LegendDoyPipe\n    ],\n    providers: [\n        CacheService,\n        SpeciesService,\n        NetworkService,\n        NpnServiceUtils,\n        SpeciesTitlePipe,\n        DatePipe,\n        DoyPipe,\n        LegendDoyPipe,\n        {provide: NPN_BASE_HREF, useValue: '/'},\n        {provide: NPN_CONFIGURATION, useValue: {\n            apiRoot: '//www-dev.usanpn.org',\n            dataApiRoot: '//data-dev.usanpn.org:3006',\n            geoServerRoot: '//geoserver-dev.usanpn.org/geoserver'\n        }}\n    ]\n})\nexport class NpnCommonModule {}\n\nexport {Species} from './species';\nexport {Phenophase} from './phenophase';\n\nexport {CacheService} from './cache-service';\nexport {SpeciesService} from './species.service';\nexport {NetworkService} from './network.service';\nexport {Window} from './window';\n\nexport {SpeciesTitlePipe} from './species-title.pipe';\nexport {DoyPipe} from './doy.pipe';\nexport {LegendDoyPipe} from './legend-doy.pipe';\nexport {Guid} from './guid';\nexport * from './config';\nexport {NpnServiceUtils} from './npn-service-utils.service';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/index.ts","import {Pipe,PipeTransform} from '@angular/core';\nimport {DatePipe} from '@angular/common';\n\nconst JAN_ONE_2010 = new Date(2010/*(new Date()).getFullYear()*/,0);\nconst JAN_ONE_THIS_YEAR = new Date((new Date()).getFullYear(),0);\nconst ONE_DAY = (24*60*60*1000);\n\n/**\n * Simplified version of thirtyYearAvgDayOfYear that simply takes a number day of year\n * and returns a formatted date.  The optional second argument defines the date format\n * which defaults to 'MMM d'.  The optional third argument defines whether or not the\n * current year should be used as oposed to one known to have 365 days (2010).\n *\n * This filter equates doy 0 with doy 1 since legend scales are inconsistent in this regard.\n */\n@Pipe({name: 'legendDoy'})\nexport class LegendDoyPipe implements PipeTransform {\n    constructor(private datePipe: DatePipe) {}\n\n    transform(doy,fmt?,current_year?): any {\n        doy = Math.round(doy);\n        if(doy === 0) {\n            doy = 1;\n        }\n        fmt = fmt||'MMM d'; // e.g. Jan 1\n        return this.datePipe.transform(new Date((current_year ? JAN_ONE_THIS_YEAR : JAN_ONE_2010).getTime()+((doy-1)*ONE_DAY)),fmt);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/legend-doy.pipe.ts","import {Injectable,Inject} from '@angular/core';\nimport {Http} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\nimport {CacheService} from './cache-service';\n\nimport {NpnConfiguration,NPN_CONFIGURATION} from './config';\n\n/*\nTODO\nWhat this service is doing is very boiler plate and should be consolidated in a shared injectable service.\nI.e.\nMany service inject Http/CacheService/NpnConfiguration and then contain logic very very similar to\nwhat is done in getNetworks.  These three injectables should be wrapped up in a common service class\nthat avoids everyone needing to inject those three things (I.e. exposes Http/CacheService/NpnConfiguration as public members)\nand contains utility functions ala ClippedWmsMapSelection.cachedGet in which case getStations becomes just a few lines.\n */\n\n@Injectable()\nexport class NetworkService {\n\n    constructor(private http:Http,\n                private cache:CacheService,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {\n                }\n\n    getStations(networkId):Promise<any[]> {\n        return new Promise((resolve,reject) => {\n            let url = `${this.config.apiRoot}/npn_portal/stations/getStationsForNetwork.json`,\n                params = {\n                    network_id: networkId\n                },\n                cacheKey = {\n                    u: url,\n                    params: params\n                },\n                data:any[] = this.cache.get(cacheKey) as any[];\n            if(data) {\n                resolve(data);\n            } else {\n                this.http.get(url,{params: params})\n                    .toPromise()\n                    .then(response => {\n                        data = response.json() as any[];\n                        this.cache.set(cacheKey,data);\n                        resolve(data);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/network.service.ts","import {Injectable,Inject} from '@angular/core';\nimport {Http} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\nimport {CacheService} from './cache-service';\n\nimport {NpnConfiguration,NPN_CONFIGURATION} from './config';\n\n@Injectable()\nexport class NpnServiceUtils {\n    constructor(public http:Http,\n                public cache:CacheService,\n                @Inject(NPN_CONFIGURATION) public config:NpnConfiguration) {\n                }\n\n    public apiUrl(suffix:string) {\n        return `${this.config.apiRoot}${suffix}`;\n    }\n\n    public dataApiUrl(suffix:string) {\n        return `${this.config.dataApiRoot}${suffix}`;\n    }\n\n    public cachedGet(url: string, params?:any, asText?:boolean): Promise<any> {\n        params = params||{};\n        return new Promise((resolve,reject) => {\n            let cacheKey = {\n                u: url,\n                params: params\n            },\n            data:any = this.cache.get(cacheKey);\n            if(data) {\n                resolve(data);\n            } else {\n                this.http.get(url,{params:params})\n                    .toPromise()\n                    .then(response => {\n                        data = asText ?\n                            response.text() as any: response.json() as any;\n                        this.cache.set(cacheKey,data);\n                        resolve(data);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/npn-service-utils.service.ts","export class Phenophase {\n    phenophase_id: number;\n    [x: string]: any\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/phenophase.ts","import {Pipe,PipeTransform} from '@angular/core';\n\nimport {environment} from '../environments/environment';\n\nimport {Species} from './species';\n\n@Pipe({name: 'speciesTitle'})\nexport class SpeciesTitlePipe implements PipeTransform {\n    transform(item: Species,format?: string): any {\n        if(item) {\n            format = format||environment.appConfig.tagSpeciesTitle;\n            if(format === 'common-name') {\n                if(item.common_name) {\n                    let lower = item.common_name.toLowerCase();\n                    return lower.substring(0,1).toUpperCase()+lower.substring(1);\n                }\n                return item.common_name;\n            } else if(format === 'scientific-name') {\n                return `${item.genus} ${item.species}`;\n            }\n        }\n        return item;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species-title.pipe.ts","import {Injectable,Inject} from '@angular/core';\nimport {DatePipe} from '@angular/common';\nimport {Headers,Http,URLSearchParams} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport {CacheService} from './cache-service';\nimport {Species} from './species';\nimport {Phenophase} from './phenophase';\nimport {NpnConfiguration,NPN_CONFIGURATION} from './config';\n\nconst HEADERS = new Headers({'Content-Type':'application/x-www-form-urlencoded'});\n\n@Injectable()\nexport class SpeciesService {\n    constructor(private http:Http,\n                private cache:CacheService,\n                private datePipe: DatePipe,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {\n    }\n\n    getAllSpecies(params?:any): Promise<Species[]> {\n        // NOTE: when there are multiple species phenophase controls on the screen the result can\n        // be multiple simultaneous queries...\n        return new Promise((resolve,reject) => {\n            console.log('SpeciesService.getAllSpecies:params',params)\n            let url = `${this.config.apiRoot}/npn_portal/species/getSpeciesFilter.json`,\n                cacheKey = {\n                    u: url,\n                    params:params\n                },\n                data:Species[] = this.cache.get(cacheKey);\n            if(data) {\n                resolve(data);\n            } else {\n                let uParams = new URLSearchParams()\n                Object.keys(params).forEach(key => uParams.set(`${key}`,`${params[key]}`));\n                this.http.post(url,uParams.toString(),{headers:HEADERS})\n                    .toPromise()\n                    .then(response => {\n                        data = response.json() as Species[];\n                        this.cache.set(cacheKey,data);\n                        resolve(data);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n\n    private _getPhenophases(species:Species,date?:Date):Promise<Phenophase []> {\n        return new Promise((resolve,reject) => {\n            let url = `${this.config.apiRoot}/npn_portal/phenophases/getPhenophasesForSpecies.json`,\n                params:any = {\n                    species_id: species.species_id\n                };\n            if(date) {\n                params.date = this.datePipe.transform(date,'y-MM-dd')\n            } else {\n                params.return_all = true;\n            }\n            let cacheKey = {\n                    u: url,\n                    params: params\n                },\n                data:Phenophase[] = this.cache.get(cacheKey);\n            if(data) {\n                resolve(data);\n            } else {\n                this.http.get(url,{params:params})\n                    .toPromise()\n                    .then(response => {\n                        let phases = response.json() as any[];\n                        data = phases[0].phenophases as Phenophase[];\n                        data = this.removeRedundantPhenophases(data);\n                        this.cache.set(cacheKey,data);\n                        resolve(data);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n\n    getAllPhenophases(species:Species):Promise<Phenophase[]> {\n        return this._getPhenophases(species);\n    }\n\n    getPhenophasesForDate(species:Species,date:Date):Promise<Phenophase[]> {\n        return this._getPhenophases(species,date);\n    }\n\n    getPhenophasesForYear(species:Species,year:number) {\n        return new Promise((resolve,reject) => {\n            let jan1 = new Date(year,0,1),\n                dec31 = new Date(year,11,31);\n            Promise.all([\n                this.getPhenophasesForDate(species,jan1),\n                this.getPhenophasesForDate(species,dec31)\n            ]).then(lists => {\n                resolve(this.mergeRedundantPhenophaseLists(lists));\n            })\n            .catch(reject);\n        });\n    }\n\n    getPhenophasesForYears(species:Species,startYear:number,endYear:number):Promise<Phenophase[]> {\n        if(startYear && !endYear) {\n            throw new Error('Missing end year.');\n        }\n        if(startYear > endYear) {\n            throw new Error('start year cannot be greater than end');\n        }\n        let years = [startYear],i = startYear;\n        while(i++ < endYear) {\n            years.push(i);\n        }\n        return new Promise((resolve,reject) => {\n            Promise.all(years.map(y => this.getPhenophasesForYear(species,y)))\n                .then(lists => {\n                    resolve(this.mergeRedundantPhenophaseLists(lists));\n                })\n                .catch(reject);\n        });\n    }\n\n    getPhenophases(species:Species,startYear?:number,endYear?:number):Promise<Phenophase[]> {\n        return startYear ?\n            this.getPhenophasesForYears(species,startYear,endYear) :\n            this.getAllPhenophases(species);\n    }\n\n    private removeRedundantPhenophases(list) {\n        let seen = [];\n        return list.filter(function(pp){\n            if(seen[pp.phenophase_id]) {\n                return false;\n            }\n            seen[pp.phenophase_id] = pp;\n            return true;\n        });\n    }\n    private mergeRedundantPhenophaseLists(lists) {\n        return this.removeRedundantPhenophases(\n            lists.reduce(function(arr,l){\n                return arr.concat(l);\n            },[]));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species.service.ts","export class Species {\n    species_id: string;\n    kingdom?: string;\n    [x: string]: any;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/species.ts","import {Injectable} from '@angular/core';\n\n@Injectable()\nexport class Window {\n    innerWidth: number;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/common/window.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  googleMapsApiKey: 'AIzaSyAsTM8XaktfkwpjEeDMXkNrojaiB2W5WyE',\n  /*\n  apiRoot: 'http://www-dev.usanpn.org', //'http://localhost:8000',\n  dataApiRoot: 'http://data-dev.usanpn.org:3006',\n  refugeApiRoot: '/api/refuge', //'https://npn-fws.firebaseio.com/refuge',\n  */\n  cacheTTL: 3600000, // 1 hour vs 5 minutes 300000,\n  appConfig: {\n      // this stuff is \"system wide\" and may need to be rolled into how an individual visualization is displayed\n      // i.e. what someone wants one visualization on their dashbord with filterLqdSummary:true and another false\n      // or a different # of days quality filter?\n      num_days_quality_filter: 30,\n      filterLqdSummary: true,\n      filterLqdDisclaimer: 'For quality assurance purposes, only onset dates that are preceded by negative records are included in the visualization.',\n      tagSpeciesTitle: 'common-name', // or 'scientific-name'\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/environments/environment.ts","import {Injectable} from '@angular/core';\n\nconst FMT_REGEX = /^(\\d\\d\\d\\d)-0?(\\d+)-0?(\\d+)/;\n@Injectable()\nexport class DateExtentUtil {\n    parse(s:string):Date {\n        let match = FMT_REGEX.exec(s.replace(/T.*$/,'')),\n            year = parseInt(match[1]),\n            month = parseInt(match[2])-1,\n            day = parseInt(match[3]);\n        return new Date(year,month,day);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/date-extent-util.service.ts","import {Inject,Injectable} from '@angular/core';\nimport {NPN_CONFIGURATION,NpnConfiguration} from '../common';\n\nexport const MAP_LAYERS = {\n    \"geo_server\": {\n        \"url\": \"//geoserver-dev.usanpn.org/geoserver\"\n    },\n    \"description\" : \"\",\n    \"categories\": [{\n        \"name\": \"Temperature Accumulations, Daily 30-year Average\",\n        \"supports_data\": false,\n        \"legend_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [false]\n        },\n        \"gridded_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [true]\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayElevation\"\n        },\n        \"legend_units\" : \"Growing Degree Days\",\n        \"legend_delimiter_every\" : 2000,\n        \"layers\":[{\n                \"name\": \"gdd:30yr_avg_agdd\"\n            },{\n                \"name\": \"gdd:30yr_avg_agdd_50f\"\n            }]\n    },{\n        \"name\": \"Temperature Accumulations, Current Day\",\n        \"supports_data\": false,\n        \"legend_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [false]\n        },\n        \"gridded_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [true]\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayTime\"\n        },\n        \"legend_units\" : \"Growing Degree Days\",\n        \"legend_delimiter_every\" : 2000,\n        \"supports_time_series\": true,\n        \"layers\":[{\n                \"name\": \"gdd:agdd\"\n            },{\n                \"name\": \"gdd:agdd_50f\"\n            }]\n    },{\n        \"name\": \"Temperature Accumulations, Current Day, Alaska\",\n        \"supports_data\": false,\n        \"legend_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [false]\n        },\n        \"gridded_label_filter\": {\n            \"name\": \"legendGddUnits\",\n            \"args\": [true]\n        },\n        \"extent_values_filter\": {\n            \"name\": \"extentDates\",\n            \"args\": [null,\"today\"]\n        },\n        \"legend_units\" : \"Growing Degree Days\",\n        \"legend_delimiter_every\" : 2000,\n        \"layers\":[{\n            \"name\": \"gdd:agdd_alaska\"\n        },{\n            \"name\": \"gdd:agdd_alaska_50f\"\n        }]\n    },{\n        \"name\": \"Temperature Accumulations, Daily Anomaly\",\n        \"supports_data\": false,\n        \"legend_label_filter\": {\n            \"name\": \"legendAgddAnomaly\",\n            \"args\": [false]\n        },\n        \"gridded_label_filter\": {\n            \"name\": \"legendAgddAnomaly\",\n            \"args\": [true]\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayTime\"\n        },\n        \"legend_units\" : \"Growing Degree Days\",\n        \"legend_delimiter_every\" : 100,\n        \"layers\":[{\n                \"name\": \"gdd:agdd_anomaly\"\n            },{\n                \"name\": \"gdd:agdd_anomaly_50f\"\n            }]\n    },{\n        \"name\": \"Spring Indices, Historical Annual\",\n        \"legend_label_filter\": {\n            \"name\": \"legendDoy\"\n        },\n        \"current_year_only\": true,\n        \"layers\":[{\n\t\t\t\t\"name\": \"si-x:average_leaf_prism\"\n            },{\n\t\t\t\t\"name\": \"si-x:average_bloom_prism\"\n            },{\n                \"name\": \"si-x:arnoldred_leaf_prism\"\n            },{\n                \"name\": \"si-x:arnoldred_bloom_prism\"\n            },{\n                \"name\": \"si-x:lilac_leaf_prism\"\n            },{\n                \"name\": \"si-x:lilac_bloom_prism\"\n            },{\n                \"name\": \"si-x:zabelli_leaf_prism\"\n            },{\n                \"name\": \"si-x:zabelli_bloom_prism\"\n            }]\n    },{\n        \"name\": \"Spring Indices, Current Year\",\n        \"legend_label_filter\": {\n            \"name\": \"legendDoy\"\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayTime\"\n        },\n        \"current_year_only\": true,\n        \"layers\": [{\n\t\t\t\t\"name\": \"si-x:average_leaf_ncep\"\n            },{\n\t\t\t\t\"name\": \"si-x:average_bloom_ncep\"\n            },{\n                \"name\": \"si-x:arnoldred_leaf_ncep\"\n            },{\n                \"name\": \"si-x:arnoldred_bloom_ncep\"\n            },{\n                \"name\": \"si-x:lilac_leaf_ncep\"\n            },{\n                \"name\": \"si-x:lilac_bloom_ncep\"\n            },{\n                \"name\": \"si-x:zabelli_leaf_ncep\"\n            },{\n                \"name\": \"si-x:zabelli_bloom_ncep\"\n            }]\n    },{\n        \"name\": \"Spring Indices, Current Year, Alaska\",\n        \"legend_label_filter\": {\n            \"name\": \"legendDoy\"\n        },\n        \"extent_values_filter\": {\n            \"name\": \"extentDates\",\n            \"args\": [null,\"today\"]\n        },\n        \"current_year_only\": true,\n        \"layers\": [{\n            \"name\": \"si-x:average_leaf_ncep_alaska\"\n        },{\n            \"name\": \"si-x:average_bloom_ncep_alaska\"\n        },{\n            \"name\": \"si-x:arnoldred_leaf_ncep_alaska\"\n        },{\n            \"name\": \"si-x:arnoldred_bloom_ncep_alaska\"\n        },{\n            \"name\": \"si-x:lilac_leaf_ncep_alaska\"\n        },{\n            \"name\": \"si-x:lilac_bloom_ncep_alaska\"\n        },{\n            \"name\": \"si-x:zabelli_leaf_ncep_alaska\"\n        },{\n            \"name\": \"si-x:zabelli_bloom_ncep_alaska\"\n        }]\n    },{\n        \"name\": \"Spring Indices, Daily Anomaly\",\n        \"supports_data\": false,\n        \"legend_label_filter\": {\n            \"name\": \"legendSixAnomaly\"\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayTime\"\n        },\n        \"layers\": [{\n                \"name\": \"si-x:leaf_anomaly\"\n            },{\n                \"name\": \"si-x:bloom_anomaly\"\n            }]\n    },{\n        \"name\": \"Spring Indices, 30-Year Average\",\n        \"legend_label_filter\": {\n            \"name\": \"legendDoy\"\n        },\n        \"extent_default_filter\": {\n            \"name\": \"agddDefaultTodayElevation\"\n        },\n        \"layers\": [{\n                \"name\": \"si-x:30yr_avg_six_leaf\"\n            },{\n                \"name\": \"si-x:30yr_avg_six_bloom\"\n            }]\n    }]\n};\n\n// not safe to change since the capabilities document format changes based on version\n// so a version change -may- require code changes wrt interpreting the document\nexport const WMS_VERSION = '1.1.1';\nexport const BOX_SIZE = 256;\nexport const BASE_WMS_ARGS = {\n    service: 'WMS',\n    request: 'GetMap',\n    version: WMS_VERSION,\n    layers: undefined, // gets filled in per layer\n    styles: '',\n    format: 'image/png',\n    transparent: true,\n    height: BOX_SIZE,\n    width: BOX_SIZE,\n    srs: 'EPSG:3857' // 'EPSG:4326'\n};\n\n@Injectable()\nexport class GriddedUrls {\n    readonly geoServerUrl:string;\n    readonly wmsBaseUrl;\n    readonly wmsCapabilitiesUrl;\n\n    constructor(@Inject(NPN_CONFIGURATION) public config:NpnConfiguration) {\n        this.geoServerUrl = config.geoServerRoot;\n        this.wmsBaseUrl = `${this.geoServerUrl}/wms`;\n        this.wmsCapabilitiesUrl = `${this.wmsBaseUrl}?service=wms&version=${WMS_VERSION}&request=GetCapabilities`;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/gridded-common.ts","import {NgModule} from '@angular/core';\nimport {DatePipe,DecimalPipe} from '@angular/common';\nimport {FormsModule,ReactiveFormsModule} from '@angular/forms';\n\nimport {BrowserModule} from '@angular/platform-browser';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {MatSliderModule} from '@angular/material';\n\nimport {WmsPipeFactory} from './wms-pipe-factory.service';\nimport {WmsMapLayerService} from './wms-map-layer.service';\nimport {WmsMapLegendService} from './wms-map-legend.service';\nimport {NpnCommonModule} from '../common';\nimport {DateExtentUtil} from './date-extent-util.service';\nimport {WmsMapLegendComponent} from './wms-map-legend.component';\nimport {WmsMapOpacityControl} from './wms-map-opacity-control.component';\nimport {GriddedUrls} from './gridded-common';\n\nimport {LegendGddUnitsPipe,AgddDefaultTodayElevationPipe,LegendAgddAnomalyPipe,\n        AgddDefaultTodayTimePipe,LegendSixAnomalyPipe,LegendDoyPipe,ExtentDatesPipe} from './pipes';\n\n@NgModule({\n    imports:[\n        BrowserAnimationsModule,\n        BrowserModule,\n        FormsModule,ReactiveFormsModule,\n        MatSliderModule,\n        NpnCommonModule\n    ],\n    declarations:[\n        WmsMapLegendComponent,\n        WmsMapOpacityControl\n    ],\n    exports:[\n        WmsMapLegendComponent,\n        WmsMapOpacityControl\n    ],\n    providers:[\n        DatePipe,DecimalPipe,\n        DateExtentUtil,\n        LegendGddUnitsPipe,AgddDefaultTodayElevationPipe,LegendAgddAnomalyPipe,\n        AgddDefaultTodayTimePipe,LegendSixAnomalyPipe,LegendDoyPipe,ExtentDatesPipe,\n        WmsPipeFactory,\n        WmsMapLayerService,\n        WmsMapLegendService,\n        GriddedUrls\n    ]\n})\nexport class NpnGriddedModule {}\n\n//export * from './wms-map-layer';\nexport * from './wms-map-layer.service';\nexport * from './wms-map-legend';\nexport * from './wms-map-legend.service';\nexport {WmsMapSupportsOpacity} from './wms-map-opacity-control.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/index.ts","import {Pipe,PipeTransform} from '@angular/core';\nimport {DatePipe,DecimalPipe} from '@angular/common';\nimport {DateExtentUtil} from './date-extent-util.service';\n\nconst ONE_DAY = (24*60*60*1000);\nconst JAN_ONE_2010 = new Date(2010,0);\nconst JAN_ONE_THIS_YEAR = new Date((new Date()).getFullYear(),0);\n\n@Pipe({name: 'legendGddUnits'})\nexport class LegendGddUnitsPipe implements PipeTransform {\n    constructor(private decimalPipe:DecimalPipe) {}\n    transform(n:number,includeUnits?:boolean) {\n        return this.decimalPipe.transform(n,'1.0')+(includeUnits ? ' AGDD' : '');\n    }\n}\n\n@Pipe({name: 'agddDefaultTodayElevation'})\nexport class AgddDefaultTodayElevationPipe implements PipeTransform {\n    constructor(private datePipe:DatePipe) {}\n\n    transform(values:any[]):any {\n        let todayLabel = this.datePipe.transform(new Date(),'MMMM d');\n        return (values||[]).reduce((dflt,v) =>{\n            return dflt||(v.label == todayLabel ? v : undefined);\n        },undefined);\n    }\n}\n\n@Pipe({name: 'legendAgddAnomaly'})\nexport class LegendAgddAnomalyPipe implements PipeTransform {\n    constructor(private decimalPipe:DecimalPipe) {}\n    transform(n:number,includeUnits?:boolean):string {\n        if(n === 0) {\n            return 'No Difference';\n        }\n        let lt = n < 0;\n        return this.decimalPipe.transform(Math.abs(n),'1.0')+(includeUnits ? ' AGDD ' : ' ')+(lt ? '<' : '>') +' Avg';\n    }\n}\n\n@Pipe({name: 'agddDefaultTodayTime'})\nexport class AgddDefaultTodayTimePipe implements PipeTransform {\n    constructor(private datePipe:DatePipe) {}\n\n    transform(values:any[]):string {\n        let todayLabel = this.datePipe.transform(new Date(),'MMMM d, y');\n        return (values||[]).reduce(function(dflt,v){\n            return dflt||(v.label == todayLabel ? v : undefined);\n        },undefined);\n    };\n}\n\n@Pipe({name: 'legendSixAnomaly'})\nexport class LegendSixAnomalyPipe implements PipeTransform {\n    transform(n:number):string {\n        if(n === 0) {\n            return 'No Difference';\n        }\n        var lt = n < 0,\n            abs = Math.abs(n);\n        return abs+' Days '+(lt ? 'Early' : 'Late');\n    };\n}\n\n@Pipe({name: 'legendDoy'})\nexport class LegendDoyPipe implements PipeTransform {\n    constructor(private datePipe:DatePipe) {}\n\n    transform(doy:number,fmt:string,current_year?:boolean):string {\n        doy = Math.round(doy);\n        if(doy === 0) {\n            doy = 1;\n        }\n        fmt = fmt||'MMM d'; // e.g. Jan 1\n        return this.datePipe.transform(new Date((current_year ? JAN_ONE_THIS_YEAR : JAN_ONE_2010).getTime()+((doy-1)*ONE_DAY)),fmt);\n    }\n}\n\n\n@Pipe({name: 'extentDates'})\nexport class ExtentDatesPipe implements PipeTransform {\n    constructor(private datePipe:DatePipe,private dateExtentUtil:DateExtentUtil) {}\n\n    toTime(s:string):number {\n        let d = new Date();\n        if(s === 'yesterday' || s === 'today' || s === 'tomorrow') {\n            if(s === 'yesterday') {\n                d.setTime(d.getTime()-ONE_DAY);\n            } else if (s === 'tomorrow') {\n                d.setTime(d.getTime()+ONE_DAY);\n            }\n            s = this.datePipe.transform(d,'yyyy-MM-dd 00:00:00');\n        } else if(s.indexOf('T') === -1) {\n            s = d.getFullYear()+'-'+s+' 00:00:00';\n        }\n        return this.dateExtentUtil.parse(s).getTime();\n    }\n\n    transform(arr:string[],after:string,before:string):string[] {\n        var a = after ? this.toTime(after) : undefined,\n            b = before ? this.toTime(before) : undefined;\n        if(a || b) {\n            arr = arr.filter((d) => {\n                var t = this.dateExtentUtil.parse(d).getTime();\n                return (!a || (a && t > a)) && (!b || (b && t < b));\n            });\n        }\n        return arr;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/pipes.ts","import {Injectable} from '@angular/core';\nimport * as $ from 'jquery';\nimport {} from '@types/googlemaps';\n\nimport {DateExtentUtil} from './date-extent-util.service';\nimport {NpnServiceUtils} from '../common';\nimport {MAP_LAYERS,GriddedUrls} from './gridded-common';\nimport {WmsMapLayer} from './wms-map-layer';\n\nconst DEEP_COPY = (o) => JSON.parse(JSON.stringify(o));\n\n@Injectable()\nexport class WmsMapLayerService {\n    private layerDefs:any;\n\n    constructor(private serviceUtils:NpnServiceUtils,\n                private dateExtentUtil:DateExtentUtil,\n                private urls:GriddedUrls) {\n    }\n\n    getLayers(map:google.maps.Map):Promise<any> {\n        return new Promise((resolve,reject) => {\n            this.getLayerDefinitions()\n                .then(definitions => {\n                    let copy = DEEP_COPY(definitions);\n                    copy.categories.forEach(cat => {\n                        // replace layer definitions with actual layers\n                        cat.layers = cat.layers.map(l => new WmsMapLayer(map,l,this.urls.wmsBaseUrl));\n                    });\n                    resolve(copy);\n                })\n                .catch(reject);\n        });\n    }\n\n    getLayerDefinitions():Promise<any> {\n        function mergeLayersIntoConfig(wms_layer_defs) {\n            let result = DEEP_COPY(MAP_LAYERS),\n                base_description = result.description;\n            result.categories.forEach(function(category){\n                // layers can inherit config like filters (if all in common) from\n                // the base category\n                let base_config = DEEP_COPY(category);\n                delete base_config.name;\n                delete base_config.layers;\n                base_config.description = base_config.description||base_description;\n                category.layers = category.layers.map(l => {\n                    let base_copy = DEEP_COPY(base_config);\n                    return {...base_copy,...wms_layer_defs[l.name],...l};\n                });\n            });\n            return result;\n        }\n        return new Promise((resolve,reject) => {\n            if(this.layerDefs) {\n                resolve(this.layerDefs);\n            } else {\n                this.serviceUtils.cachedGet(this.urls.wmsCapabilitiesUrl,null,true/*as text*/)\n                    .then(xml => {\n                        let wms_capabilities = $($.parseXML(xml));\n                        console.debug('WmsMapLayerService:capabilities',wms_capabilities);\n                        let wms_layer_defs = this._getLayers(wms_capabilities.find('Layer'));\n                        console.debug('WmsMapLayerService:wms layer definitions',wms_layer_defs);\n                        this.layerDefs = mergeLayersIntoConfig(wms_layer_defs);\n                        console.debug('WmsMapLayerService:layer definitions',this.layerDefs);\n                        resolve(this.layerDefs);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n\n    getLayerDefinition(layerName:string):Promise<any> {\n        return new Promise((resolve,reject) => {\n            this.getLayerDefinitions()\n                .then(definitions => {\n                    let layerMap = definitions.categories.reduce((map,c) => {\n                            c.layers.forEach(l => {\n                                map[l.name] = l;\n                            });\n                            return map;\n                        },{});\n                    resolve(layerMap[layerName]);\n                })\n                .catch(reject);\n        });\n    }\n\n    // returns an associative array of machine name layer to layer definition\n    private _getLayers(layers) {\n        if(!layers || layers.length < 2) { // 1st layer is parent, children are the real layers\n            return;\n        }\n        // make it a normal array, not a jQuery one\n        let ls = [];\n        layers.slice(1).each(function(i,o) {\n            ls.push(o);\n        });\n        return ls.map(l => this._layerToObject(l)).reduce((map,l) => {\n            map[l.name] = l;\n            return map;\n        },{});\n    }\n    private _layerToObject(layer) {\n        let l = $(layer),\n            o = {\n                name: l.find('Name').first().text(),\n                // redmine #761\n                title: l.find('Title').first().text().replace(/\\((.+?)\\)/g, ''),\n                abstract: l.find('Abstract').first().text(),\n                bbox: this._parseBoundingBox(l.find('EX_GeographicBoundingBox').first()),\n                style: this._parseStyle(l.find('Style').first()),\n                //extent: this._parseExtent(l.find('Extent').first()) // TODO see unmigrated code below\n            };\n        if(!o.bbox) {\n            o.bbox = this._parseLatLonBoundingBox(l.find('LatLonBoundingBox').first());\n        }\n        return o;\n    }\n    private _parseStyle(style) {\n        let s = $(style);\n        return {\n            name: s.find('Name').first().text(),\n            // redmine #761\n            title: s.find('Title').first().text().replace(/\\((.+?)\\)/g, ''),\n            legend: s.find('OnlineResource').attr('xlink:href') // not very specific...\n        };\n    }\n    private _parseLatLonBoundingBox(bb) {\n        if(bb.length) {\n            let bbox = {\n                westBoundLongitude: parseFloat(bb.attr('minx')),\n                eastBoundLongitude: parseFloat(bb.attr('maxx')),\n                southBoundLatitude: parseFloat(bb.attr('miny')),\n                northBoundLatitude: parseFloat(bb.attr('maxy')),\n                getBounds: function() { // TODO, cut/paste\n                    return new google.maps.LatLngBounds(\n                        new google.maps.LatLng(bbox.southBoundLatitude,bbox.westBoundLongitude), // sw\n                        new google.maps.LatLng(bbox.northBoundLatitude,bbox.eastBoundLongitude) // ne\n                    );\n                }\n            };\n            return bbox;\n        }\n    }\n    private _parseBoundingBox(bb) {\n        if(bb.length) {\n            let bbox = {\n                westBoundLongitude: parseFloat(bb.find('westBoundLongitude').text()),\n                eastBoundLongitude: parseFloat(bb.find('eastBoundLongitude').text()),\n                southBoundLatitude: parseFloat(bb.find('southBoundLatitude').text()),\n                northBoundLatitude: parseFloat(bb.find('northBoundLatitude').text()),\n                getBounds: function() {\n                    return new google.maps.LatLngBounds(\n                        new google.maps.LatLng(bbox.southBoundLatitude,bbox.westBoundLongitude), // sw\n                        new google.maps.LatLng(bbox.northBoundLatitude,bbox.eastBoundLongitude) // ne\n                    );\n                }\n            };\n            // some bounding boxes seem to be messed up with lat/lons of 0 && -1\n            // so if any of those numbers occur throw away the bounding box.\n            return ![bbox.westBoundLongitude,bbox.eastBoundLongitude,bbox.southBoundLatitude,bbox.northBoundLatitude].reduce(function(v,n){\n                return v||(n === 0 || n === -1);\n            },false) ? bbox : undefined;\n        }\n    }\n    /* TODO extents involve filters, etc. so this code, and the code that calls it has yet to be\n     * migrated there will be a \"PipeFactory\" so this can be dealt with.\n    // represents an extent value of month/day/year\n    function DateExtentValue(value,dateFmt) {\n        var d = DateExtentUtil.parse(value);\n        return {\n            value: value,\n            date: d,\n            label: $filter('date')(d,(dateFmt||'longDate')),\n            addToWmsParams: function(params) {\n                params.time = value;\n            },\n            addToWcsParams: function(params) {\n                if(!params.subset) {\n                    params.subset = [];\n                }\n                params.subset.push('http://www.opengis.net/def/axis/OGC/0/time(\"'+value+'\")');\n            }\n        };\n    }\n    // represents an extent value of day of year\n    function DoyExtentValue(value) {\n        return {\n            value: value,\n            label: $filter('thirtyYearAvgDayOfYear')(value),\n            addToWmsParams: function(params) {\n                params.elevation = value;\n            },\n            addToWcsParams: function(params) {\n                if(!params.subset) {\n                    params.subset = [];\n                }\n                params.subset.push('http://www.opengis.net/def/axis/OGC/0/elevation('+value+')');\n            }\n        };\n    }\n    function parseExtent(extent) {\n        var e = $(extent),\n            content = e.text(),\n            dfltValue = e.attr('default'),\n            dflt,values,\n            name = e.attr('name'),\n            start,end,yearFmt = 'yyyy',i;\n        if(!name || !content) {\n            return undefined;\n        }\n        function findDefault(current,value) {\n            return current||(value.value == dfltValue ? value : undefined);\n        }\n        if(name === 'time') {\n            if(content.indexOf('/') === -1) { // for now skip <lower>/<upper>/<resolution>\n                values = content.split(',').map(function(d) { return new DateExtentValue(d); });\n                // ugh\n                dfltValue = dfltValue.replace(/0Z/,'0.000Z'); // extent values in ms preceision but not the default...\n                dflt = values.reduce(findDefault,undefined);\n                return {\n                    label: 'Date',\n                    type: 'date',\n                    current: dflt, // bind the extent value to use here\n                    values: values\n                };\n            } else {\n                values = /^([^\\/]+)\\/(.*)\\/P1Y$/.exec(content);\n                if(values && values.length === 3) {\n                    start = new DateExtentValue(values[1],yearFmt);\n                    end = new DateExtentValue(values[2],yearFmt);\n                    if(end.date.getFullYear() > start.date.getFullYear()) { // should never happen but to be safe\n                        values = [start];\n                        for(i = start.date.getFullYear()+1; i < end.date.getFullYear();i++) {\n                            values.push(new DateExtentValue(i+'-01-01T00:00:00.000Z',yearFmt));\n                        }\n                        values.push(end);\n                        return {\n                            label: 'Year',\n                            type: 'year',\n                            current: end,\n                            values: values\n                        };\n                    }\n                }\n            }\n        } else if (name === 'elevation') {\n            values = content.split(',').map(function(e) { return new DoyExtentValue(e); });\n            dflt = values.reduce(findDefault,undefined);\n            return {\n                label: 'Day of Year',\n                type: 'doy',\n                current: dflt, // bind the extent value to use here\n                values: values\n            };\n        }\n    }*/\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-layer.service.ts","import {} from '@types/googlemaps';\n\nimport {BOX_SIZE,BASE_WMS_ARGS} from './gridded-common';\n\n// this is incomplete (obviously).  after starting down this path\n// realized that WmsMapLegend could be migrated without Layer which isn't initially needed\n// leaving the current state of things as is.\n// this will compile but is useless...\nfunction $filter(name:string):any {}\n\nexport class WmsMapLayer {\n    private wmsArgs:any;\n    private sldBody:any;\n    googleLayer: google.maps.ImageMapType;\n    [x: string]: any; // allow arbitrary properties\n\n    constructor(protected map:google.maps.Map,protected layer_def:any,protected wmsBaseUrl:string) {\n        if(layer_def.extent_values_filter) {\n            console.debug('layer '+layer_def.name+' has an extent_values_filter, processing',layer_def.extent_values_filter);\n            let valuesFilter = $filter(layer_def.extent_values_filter.name),\n                extentValues = layer_def.extent.values.map(function(e){ return e.value; }),\n                filterArgs = [extentValues].concat(layer_def.extent_values_filter.args||[]),\n                filteredValues;\n            filteredValues = valuesFilter.apply(undefined,filterArgs);\n            console.debug('filteredValues',(filteredValues.length > 1 ? (filteredValues[0]+'...'+filteredValues[filteredValues.length-1]) : filteredValues));\n            layer_def.extent.values = layer_def.extent.values.filter(function(v) {\n                return filteredValues.indexOf(v.value) !== -1;\n            });\n            if(layer_def.extent.current && filteredValues.indexOf(layer_def.extent.current.value) === -1) {\n                console.debug('current extent value has become invalid, replacing with last option');\n                layer_def.extent.current = layer_def.extent.values.length ? layer_def.extent.values[layer_def.extent.values.length-1] : undefined;\n            }\n        }\n        if(layer_def.extent_default_filter) {\n            console.debug('layer '+layer_def.name+' has an extent_default_filter, processing', layer_def.extent_default_filter);\n            let defaultFilter = $filter(layer_def.extent_default_filter.name),\n                defaultFilterArgs = [layer_def.extent.values].concat(layer_def.extent_default_filter.values||[]);\n            layer_def.extent.current = defaultFilter.apply(undefined,defaultFilterArgs)||layer_def.extent.current;\n            console.debug('resulting default value',layer_def.extent.current);\n        }\n        /*\n        if(layer_def.description) {\n            layer_def.$description = $sce.trustAsHtml(layer_def.description);\n        }*/\n        this.wmsArgs = {...BASE_WMS_ARGS,...{layers: layer_def.name}};\n        this.googleLayer = new google.maps.ImageMapType({\n            getTileUrl: (coord:google.maps.Point, zoom:number) => {\n                let proj = map.getProjection(),\n                    zfactor = Math.pow(2, zoom),\n                    top = proj.fromPointToLatLng(new google.maps.Point(coord.x * BOX_SIZE / zfactor, coord.y * BOX_SIZE / zfactor)),\n                    bot = proj.fromPointToLatLng(new google.maps.Point((coord.x + 1) * BOX_SIZE / zfactor, (coord.y + 1) * BOX_SIZE / zfactor)),\n                    ctop = srsConversion(top),\n                    cbot = srsConversion(bot),\n                    base = {};\n                if(this.extent && this.extent.current) {\n                    this.extent.current.addToWmsParams(base);\n                }\n                var args:any = {bbox: [ctop.lng,cbot.lat,cbot.lng,ctop.lat].join(',')};\n                if(this.sldBody) {\n                    args.sld_body = this.sldBody;\n                }\n                let all_args = {...base,...this.wmsArgs,...args};\n                return this.wmsBaseUrl+'?'+encodeHttpParams(all_args);\n            },\n            tileSize: new google.maps.Size(BOX_SIZE, BOX_SIZE),\n            //isPng: true,\n            name: (layer_def.title||layer_def.name)\n        });\n        // the original created a scoped object and copied all the layer_def properties onto it and\n        // added the functions to that, copy the properties onto the WmsMapLayer instance\n        Object.keys(layer_def).forEach(key => {\n            this[key] = layer_def[key];\n        });\n    }\n}\n\nfunction encodeHttpParams(params) {\n    if(!params) {\n        return '';\n    }\n    let parts = [];\n    Object.keys(params).forEach(k => {\n        if(params[k]) {\n            let ok = encodeURIComponent(k),\n                ov = encodeURIComponent(params[k]);\n            parts.push(`${ok}=${ov}`);\n        }\n    });\n    return parts.join('&');\n}\n\n// this code converts coordinates from ESPG:4326 to ESPG:3857, it originated @\n// http://gis.stackexchange.com/questions/52188/google-maps-wms-layer-with-3857\n// that author stated it came from StackOverflow which I tried to find to attribute properly but could not.\n// the issue here is that if requests are sent to the map service with ESPG:4326 coordinates everything\n// appears accurate when tightly zoomed however as you zoom out beyond a certain point the layers begin to\n// migrate north, the farther zoomed out the more drastic the migration (e.g. from Mexico into N. Canada)\n// while dealing in traditional lat/lng for google maps they are actually projected in 3857 (metres, not meters).\n// the main thing is that 4326 coordinates are projected onto a sphere/ellipsoid while 3857 are translated to\n// a flat surface.\n// unfortunately while google maps projection must be performing such transformations it doesn't expose this ability.\nfunction srsConversion(latLng) {\n    if ((Math.abs(latLng.lng()) > 180 || Math.abs(latLng.lat()) > 90)) {\n        return;\n    }\n\n    var num = latLng.lng() * 0.017453292519943295;\n    var x = 6378137.0 * num;\n    var a = latLng.lat() * 0.017453292519943295;\n\n    return {lng: x, lat: 3189068.5 * Math.log((1.0 + Math.sin(a)) / (1.0 - Math.sin(a)))};\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-layer.ts","import {Component,Input,AfterViewInit,HostListener,ElementRef,OnDestroy,OnChanges,SimpleChanges} from '@angular/core';\n\nimport {Window} from '../common';\nimport {WmsMapLegend} from './wms-map-legend';\n\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/operator/debounceTime';\n\nimport {Selection} from 'd3-selection';\nimport * as d3 from 'd3';\n\n@Component({\n    selector: 'wms-map-legend',\n    template:`\n    <svg class=\"gridded-legend\"></svg>\n    `,\n    styles:[`\n    `]\n})\nexport class WmsMapLegendComponent implements AfterViewInit, OnDestroy, OnChanges {\n    @Input()\n    legend:WmsMapLegend;\n\n    private svg: Selection<any,any,any,any>;\n\n    private resizeSubscription:any;\n\n    constructor(protected window: Window, protected rootElement: ElementRef) {}\n\n    ngAfterViewInit() {\n        console.debug('WmsMapLegendComponent.ngAfterViewInit');\n        this.resizeSubscription = Observable.fromEvent(window,'resize')\n            .debounceTime(500)\n            .subscribe(event => this.redraw());\n        this.svg = d3.select(this.rootElement.nativeElement).select('svg');\n        console.debug('WmsMapLegendComponent:SVG',this.svg);\n    }\n\n    ngOnChanges(changes:SimpleChanges):void {\n        console.debug('WmsMapLegendComponent.ngOnChanges',changes);\n        setTimeout(() => this.redraw()); // all that can change at the moment is the reference to legend\n    }\n\n    ngOnDestroy() {\n        console.debug('WmsMapLegendComponent.ngOnDestroy');\n        if(this.resizeSubscription) {\n            this.resizeSubscription.unsubscribe();\n        }\n    }\n\n    redraw() {\n        console.debug('WmsMapLegendComponent.redraw');\n        let svg = this.svg,\n            legend = this.legend;\n        if(svg) {\n            svg.selectAll('g').remove();\n        }\n\n        if(!legend || !svg) {\n            return;\n        }\n        let width = parseFloat(svg.style('width').replace('px','')),\n            height = parseFloat(svg.style('height').replace('px','')),\n            data = legend.getData(),\n            mid_idx = Math.floor(data.length/2),\n            cell_width = width/data.length,\n            cell_height = 30,\n            top_pad = 2;\n        console.debug('WmsMapLegendComponent.svg dimensions',width,height);\n        console.debug('WmsMapLegendComponent.legend cell width',cell_width);\n\n        let g = svg.append('g'),\n            cell = g.selectAll('g.cell')\n                     .data(data)\n                     .enter()\n                     .append('g')\n                     .attr('class',(d,i) => {\n                        return 'cell'+\n                            ((i === 0) ? ' first' :\n                             ((i === mid_idx) ? ' middle' :\n                              ((i === data.length -1) ? ' last' : '')));\n                     })\n                     .attr('transform',function(d,i) { return 'translate('+(i*cell_width)+','+top_pad+')'; })\n                     .append('rect')\n                     .attr('height',cell_height)\n                     .attr('width',cell_width)\n                     .style('stroke','black')\n                     .style('stroke-width','1px')\n                     .style('fill',function(d,i) { return d.color; });\n\n         if(legend.ldef.legend_delimiter_every) {\n             let every = legend.ldef.legend_delimiter_every,\n                 first_every = false,\n                 running_total = 0,\n                 separators = data.map(function(d,i){\n                     if((i+1) === data.length) {\n                         return true;\n                     }\n                     running_total += (data[i+1].quantity - data[i].quantity);\n                     if(running_total >= every) {\n                         running_total = 0;\n                         return true;\n                     }\n                     return false;\n                 }),\n                 top_bottom = [(cell_width+1),cell_height,(cell_width+1),cell_height].join(','), //{ stroke-dasharray: $w,$h,$w,$h }\n                 top_right_bottom = [((cell_width*2)+cell_height),cell_height].join(','), //{ stroke-dasharray: (($w*2)+$h),$h }\n                 top_left_bottom = [(cell_width+1),cell_height,(cell_width+cell_height+1),0].join(','); ////{ stroke-dasharray: $w,$h,($w+$h),0 }\n\n             console.debug('WmsMapLegendComponent.legend_delimiter_every',every);\n             cell.style('stroke-dasharray',function(d,i){\n                 if(i === 0) {\n                     return separators[i] ? undefined : top_left_bottom;\n                 }\n                 return separators[i] ? top_right_bottom : top_bottom;\n             })\n             // top_bottom removes the left/right borders which leaves a little whitespace\n             // which looks odd so in cases where there is no right border increase a cell's width\n             // by 1px to cover that gap\n             .attr('width',function(d,i){\n                 var w = parseFloat(d3.select(this).attr('width'));\n                 if(i === 0) {\n                     return separators[i] ? w : w+1;\n                 }\n                 return separators[i] ? w : w+1;\n             });\n             g.selectAll('g.cell').append('line')\n                  .attr('stroke',function(d,i){ return separators[i] ? 'black' : 'none'; })\n                  .attr('stroke-width', 2)\n                  .attr('x1',cell_width-1)\n                  .attr('x2',cell_width-1)\n                  .attr('y1',0)\n                  .attr('y2',cell_height);\n         }\n         cell.append('title').text(function(d) { return d.label; });\n\n         let tick_length = 5,\n             tick_padding = 3;\n\n         function label_cell(cell,label,anchor) {\n             let tick_start = (top_pad+cell_height+tick_padding);\n             cell.append('line')\n                 .attr('x1',(cell_width/2))\n                 .attr('y1',tick_start)\n                 .attr('x2',(cell_width/2))\n                 .attr('y2',tick_start+tick_length)\n                 .attr('stroke','black')\n                 .attr('stroke-width','1');\n             cell.append('text')\n                 .attr('dx',(cell_width/2))\n                 .attr('dy','3.8em'/*cell_height+tick_length+(2*tick_padding)*/) // need to know line height of text\n                 .style('text-anchor',anchor)\n                 .text(label);\n         }\n         label_cell(d3.select('g.cell.first'),data[0].label,'start');\n         label_cell(d3.select('g.cell.middle'),data[mid_idx].label,'middle');\n         label_cell(d3.select('g.cell.last'),data[data.length-1].label,'end');\n\n         if(legend.ldef.legend_units) {\n             svg.append('g')\n                .append('text')\n                .attr('dx',(width/2))\n                .attr('dy',75+top_pad)\n                .attr('text-anchor','middle')\n                .text(legend.ldef.legend_units);\n         }\n\n        let legend_title = legend.ldef.title;\n        if(legend.ldef.extent && legend.ldef.extent.current) {\n            legend_title += `, ${legend.ldef.extent.current.label}`\n        }\n\t\tsvg.append('g').append('text').attr('dx',5)\n            .attr('dy',100+top_pad)\n\t\t\t.attr('font-size', '18px')\n            .attr('text-anchor','right').text(legend_title);\n\n\t\tsvg.append('g').append('text').attr('dx',5)\n            .attr('dy',118+top_pad)\n\t\t\t.attr('font-size', '11px')\n            .attr('text-anchor','right').text('USA National Phenology Network, www.usanpn.org');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.component.ts","import {Injectable} from '@angular/core';\nimport * as $ from 'jquery';\n\nimport {WmsPipeFactory} from './wms-pipe-factory.service';\nimport {WmsMapLayerService} from './wms-map-layer.service';\nimport {NpnServiceUtils} from '../common';\nimport {WmsMapLegend} from './wms-map-legend';\nimport {WMS_VERSION,GriddedUrls} from './gridded-common';\n\n@Injectable()\nexport class WmsMapLegendService {\n    legends:any = {};\n\n    constructor(private wmsPipeFactory:WmsPipeFactory,\n                private serviceUtils:NpnServiceUtils,\n                private layerService:WmsMapLayerService,\n                private urls:GriddedUrls) {\n    }\n\n    getLegend(layerName:string):Promise<WmsMapLegend> {\n        return new Promise((resolve,reject) => {\n            if(this.legends[layerName]) {\n                return resolve(this.legends[layerName]);\n            }\n            this.layerService.getLayerDefinition(layerName)\n                .then(layerDefinition => {\n                    if(!layerDefinition) {\n                        return reject(`layer definition for ${layerName} not found.`)\n                    }\n                    this.serviceUtils.cachedGet(this.urls.wmsBaseUrl,{\n                            service: 'wms',\n                            request: 'GetStyles',\n                            version: WMS_VERSION,\n                            layers: layerName\n                        },true /* as text*/)\n                        .then(xml => {\n                            let legend_data = $($.parseXML(xml)),\n                                color_map = legend_data.find('ColorMap');\n                            if(color_map.length === 0) {\n                                // FF\n                                color_map = legend_data.find('sld\\\\:ColorMap');\n                            }\n                            let l:WmsMapLegend = color_map.length !== 0 ?\n                                new WmsMapLegend(this.wmsPipeFactory,\n                                        $(color_map.toArray()[0]),\n                                        layerDefinition,\n                                        legend_data) : undefined;\n                            this.legends[layerName] = l;\n                            resolve(l);\n                        })\n                        .catch(reject);\n                });\n\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.service.ts","import * as $ from 'jquery';\n\nimport {WmsMapLayer} from './wms-map-layer';\nimport {WmsPipeFactory} from './wms-pipe-factory.service';\n\nconst IDENTITY = d => d;\nexport class WmsMapLegend {\n    private layer:WmsMapLayer;\n\n    private lformat:Function;\n    private gformat:Function;\n    private title_data:any;\n    private data:any[];\n    private length:number;\n\n\n    constructor(protected wmsPipeFactory:WmsPipeFactory,\n                protected color_map:any,\n                /*\n                NOTE: per the original implementation which binds extents directly into the definition this is public\n                may want to later revisit some abstraction, used externally via WmsMapLegendComponent\n                 */\n                public ldef:any,\n                protected styleDefinition:any) {\n            console.log('WmsMapLegend.color_map',color_map);\n            console.log('WmsMapLegend.ldef',ldef);\n            console.log('WmsMapLegend.styleDefinition',styleDefinition);\n            let get_filter = (filter_def) => {\n                let pipe = this.wmsPipeFactory.getPipe(filter_def.name);\n                if(!pipe) {\n                    console.error(`WmsMapLegend: Unable to find pipe named ${filter_def.name}`);\n                }\n                return function(l,q) {\n                    let args = [q];\n                    if(filter_def.args) {\n                        args = args.concat(filter_def.args);\n                    }\n                    return pipe.transform.apply(pipe, args);\n                };\n            };\n            this.lformat = ldef.legend_label_filter ? get_filter(ldef.legend_label_filter) : IDENTITY;\n            this.gformat = ldef.gridded_label_filter ? get_filter(ldef.gridded_label_filter) : undefined;\n            let entries = color_map.find('ColorMapEntry');\n            if(entries.length === 0) {\n                entries = color_map.find('sld\\\\:ColorMapEntry');\n            }\n            let data = entries.toArray().reduce((arr,entry,i) => {\n                var e = $(entry),\n                    q = parseFloat(e.attr('quantity')),\n                    l = e.attr('label');\n                arr.push({\n                    color: e.attr('color'),\n                    quantity: q,\n                    original_label: l,\n                    label: i === 0 ? l : this.lformat(l,q) // why the special case for index 0?\n                });\n                return arr;\n            },[]);\n            this.title_data = data[0];\n            this.data = data.slice(1);\n            this.length = this.data.length;\n    }\n\n    setLayer(l:WmsMapLayer):WmsMapLegend {\n        this.layer = l;\n        return this;\n    }\n\n    getData():any[] {\n        return this.data;\n    }\n\n    getStyleDefinition():any {\n        return this.styleDefinition;\n    }\n\n    getTitle():string {\n        return this.title_data.label;\n    }\n\n    getColors():string[] {\n        return this.data.map(d => d.color);\n    }\n\n    getQuantities():number[] {\n        return this.data.map(d => d.quantity);\n    }\n\n    getLabels():string[] {\n        return this.data.map(d => d.label);\n    }\n\n    getOriginalLabels():string[] {\n        return this.data.map(d => d.original_label);\n    }\n\n    formatPointData(q) {\n        return (this.gformat||this.lformat)(q,q);\n    }\n\n    getPointData(q) {\n        var i,d,n;\n        for(i = 0; i < this.data.length; i++) {\n            d = this.data[i];\n            n = (i+1) < this.data.length ? this.data[i+1] : undefined;\n            if(q == d.quantity) {\n                return d;\n            }\n            if(n && q >= d.quantity && q < n.quantity) {\n                return d;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-legend.ts","import {Component,Input,OnChanges,SimpleChanges} from '@angular/core';\n\n// NOTE: these functions are already defined on google.maps.ImageMapType\n// re-using the function names and can later just claim that ImageMapType\n// implements this interface\nexport interface WmsMapSupportsOpacity {\n    setOpacity(o:number);\n    getOpacity():number;\n}\n\n@Component({\n    selector: 'wms-map-opacity-control',\n    template:`\n    <label>Opacity\n        <mat-slider min=\"0\" max=\"100\" step=\"1\" tickInterval=\"25\" [thumbLabel]=\"opacity\" [(ngModel)]=\"opacity\" (change)=\"opacityChanged()\" [disabled]=\"!supportsOpacity\"></mat-slider>\n    </label>\n    `\n})\nexport class WmsMapOpacityControl implements OnChanges {\n    @Input()\n    supportsOpacity:WmsMapSupportsOpacity;\n    opacity:number = 100;\n\n    opacityChanged() {\n        if(this.supportsOpacity) {\n            this.supportsOpacity.setOpacity(this.opacity/100.0);\n        }\n    }\n\n    ngOnChanges(changes:SimpleChanges):void {\n        console.log('WmsMapOpacityControl.ngOnchanges',changes);\n        if(changes.supportsOpacity && changes.supportsOpacity.currentValue) {\n            this.opacity = Math.round(changes.supportsOpacity.currentValue.getOpacity()*100);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-map-opacity-control.component.ts","import {Injectable,PipeTransform} from '@angular/core';\n\nimport {LegendGddUnitsPipe,AgddDefaultTodayElevationPipe,LegendAgddAnomalyPipe,\n        AgddDefaultTodayTimePipe,LegendSixAnomalyPipe,LegendDoyPipe,ExtentDatesPipe} from './pipes';\n\n// since there is no $filter to magically discover filters/pipes\n// this class exist to catch all pipes that are used by WmsMapLayer/Legend\n// per the layer definitions so they can be retrived by \"name\" abstractly\n@Injectable()\nexport class WmsPipeFactory {\n    private pipes:any = {};\n\n    constructor(\n        private legendGddUnits:LegendGddUnitsPipe,\n        private agddDefaultTodayElevation:AgddDefaultTodayElevationPipe,\n        private legendAgddAnomaly:LegendAgddAnomalyPipe,\n        private agddDefaultTodayTime:AgddDefaultTodayTimePipe,\n        private legendSixAnomaly:LegendSixAnomalyPipe,\n        private legendDoy:LegendDoyPipe,\n        private extentDates:ExtentDatesPipe) {\n        this.pipes.legendGddUnits = legendGddUnits;\n        this.pipes.agddDefaultTodayElevation = agddDefaultTodayElevation;\n        this.pipes.legendAgddAnomaly = legendAgddAnomaly;\n        this.pipes.agddDefaultTodayTime = agddDefaultTodayTime;\n        this.pipes.legendSixAnomaly = legendSixAnomaly;\n        this.pipes.legendDoy = legendDoy;\n        this.pipes.extentDates = extentDates;\n    }\n\n    getPipe(pipeName:string):PipeTransform {\n        return this.pipes[pipeName];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/gridded/wms-pipe-factory.service.ts","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\nimport {HttpModule} from '@angular/http';\n\nimport {VisualizationsModule} from './visualizations';\nimport {Window} from './common/window';\nimport {NpnCommonModule} from './common';\n\nimport {FormsModule} from '@angular/forms';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    BrowserModule,\n    NpnCommonModule,\n    VisualizationsModule,\n    HttpModule,\n    FormsModule\n  ],\n  providers: [\n      {provide: Window, useValue: window},\n  ]\n})\nexport class NpnLibModule { }\n\nexport * from './common';\nexport * from './visualizations';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/index.ts","import {selectionProperty,GET_EXTERNAL,SET_EXTERNAL} from '../vis-selection';\nimport {Species,Phenophase,SpeciesTitlePipe,DoyPipe} from '../../common';\nimport {ActivityCurvesSelection} from './activity-curves-selection';\n\nimport * as d3 from 'd3';\n\nexport class ActivityCurve {\n    @selectionProperty()\n    id:number;\n\n    interpolate? :INTERPOLATE;\n\n    @selectionProperty()\n    private _species:Species;\n    @selectionProperty()\n    private _metric;\n    @selectionProperty()\n    private _phenophase:Phenophase;\n    @selectionProperty()\n    private _year:number;\n\n    private _metrics;\n\n    @selectionProperty()\n    color:string;\n    orient:string;\n\n    doyFocus:number;\n    dataPoints:boolean = true;\n\n    private $data:any;\n    private $metricData:any;\n    private $x;\n    private $y;\n\n    selection:ActivityCurvesSelection;\n\n    get external() { return GET_EXTERNAL.apply(this,arguments); }\n    set external(o) { SET_EXTERNAL.apply(this,arguments); }\n\n    private reset() {\n        delete this.$data;\n        delete this.$metricData;\n    }\n\n    private updateCheck(requiresUpdate?:boolean) {\n        if(this.selection && this.isValid()) {\n            if(!this.plotted() || requiresUpdate) {\n                this.selection.update();\n            } else {\n                this.selection.redraw();\n            }\n        }\n    }\n\n    get year() {\n        return this._year;\n    }\n    set year(y) {\n        this.reset();\n        this._year = y;\n        this.updateCheck(true);\n    }\n\n    get phenophase():Phenophase {\n        return this._phenophase;\n    }\n    set phenophase(p:Phenophase) {\n        this.reset();\n        this._phenophase = p;\n        this.updateCheck(true);\n    }\n\n    get metric() {\n        return this._metric;\n    }\n    set metric(m) {\n        this.reset();\n        this._metric = m;\n        this.updateCheck();\n    }\n\n    get species():Species {\n        return this._species;\n    }\n    set species(s:Species) {\n        this.reset();\n        this._species = s;\n        this.phenophase = undefined;\n        this._metrics = this._species && this._species.kingdom  ? (ACTIVITY_CURVE_KINGDOM_METRICS[this._species.kingdom]||[]) : [];\n        if(this._metric && this._metrics.indexOf(this._metric) === -1) {\n            // previous metric has become invalid\n            delete this.metric;\n        }\n        if(this._metrics.length && !this._metric) {\n            this.metric = this._metrics[0];\n        }\n    }\n\n    get validMetrics() {\n        return (this._metrics||[]);\n    }\n\n    /**\n     * @return The metric label for the curve axis.\n     */\n    axisLabel(): string {\n        return this.metric ? this.metric.label : '?';\n    }\n\n    doyDataValue() {\n        let self = this,\n            data = self.data(),\n            value,d,i;\n        if(self.doyFocus && data) {\n            for(i = 0; i < data.length; i++) {\n                d = data[i];\n                if(self.doyFocus >= d.start_doy && self.doyFocus <= d.end_doy) {\n                    value = (self.metric.valueFormat||IDENTITY)(d[self.metric.id]);\n                    if(d[self.metric.sampleSize] !== -9999) {\n                        value += ' N:'+ d[self.metric.sampleSize];\n                    }\n                    return value;\n                }\n            }\n        }\n    }\n\n    /**\n     * @return Formatted label for the legend.\n     */\n    legendLabel(includeMetric:boolean) {\n        let doyFocusValue = this.doyDataValue();\n        return this.year+': '+SPECIES_TITLE(this.species)+' - '+this.phenophase.phenophase_name+\n            (includeMetric ? (' ('+this.metric.label+')') : '')+\n            (typeof(doyFocusValue) !== 'undefined' ? (' ['+doyFocusValue+']') : '');\n    }\n\n    /**\n     * @return The metric id.\n     */\n    metricId() {\n        return this.metric? this.metric.id : undefined;\n    }\n\n    data(_?):any {\n        if(arguments.length) {\n            delete this.$data;\n            delete this.$metricData;\n            if(_) {\n                _.forEach(function(d) {\n                    d.start_doy = DOY(d.start_date);\n                    d.end_doy = DOY(d.end_date);\n                });\n                _.sort(function(a,b) {\n                    return a.start_doy - b.start_doy;\n                });\n                this.$data = _;\n            }\n            return this;\n        }\n        var self = this,\n            data = self.$data;\n        if(data && self.metric) {\n            // avoid re-filtering with UI updates, store the result and re-use until\n            // something changes\n            if(!self.$metricData) {\n                if(!self.metric.sampleSize) {\n                    console.warn('Metric does not define a sampleSize property, cannot filter out invalid data points.');\n                }\n                data = data.filter(function(d){\n                    if(self.metric.sampleSize && d[self.metric.sampleSize] === -9999) {\n                        //console.log('SAMPLE_SIZE filter.');\n                        return false;\n                    }\n                    return d[self.metric.id] !== -9999;\n                });\n                if(data.length !== self.$data.length) {\n                    console.debug('filtered out '+(self.$data.length-data.length)+'/'+ self.$data.length +' of -9999 records for metric ',self.metric);\n                }\n                /*\n                if(data.length === 26) { // simulate situation for development bi-weekly data\n                    //console.log('DEBUG CODE MODIFYING DATA!!');\n                    // create a single isolated data point and three separate curves\n                    // [0-9] [11] [13-19] [21-25]\n                    data = data.filter(function(d,i) {\n                        return (i !== 10 && i !== 12 && i !== 20);\n                    });\n                }*/\n                self.$metricData = data;\n            } else {\n                data = self.$metricData;\n            }\n        }\n        return data;\n    }\n\n    axis() {\n        var y = this.y(),\n            ticks = y.ticks(), // default is ~10 ticks\n            orient = this.orient||'left',\n            axis = orient === 'left' ? d3.axisLeft(y) : d3.axisRight(y);\n        if(ticks.length) {\n            // replace the final tick with the top of the y domain\n            // that -would- have been generated and use them explicitly\n            // this can result in ticks stacked on on another if too close\n            //ticks.push(y.domain()[1]);\n            // this often results in a larger space between the two topmost ticks\n            ticks[ticks.length-1] = y.domain()[1];\n            axis.tickValues(ticks);\n        }\n        return axis;\n    }\n\n    x(_?) {\n        if(arguments.length) {\n            this.$x = _;\n            return this;\n        }\n        return this.$x;\n    }\n\n    y(_?) {\n        if(arguments.length) {\n            this.$y = _;\n            return this;\n        }\n        return this.$y;\n    }\n\n    isValid():boolean {\n        return this.species && this.phenophase && this.year && this.metric;\n    }\n\n    plotted(): boolean {\n        // not keeping track of a flag but curves are plotted if they\n        // are valid and have data\n        return this.isValid() && this.data();\n    }\n\n    shouldRevisualize():boolean {\n        return this.isValid() && !this.data();\n    }\n\n    domain() {\n        var self = this,\n            data = self.data(),\n            extents;\n        if(data && self.metric) {\n            extents = d3.extent(data,function(d){\n                return d[self.metric.id];\n            });\n            if(extents[0] > 0) {\n                // typically data sets will contain 0 but really always want the\n                // lower extent of any y axis to be zero so make it so\n                extents[0] = 0;\n            } else if(extents[0] < 0) {\n                // this shouldn't happen but don't futz with the domain in this\n                // case or the graph would go wonky\n                console.warn('negative domain start for metric',extents,self.metric);\n            }\n            return extents;\n        }\n    }\n\n    draw(chart) {\n        let self = this,\n            data = self.data(),\n            datas = [[]],\n            x,y,i,d,dn,line,\n            r = 3;\n        chart.selectAll('path.curve.curve-'+self.id).remove();\n        chart.selectAll('circle.curve-point.curve-point-'+self.id).remove();\n        if(data && data.length) {\n            // detect any gaps in the data, break it into multiple curves/points\n            // to plot\n            for(i = 0; i < data.length; i++) {\n                d = data[i];\n                dn = (i+1) < data.length ? data[i+1] : undefined;\n                datas[datas.length-1].push(d);\n                if(dn && dn.start_doy !== (d.end_doy+1)) {\n                    datas.push([]); // there's a gap in the data, start another curve or point\n                }\n            }\n            x = self.x();\n            y = self.y();\n            let x_functor = (d) => x(d.start_doy+Math.round((d.end_doy-d.start_doy)/2)),\n                y_functor = (d) => y(d[self.metric.id]);\n            line = d3.line();\n            switch(self.interpolate) {\n                case INTERPOLATE.monotone:\nconsole.log('MONOTONE');\n                    line.curve(d3.curveMonotoneX);\n                    break;\n                case INTERPOLATE.stepAfter:\nconsole.log('STEP AFTER');\n                    line.curve(d3.curveStepAfter);\n                    break;\n                case INTERPOLATE.linear:\nconsole.log('LINEAR');\n                    line.curve(d3.curveLinear);\n                    break;\n            }\n            line.x(x_functor);\n            line.y(y_functor);\n            console.debug('ActivityCurve.draw',self.species,self.phenophase,self.year,self.metric,self.domain(),y.domain());\n            console.debug('draw.datas',datas);\n            datas.forEach(function(curve_data,i){\n                if(curve_data.length === 1 || self.dataPoints) {\n                    curve_data.forEach(function(d){\n                        chart.append('circle')\n                            .attr('class','curve-point curve-point-'+self.id)\n                            .attr('r',r)\n                            .attr('fill',self.color)\n                            .attr('cx',x_functor(d))\n                            .attr('cy',y_functor(d));\n                    });\n                }\n                if(curve_data.length > 1) {\n                    chart.append('path')\n                        .attr('class','curve curve-'+self.id)\n                        .attr('fill','none')\n                        .attr('stroke',self.color)\n                        .attr('stroke-linejoin','round')\n                        .attr('stroke-linecap','round')\n                        .attr('stroke-width',1.5)\n                        .attr('d',line(curve_data));\n                }\n            });\n        }\n    }\n}\nexport enum INTERPOLATE {\n    linear,\n    stepAfter,\n    monotone\n};\nconst DECIMAL = v => v.toFixed(2);\nconst IDENTITY = o => o;\nconst SPECIES_TITLE_PIPE = new SpeciesTitlePipe();\nconst SPECIES_TITLE = (item: Species,format?: string) => {\n    return SPECIES_TITLE_PIPE.transform(item,format);\n}\nconst DOY_PIPE = new DoyPipe();\nconst DOY = (date,ignoreLeapYear?:boolean): any => {\n    return DOY_PIPE.transform(date,ignoreLeapYear);\n}\n\nconst COMMON_METRICS = [{\n            id: 'num_yes_records',\n            sampleSize: 'status_records_sample_size',\n            label: 'Total Yes Records'\n        },{\n            id: 'proportion_yes_records',\n            sampleSize: 'status_records_sample_size',\n            label: 'Proportion Yes Records',\n            valueFormat: DECIMAL,\n            proportion: true\n        }];\nexport const ACTIVITY_CURVE_KINGDOM_METRICS = {\n            Plantae: COMMON_METRICS.concat([{\n                id: 'numindividuals_with_yes_record',\n                sampleSize: 'individuals_sample_size',\n                label: 'Total Individuals with Yes Records'\n            },{\n                id: 'proportion_individuals_with_yes_record',\n                sampleSize: 'individuals_sample_size',\n                label: 'Proportion Individuals with Yes Records',\n                valueFormat: DECIMAL,\n                proportion: true\n            }]),\n            Animalia: COMMON_METRICS.concat([{\n                id: 'numsites_with_yes_record',\n                sampleSize: 'sites_sample_size',\n                label: 'Total Sites with Yes Records'\n            },{\n                id: 'proportion_sites_with_yes_record',\n                sampleSize: 'sites_sample_size',\n                label: 'Proportion Sites with Yes Records',\n                valueFormat: DECIMAL,\n                proportion: true\n            },{\n                id: 'total_numanimals_in-phase',\n                sampleSize: 'in-phase_site_visits_sample_size',\n                label: 'Total Animals In Phase'\n            },\n            {\n                id: 'mean_numanimals_in-phase',\n                sampleSize: 'in-phase_per_hr_sites_sample_size',\n                label: 'Animals In Phase',\n                valueFormat: DECIMAL\n            },{\n                id: 'mean_numanimals_in-phase_per_hr',\n                sampleSize: 'in-phase_per_hr_sites_sample_size',\n                label: 'Animals In Phase per Hour',\n                valueFormat: DECIMAL\n            },{\n                id: 'mean_numanimals_in-phase_per_hr_per_acre',\n                sampleSize: 'phase_per_hr_per_acre_sites_sample_size',\n                label: 'Animals In Phase per Hour per Acre',\n                valueFormat: DECIMAL\n            }])\n        };\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curve.ts","import {Component,Input} from '@angular/core';\n\nimport {INTERPOLATE} from './activity-curve';\nimport {ActivityCurvesSelection,ActivityFrequency,ACTIVITY_FREQUENCIES} from './activity-curves-selection';\n\n@Component({\n    selector: 'activity-curves-control',\n    template: `\n    <div class=\"curve one\">\n        <label [ngStyle]=\"{'color': selection.curves[0].color}\">Curve 1</label>\n        <curve-selection-control [selection]=\"selection\" [curve]=\"selection.curves[0]\"></curve-selection-control>\n    </div>\n    <div class=\"curve two\">\n        <label [ngStyle]=\"{'color': selection.curves[1].color}\">Curve 2</label>\n        <curve-selection-control [selection]=\"selection\"  [curve]=\"selection.curves[1]\"></curve-selection-control>\n    </div>\n    <div class=\"curve-common\">\n        <mat-form-field class=\"date-interval\">\n            <mat-select placeholder=\"Date Interval\" [(ngModel)]=\"selection.frequency\">\n                <mat-option *ngFor=\"let f of frequencies\" [value]=\"f\">{{f.label}}</mat-option>\n            </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class=\"line-interpolateion\">\n            <mat-select placeholder=\"Line Interpolation\" [(ngModel)]=\"selection.interpolate\">\n                <mat-option *ngFor=\"let i of interpolates\" [value]=\"i.value\">{{i.label}}</mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    `,\n    styles:[`\n        .curve >label:after {\n            content: ':';\n            margin-right: 10px;\n        }\n        .date-interval {\n            width: 125px;\n        }\n        .line-interpolateion {\n            width: 150px;\n        }\n    `]\n})\nexport class ActivityCurvesControlComponent {\n    @Input()\n    selection: ActivityCurvesSelection;\n\n    frequencies:ActivityFrequency[] =  ACTIVITY_FREQUENCIES;\n    interpolates:any[] = [{\n            value: INTERPOLATE.linear,\n            label: 'Linear'\n        },{\n            value: INTERPOLATE.monotone,\n            label: 'Monotone',\n        },{\n            value: INTERPOLATE.stepAfter,\n            label: 'Step after'\n        }];\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-control.component.ts","import {Injectable,Inject} from '@angular/core';\nimport {Http} from '@angular/http';\nimport {DatePipe} from '@angular/common';\nimport {CacheService,NpnConfiguration,NPN_CONFIGURATION} from '../../common';\n\nimport {ActivityCurvesSelection} from './activity-curves-selection';\n\n@Injectable()\nexport class ActivityCurvesSelectionFactory {\n    constructor(protected http: Http,\n                protected cacheService: CacheService,\n                protected datePipe: DatePipe,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {}\n\n    newSelection(): ActivityCurvesSelection {\n        return new ActivityCurvesSelection(this.http,this.cacheService,this.datePipe,this.config);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-selection-factory.service.ts","import {Headers,Http,URLSearchParams} from '@angular/http';\nimport {DatePipe} from '@angular/common';\nimport 'rxjs/add/operator/toPromise';\n\nimport {CacheService,NpnConfiguration} from '../../common';\n\nimport {INTERPOLATE,ActivityCurve} from './activity-curve';\nimport {StationAwareVisSelection,selectionProperty} from '../vis-selection';\n\nexport class ActivityFrequency {\n    value:string|number;\n    label:string;\n}\nexport const ACTIVITY_FREQUENCY_MONTHLY:ActivityFrequency = {\n    value: 'months',\n    label: 'Monthly'\n};\nexport const ACTIVITY_FREQUENCY_BIWEEKLY:ActivityFrequency = {\n    value: 14,\n    label: 'Bi-weekly'\n};\nexport const ACTIVITY_FREQUENCY_WEEKLY:ActivityFrequency = {\n    value: 7,\n    label: 'Weekly'\n};\nexport const ACTIVITY_FREQUENCIES:ActivityFrequency[] = [\n    ACTIVITY_FREQUENCY_MONTHLY,\n    ACTIVITY_FREQUENCY_BIWEEKLY,\n    ACTIVITY_FREQUENCY_WEEKLY\n];\n\nexport class ActivityCurvesSelection extends StationAwareVisSelection {\n    private headers = new Headers({'Content-Type':'application/x-www-form-urlencoded'});\n    @selectionProperty()\n    private _interpolate: INTERPOLATE = INTERPOLATE.monotone;\n    @selectionProperty()\n    private _dataPoints:boolean = true;\n    @selectionProperty()\n    private _frequency:ActivityFrequency = ACTIVITY_FREQUENCIES[0];\n    @selectionProperty({\n        ser: d => d.external,\n        des: d => {\n            let ac = new ActivityCurve();\n            ac.external = d;\n            return ac;\n        }\n    })\n    private _curves:ActivityCurve[];\n\n    constructor(protected http: Http,\n                protected cacheService: CacheService,\n                protected datePipe: DatePipe,\n                protected config: NpnConfiguration) {\n        super();\n        this.curves = [{color:'#0000ff',orient:'left'},{color:'orange',orient:'right'}].map((o,i) => {\n            let c = new ActivityCurve();\n            c.id = i;\n            c.color = o.color;\n            c.orient = o.orient;\n            return c;\n        });\n    }\n\n    isValid(): boolean {\n        return this.curves[0].isValid();\n    }\n\n    private updateCheck(requiresUpdate?:boolean) {\n        let anyValid = this.curves[0].isValid() || this.curves[1].isValid(),\n            anyPlotted = this.curves[0].plotted() || this.curves[1].plotted();\n        if(requiresUpdate) {\n            if(anyValid) {\n                this.update();\n            }\n        } else {\n            if(anyValid && anyPlotted) {\n                this.redraw();\n            } else if (anyValid) {\n                this.update();\n            }\n        }\n    }\n\n    set frequency(f:ActivityFrequency) {\n        this._frequency = f;\n        // any change in frequency invalidates any data held by curves\n        (this._curves||[]).forEach(c => c.data(null));\n        this.updateCheck(true);\n    }\n\n    get frequency():ActivityFrequency {\n        return this._frequency;\n    }\n\n    set interpolate(i:INTERPOLATE) {\n        this._interpolate = i;\n        (this._curves||[]).forEach(c => c.interpolate = i);\n        this.updateCheck();\n    }\n\n    get interpolate():INTERPOLATE {\n        return this._interpolate;\n    }\n\n    set dataPoints(dp:boolean) {\n        this._dataPoints = dp;\n        (this._curves||[]).forEach(c => c.dataPoints = dp);\n    }\n\n    set curves(cs:ActivityCurve[]) {\n        this._curves = cs;\n        cs.forEach(c => {\n            c.selection = this;\n            c.interpolate = this._interpolate;\n            c.dataPoints = this._dataPoints;\n        });\n    }\n\n    get curves():ActivityCurve[] {\n        return this._curves;\n    }\n\n    private endDate(year) {\n        var now = new Date();\n        if(year === now.getFullYear()) {\n            return this.datePipe.transform(now,'yyyy-MM-dd');\n        }\n        return year+'-12-31';\n    }\n\n    loadCurveData(): Promise<any> {\n        return new Promise(resolve => {\n            this.working = true;\n            let promises:Promise<any[]>[] = this.curves\n                .filter(c => c.data(null).isValid())\n                .map(c => {\n                    return new Promise<any[]>(loaded => {\n                        let params = new URLSearchParams();\n                        params.set('request_src','npn-vis-activity-curves');\n                        params.set('start_date',`${c.year}-01-01`);\n                        params.set('end_date',this.endDate(c.year));\n                        params.set('frequency',`${this.frequency.value}`);\n                        params.set('species_id[0]',`${c.species.species_id}`);\n                        params.set('phenophase_id[0]',`${c.phenophase.phenophase_id}`);\n                        this.addNetworkParams(params);\n                        let url = `${this.config.apiRoot}/npn_portal/observations/getMagnitudeData.json`,\n                            cacheKey = {\n                                u: url,\n                                params: params.toString()\n                            },\n                            data:any[] = this.cacheService.get(cacheKey);\n                        if(data) {\n                            loaded(c.data(data));\n                        } else {\n                            this.http.post(url,params.toString(),{headers: this.headers})\n                                .toPromise()\n                                .then(response => {\n                                    let arr = response.json() as any[]\n                                    this.cacheService.set(cacheKey,arr);\n                                    loaded(c.data(arr));\n                                })\n                                .catch(this.handleError);\n                        }\n                    });\n                });\n            Promise.all(promises).then(() => {\n                this.working = false;\n                resolve();\n            });\n        });\n    }\n\n    protected handleError(error: any): void {\n        console.error('ERROR',error);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves-selection.ts","import {Component, Input, ElementRef} from '@angular/core';\n\nimport {Window,LegendDoyPipe} from '../../common';\nimport {VisualizationMargins} from '../visualization-base.component';\nimport {ONE_DAY_MILLIS} from '../vis-selection';\nimport {SvgVisualizationBaseComponent,DEFAULT_MARGINS,FONT_SIZE,FONT_SIZE_PX} from '../svg-visualization-base.component';\n\nimport {ActivityCurvesSelection} from './activity-curves-selection';\n\nimport {Axis,axisBottom,axisLeft} from 'd3-axis';\nimport {Selection} from 'd3-selection';\nimport {ScaleLinear,scaleLinear} from 'd3-scale';\nimport * as d3 from 'd3';\n\nconst ROOT_DATE = new Date(2010,0);\nconst D3_DATE_FMT = d3.timeFormat('%m/%d');\nconst DATE_FMT = (d) => {\n    let time = ((d-1)*ONE_DAY_MILLIS)+ROOT_DATE.getTime(),\n        date = new Date(time);\n    return D3_DATE_FMT(date);\n};\nconst PAD_DOMAIN = (d,metric) => {\n    if(d && d.length === 2) {\n        d = [d[0],(d[1]*1.05)];\n        if(metric && metric.proportion && d[1] > 1) {\n            d[1] = 1.0; // don't allow proportions to overflow for clarity.\n        }\n    }\n    return d;\n};\n\nconst DOY_INTERVAL_TICK = (interval) => {\n    var doy = 1,\n        ticks = [];\n    while(doy <= 365) {\n        ticks.push(doy);\n        doy += interval;\n    }\n    return ticks;\n};\nconst X_TICK_CFG = {\n    7: {\n        rotate: 45,\n        values: DOY_INTERVAL_TICK(14)\n    },\n    14: {\n        rotate: 45,\n        values: DOY_INTERVAL_TICK(28)\n    },\n    months: {\n        values: [1,32,60,91,121,152,182,213,244,274,305,335]\n    }\n};\n\n@Component({\n    selector: 'activity-curves',\n    templateUrl: '../svg-visualization-base.component.html',\n    styleUrls: ['../svg-visualization-base.component.scss']\n})\nexport class ActivityCurvesComponent extends SvgVisualizationBaseComponent {\n    @Input() selection: ActivityCurvesSelection;\n\n    x: ScaleLinear<number,number>;\n    xAxis: Axis<number>;\n\n    filename:string = 'activity-curves.png';\n    margins: VisualizationMargins = {top: 80,left: 80,right: 80,bottom: 80};\n\n    constructor(protected window: Window, protected rootElement: ElementRef,private legendDoyPipe: LegendDoyPipe) {\n        super(window,rootElement);\n    }\n\n    private usingCommonMetric() {\n        let selection = this.selection;\n        // there are always two curves in the selection, the question is whether they are\n        // valid and share a metric\n        if((selection.curves[0].isValid() && !selection.curves[1].isValid()) ||\n            (selection.curves[0].isValid() && selection.curves[1].isValid() && selection.curves[0].metricId() === selection.curves[1].metricId())) {\n            return selection.curves[0].metric;\n        }\n    }\n\n    private newY() {\n        let sizing = this.sizing;\n        return scaleLinear().range([sizing.height,0]).domain([0,100]);\n    }\n\n    private updateLegend(): void {\n        let chart = this.chart;\n        chart.select('.legend').remove();\n        let sizing = this.sizing,\n            selection = this.selection,\n            commonMetric = this.usingCommonMetric(),\n            legend = chart.append('g')\n              .attr('class','legend')\n              // the 150 below was picked just based on the site of the 'Activity Curves' title\n              .attr('transform','translate(150,-'+(sizing.margin.top-10)+')') // relative to the chart, not the svg\n              .style('font-size','1em'),\n            /* legend labels can differ greatly in length, don't try to put them\n               inside a box that will be impossible to size correctly\n            rect = legend.append('rect')\n                .style('fill','white')\n                .style('stroke','black')\n                .style('opacity','0.8')\n                .attr('width',100)\n                .attr('height',55),*/\n            r = 5, vpad = 4;\n            selection.curves.reduce((cnt,c) => {\n                    var row;\n                    if(c.plotted()) {\n                        row = legend.append('g')\n                            .attr('class','legend-item curve-'+c.id)\n                            .attr('transform','translate(10,'+(((cnt+1)*(this.baseFontSize() as number))+(cnt*vpad))+')');\n                        row.append('circle')\n                            .attr('r',r)\n                            .attr('fill',c.color);\n                        row.append('text')\n                            .style('font-size', this.baseFontSize(true))\n                            .attr('x',(2*r))\n                            .attr('y',(r/2))\n                            .text(c.legendLabel(!commonMetric));\n                        cnt++;\n                    }\n                    return cnt;\n                },0);\n    }\n\n    private hover():void {\n        let svg = this.svg,\n            selection = this.selection,\n            sizing = this.sizing,\n            self = this,\n            x = this.x;\n        let hover = svg.append('g')\n            .attr('transform', 'translate(' + sizing.margin.left + ',' + sizing.margin.top + ')')\n            .style('display','none');\n        let hoverLine = hover.append('line')\n                .attr('class','focus')\n                .attr('fill','none')\n                .attr('stroke','green')\n                .attr('stroke-width',1)\n                .attr('x1',0)\n                .attr('y1',0)\n                .attr('x2',0)\n                .attr('y2',sizing.height),\n            hoverDoy = hover.append('text')\n                .attr('class','focus-doy')\n                .attr('y',10)\n                .attr('x',0)\n                .text('hover doy');\n        let focusOff = () => {\n                selection.curves.forEach(function(c) { delete c.doyFocus; });\n                hover.style('display','none');\n                this.updateLegend();\n            },\n            focusOn = () => {\n                // only turn on if something has been plotted\n                if(selection.curves.reduce(function(plotted,c){\n                        return plotted||c.plotted();\n                    },false)) {\n                    hover.style('display',null);\n                }\n            };\n\n        // left as function due to d3's use of this\n        function updateFocus() {\n            let coords = d3.mouse(this),\n                xCoord = coords[0],\n                yCoord = coords[1],\n                doy = Math.round(x.invert(xCoord)),\n                dataPoint = selection.curves.reduce(function(dp,curve){\n                    if(!dp && curve.plotted()) {\n                        dp = curve.data().reduce(function(found,point){\n                            return found||(doy >= point.start_doy && doy <= point.end_doy ? point : undefined);\n                        },undefined);\n                    }\n                    return dp;\n                },undefined) as any; // TS thinks dataPoint is an \"ActivityCurve\"\n            hoverLine.attr('transform','translate('+xCoord+')');\n            hoverDoy\n                .style('text-anchor',doy < 324 ? 'start' : 'end')\n                .attr('x',xCoord+(10*(doy < 324 ? 1 : -1)))\n                .text(dataPoint ?\n                    self.legendDoyPipe.transform(dataPoint.start_doy)+' - '+self.legendDoyPipe.transform(dataPoint.end_doy) :\n                    self.legendDoyPipe.transform(doy));\n            selection.curves.forEach(function(c) { c.doyFocus = doy; });\n            self.updateLegend();\n        }\n        svg.append('rect')\n            .attr('class','overlay')\n            .attr('transform', 'translate(' + this.margins.left + ',' + this.margins.top + ')')\n            .style('fill','none')\n            .style('pointer-events','all')\n            .attr('x',0)\n            .attr('y',0)\n            .attr('width',sizing.width)\n            .attr('height',sizing.height)\n            .on('mouseover',focusOn)\n            .on('mouseout',focusOff)\n            .on('mousemove',updateFocus);\n    }\n\n    protected reset(): void {\n        super.reset();\n        let chart = this.chart,\n            sizing = this.sizing,\n            selection = this.selection;\n\n        this.x = scaleLinear().range([0,sizing.width]).domain([1,365]);\n        this.xAxis = axisBottom<number>(this.x).tickFormat(DATE_FMT);\n\n        selection.curves.forEach(c => c.x(this.x).y(this.newY()));\n\n        chart.append('g')\n             .attr('class','chart-title')\n             .append('text')\n             .attr('y', '0')\n             .attr('dy','-3em')\n             .attr('x', '0')\n             .style('text-anchor','start')\n             .style('font-size','18px')\n             .text('Activity Curves');\n        this.commonUpdates();\n    }\n\n    protected update(): void {\n        this.reset();\n        let selection = this.selection;\n        selection.loadCurveData().then(() => {\n            this.redraw();\n        });\n    }\n\n    protected redrawSvg(): void {\n        let chart = this.chart,\n            sizing = this.sizing,\n            selection = this.selection,\n            commonMetric = this.usingCommonMetric();\n\n        chart.selectAll('g .axis').remove();\n\n        if(commonMetric) {\n            // both use the same y-axis domain needs to include all valid curve's data\n            let domain = d3.extent(selection.curves.reduce(function(arr,c){\n                    if(c.isValid()) {\n                        arr = arr.concat(c.domain());\n                    }\n                    return arr;\n                },[])),\n                y = this.newY().domain(PAD_DOMAIN(domain,commonMetric));\n            console.debug('ActivityCurves.common domain',domain);\n            selection.curves.forEach(function(c){\n                c.y(y);\n            });\n        } else {\n            selection.curves.forEach(c => {\n                // re-initialize y in case a previous plot re-used the same y\n                // each has an independent domain\n                if(c.isValid()) {\n                    c.y(this.newY().domain(PAD_DOMAIN(c.domain(),c.metric)));\n                }\n            });\n        }\n\n        chart.append('g')\n            .attr('class', 'y axis left')\n            .call(selection.curves[0].axis())\n            .append('text')\n            .attr('class','axis-title')\n            .attr('transform', 'rotate(-90)')\n            .attr('y', '0')\n            .attr('dy','-4em')\n            .attr('x',-1*(sizing.height/2)) // looks odd but to move in the Y we need to change X because of transform\n            .attr('fill','#000')\n            .style('text-anchor', 'middle')\n            .text(selection.curves[0].axisLabel());\n\n        if(!commonMetric && selection.curves[1].isValid()) {\n            selection.curves[1].orient = 'right';\n            chart.append('g')\n                .attr('class', 'y axis right')\n                .attr('transform','translate('+sizing.width+')')\n                .call(selection.curves[1].axis())\n                .append('text')\n                .attr('class','axis-title')\n                .attr('transform', 'rotate(-90)')\n                .attr('y', '0')\n                .attr('dy','4em')\n                .attr('x',-1*(sizing.height/2)) // looks odd but to move in the Y we need to change X because of transform\n                .style('text-anchor', 'middle')\n                .text(selection.curves[1].axisLabel());\n        }\n\n        let xTickConfig = X_TICK_CFG[selection.frequency.value];\n        this.xAxis.tickValues(xTickConfig.values);\n        chart.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + sizing.height + ')')\n            .call(this.xAxis)\n            .append('text')\n            .attr('y','0')\n            .attr('dy','3em')\n            .attr('x',(sizing.width/2))\n            .attr('class','axis-label')\n            .style('text-anchor', 'middle')\n            .text('Date');\n        if(xTickConfig.rotate) {\n            chart.selectAll('g.x.axis g.tick text')\n                .style('text-anchor','end')\n                .attr('transform','rotate(-'+xTickConfig.rotate+')');\n            chart.selectAll('g.x.axis .axis-label')\n                .attr('dy','4em');\n        }\n\n        // if not using a common metric (two y-axes)\n        // then color the ticks/labels in alignment with their\n        // corresponding curve for clarity.\n        if(!commonMetric) {\n            chart.selectAll('g.y.axis.left g.tick text')\n                .style('fill',selection.curves[0].color);\n            chart.selectAll('g.y.axis.left text.axis-title')\n                .style('fill',selection.curves[0].color);\n            chart.selectAll('g.y.axis.right g.tick text')\n                .style('fill',selection.curves[1].color);\n            chart.selectAll('g.y.axis.right text.axis-title')\n                .style('fill',selection.curves[1].color);\n        }\n        this.commonUpdates();\n\n        // draw the curves\n        selection.curves.forEach(function(c) {\n            c.draw(chart);\n        });\n\n        this.updateLegend();\n        this.hover();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/activity-curves.component.ts","import {Component,Input,Output,EventEmitter} from '@angular/core';\n\nimport {Species} from '../../common';\nimport {ActivityCurve,ACTIVITY_CURVE_KINGDOM_METRICS} from './activity-curve';\nimport {ActivityCurvesSelection} from './activity-curves-selection';\n\n@Component({\n    selector: 'curve-selection-control',\n    template: `\n    <species-phenophase-input [(species)]=\"curve.species\" [(phenophase)]=\"curve.phenophase\" [selection]=\"selection\">\n    </species-phenophase-input>\n\n    <mat-form-field class=\"year-input\">\n        <mat-select placeholder=\"Year\" [(ngModel)]=\"curve.year\">\n            <mat-option *ngFor=\"let y of validYears\" [value]=\"y\">{{y}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n\n    <mat-form-field class=\"metric-input\">\n        <mat-select placeholder=\"Metric\" [(ngModel)]=\"curve.metric\" [disabled]=\"!curve.validMetrics.length\">\n            <mat-option *ngFor=\"let m of curve.validMetrics\" [value]=\"m\">{{m.label}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    `,\n    styles: [`\n        .metric-input {\n            width: 310px;\n        }\n    `]\n})\nexport class CurveControlComponent {\n    @Input()\n    selection: ActivityCurvesSelection;\n    @Input()\n    curve: ActivityCurve;\n\n    validYears:number[] = (function() {\n        let thisYear = (new Date()).getFullYear(),\n            years: number[] = [],\n            c = 2010;\n        while(c < thisYear) {\n            years.push(c++);\n        }\n        return years;\n    })();\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/curve-control.component.ts","export * from './activity-curve';\nexport * from './activity-curves-selection';\nexport * from './activity-curves-selection-factory.service';\nexport * from './activity-curves.component';\nexport * from './activity-curves-control.component';\nexport * from './curve-control.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/activity-curves/index.ts","import {Component,Input,OnInit} from '@angular/core';\n\nimport {CalendarSelection} from './calendar-selection';\n\nconst THIS_YEAR = (new Date()).getFullYear();\nconst VALID_YEARS = (function(){\n    let max = THIS_YEAR+1,\n        current = 1900,\n        years:number[] = [];\n    while(current < max) {\n        years.push(current++);\n    }\n    return years;\n})();\n\n@Component({\n    selector: 'calendar-control',\n    template: `\n    <div>\n        <div class=\"year-input-wrapper\" *ngFor=\"let plotYear of selection.years;index as idx\">\n            <mat-form-field class=\"year-input\">\n                <mat-select placeholder=\"Year {{idx+1}}\" [(ngModel)]=\"selection.years[idx]\" (change)=\"updateChange()\" id=\"year_{{idx}}\">\n                    <mat-option *ngFor=\"let y of selectableYears(selection.years[idx])\" [value]=\"y\">{{y}}</mat-option>\n                </mat-select>\n            </mat-form-field>\n            <button *ngIf=\"idx > 0\" mat-button class=\"remove-year\" (click)=\"removeYear(idx)\">Remove</button>\n            <button *ngIf=\"selection.years.length < 6 && idx === (selection.years.length-1)\" mat-button class=\"add-year\" (click)=\"addYear()\">Add</button>\n        </div>\n    </div>\n\n    <div class=\"phenophase-input-wrapper\" *ngFor=\"let spi of selection.plots; index as idx\">\n        <species-phenophase-input\n            [(species)]=\"spi.species\" [(phenophase)]=\"spi.phenophase\" [(color)]=\"spi.color\"\n            [selection]=\"selection\"\n            [gatherColor]=\"true\"\n            (onSpeciesChange)=\"updateChange()\"\n            (onPhenophaseChange)=\"updateChange()\"\n            (onColorChange)=\"redrawChange($event)\"></species-phenophase-input>\n        <button *ngIf=\"idx > 0\" mat-button class=\"remove-plot\" (click)=\"removePlot(idx)\">Remove</button>\n        <button *ngIf=\"idx === (selection.plots.length-1)\" mat-button class=\"add-plot\" [disabled]=\"!plotsValid()\" (click)=\"addPlot()\">Add</button>\n    </div>\n\n    <mat-checkbox [(ngModel)]=\"selection.negative\" (change)=\"redrawChange()\">Display negative data</mat-checkbox>\n\n    <label for=\"label-size-input\">Label size\n        <mat-slider id=\"label-size-input\" min=\"0\" max=\"10\" step=\"0.25\" [(ngModel)]=\"selection.fontSizeDelta\" (change)=\"redrawChange()\" [disabled]=\"!selection.isValid()\"></mat-slider>\n    </label>\n\n    <label for=\"label-position-input\">Label position\n        <mat-slider id=\"label-position-input\" min=\"0\" max=\"100\" step=\"1\" [(ngModel)]=\"selection.labelOffset\" (change)=\"redrawChange()\" [disabled]=\"!selection.isValid()\"></mat-slider>\n    </label>\n\n    <label for=\"label-band-size-input\">Band size\n        <mat-slider invert id=\"label-band-size-input\" min=\"0\" max=\"0.95\" step=\"0.05\" [(ngModel)]=\"selection.bandPadding\" (change)=\"redrawChange()\" [disabled]=\"!selection.isValid()\"></mat-slider>\n    </label>\n    `,\n    styles:[`\n        .year-input-wrapper {\n            display: inline-block;\n            margin-right: 15px;\n        }\n        .phenophase-input-wrapper {\n            display: block;\n            margin-top: 15px;\n        }\n        label[for=\"label-size-input\"] {\n            margin-left: 15px;\n        }\n    `]\n})\nexport class CalendarControlComponent implements OnInit {\n    @Input()\n    selection: CalendarSelection;\n\n    maxYears = 5;\n    updateSent:boolean = false;\n\n    selectableYears(y:number) {\n        if(y) {\n            // validYears including y but excluding any others in the selection\n            return VALID_YEARS.filter(yr => {\n                return yr === y || this.selection.years.indexOf(yr) === -1;\n            });\n        }\n        return VALID_YEARS;\n    }\n\n    ngOnInit() {\n        if(this.selection.years.length === 0) {\n            this.addYear();\n        }\n        if(this.selection.plots.length === 0) {\n            this.addPlot();\n        }\n    }\n\n    updateChange() {\n        if(this.selection.isValid()) {\n            this.selection.update();\n            this.updateSent = true;\n        }\n    }\n\n    redrawChange(change) {\n        if(this.selection.isValid()) {\n            if(change && !change.oldValue && change.newValue) { // e.g. no color to a color means a plot that wasn't valid is now potentially valid.\n                this.updateChange();\n            } else {\n                if(this.updateSent) {\n                    this.selection.redraw();\n                } else {\n                    this.updateChange();\n                }\n            }\n        }\n    }\n\n    addPlot() {\n        this.selection.plots.push({});\n    }\n\n    removePlot(index:number) {\n        this.selection.plots.splice(index,1);\n        this.updateChange();\n    }\n\n    addYear() {\n        let y = THIS_YEAR;\n        while(this.selection.years.indexOf(y) !== -1) {\n            y--;\n        }\n        this.selection.years.push(y);\n        this.updateChange();\n    }\n\n    removeYear(index:number) {\n        this.selection.years.splice(index,1);\n        this.updateChange();\n    }\n\n    plotsValid() {\n        return this.selection.plots.length === this.selection.validPlots.length;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-control.component.ts","import {Injectable,Inject} from '@angular/core';\nimport {Http} from '@angular/http';\nimport {CacheService,SpeciesTitlePipe,NpnConfiguration,NPN_CONFIGURATION} from '../../common';\n\nimport {CalendarSelection} from './calendar-selection';\n\n@Injectable()\nexport class CalendarSelectionFactory {\n    requestSrc: string = 'npn-vis-calendar';\n\n    constructor(protected http: Http,\n                protected cacheService: CacheService,\n                protected speciesTitle:SpeciesTitlePipe,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {}\n\n    newSelection(): CalendarSelection {\n        return new CalendarSelection(this.http,this.cacheService,this.speciesTitle,this.config);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-selection-factory.service.ts","import {ObservationDateVisSelection} from '../observation-date-vis-selection';\n\nimport {selectionProperty} from '../vis-selection';\nimport {FONT_SIZE} from '../visualization-base.component';\n\nexport class CalendarSelection extends ObservationDateVisSelection {\n    @selectionProperty()\n    labelOffset:number = 4;\n    @selectionProperty()\n    bandPadding:number = 0.5;\n    @selectionProperty()\n    fontSizeDelta:number = 0;\n    @selectionProperty()\n    monthFormat?:string;\n}\n\nexport {ObservationDataDataPoint,ObservationDateData} from '../observation-date-vis-selection';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar-selection.ts","import {Component,Input} from '@angular/core';\n\nimport {ONE_DAY_MILLIS} from '../vis-selection';\nimport {CalendarSelection,ObservationDataDataPoint,ObservationDateData} from './calendar-selection';\nimport {VisualizationMargins} from '../visualization-base.component';\nimport {SvgVisualizationBaseComponent,DEFAULT_MARGINS} from '../svg-visualization-base.component';\n\nimport {Axis,axisBottom,axisRight} from 'd3-axis';\nimport {Selection} from 'd3-selection';\nimport {ScaleBand,scaleBand} from 'd3-scale';\nimport * as d3 from 'd3';\n\n@Component({\n    selector: 'calendar',\n    templateUrl: '../svg-visualization-base.component.html',\n    styleUrls: ['../svg-visualization-base.component.scss']\n})\nexport class CalendarComponent extends SvgVisualizationBaseComponent {\n    @Input() selection: CalendarSelection;\n\n    filename:string = 'calendar.png';\n    margins: VisualizationMargins = {top: 20, right: 35, bottom: 45, left: 35};\n\n    x: ScaleBand<number>;\n    xAxis: Axis<number>;\n\n    y: ScaleBand<number>;\n    yAxis: Axis<number>\n\n    private processed:ObservationDateData;\n    private data:any[];\n\n    // the doy of the first of each month doesn't change from year to year just what\n    // day of the week days fall on so what year is used to calculate them is irrelevant\n    xTickValues(): number[] {\n        var firsts = [1],i,count = 1;\n        for(i = 1; i < 12; i++) {\n            var date = new Date(1900,i);\n            // back up 1 day\n            date.setTime(date.getTime()-ONE_DAY_MILLIS);\n            count += date.getDate();\n            firsts.push(count);\n        }\n        return this.x.domain().filter(function(d){\n            return firsts.indexOf(d) !== -1;\n        });\n    }\n\n    protected commonUpdates(): void {\n        // forces all text to 14 px\n        super.commonUpdates();\n        // labels are customizable in size\n        let bw = this.y.bandwidth();\n        let dy = -1*((bw/2)+this.selection.labelOffset),\n            labelFontSize = (this.baseFontSize() as number)+this.selection.fontSizeDelta;\n        this.chart.selectAll('.y.axis text')\n            .attr('x', 0)\n            .attr('dy', dy)\n            .attr('style', `text-anchor: start; font-size: ${labelFontSize}px;`);\n    }\n\n    private getMonthFormat(): string {\n        if(this.selection.monthFormat) {\n            return this.selection.monthFormat;\n        }\n        if(this.sizing && this.sizing.width < 800) {\n            return '%b';\n        }\n        return '%B';\n    }\n\n    protected reset(): void {\n        super.reset();\n        this.processed = undefined;\n        let chart = this.chart,\n            sizing = this.sizing,\n            d3_month_fmt = d3.timeFormat(this.getMonthFormat());\n\n        this.x = scaleBand<number>().range([0,sizing.width]).domain(d3.range(1,366))\n            .paddingInner(-0.1).paddingOuter(0.5);\n        this.xAxis = axisBottom<number>(this.x).tickValues(this.xTickValues())\n            .tickFormat((i) => {\n                let date = new Date(1900,0);\n                date.setTime(date.getTime()+(ONE_DAY_MILLIS*i));\n                return d3_month_fmt(date);\n            });\n        this.y = scaleBand<number>().range([sizing.height,0]).domain(d3.range(0,6)).paddingOuter(0.5);\n        this.yAxis = axisRight<number>(this.y).tickSize(sizing.width).tickFormat(i => {\n            return this.processed && this.processed.data && i < this.processed.labels.length ?\n                this.processed.labels[i] : '';\n        });\n\n        chart.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + sizing.height + ')')\n            .call(this.xAxis);\n\n        chart.append('g')\n            .attr('class', 'y axis')\n            .call(this.yAxis);\n        chart.selectAll('g .y.axis line')\n            .style('stroke','#777')\n            .style('stroke-dasharray','2,2');\n\n        // hide y axis ticks and domain\n        //chart.selectAll('g .y.axis .tick line').style('display','none');\n        chart.selectAll('g .y.axis .domain').style('display','none');\n\n        this.commonUpdates();\n    }\n\n    protected update(): void {\n        this.reset();\n        this.selection.getData().then(data => {\n            this.data = data;\n            this.redraw();\n        })\n        .catch(this.handleError);\n    }\n\n    protected redrawSvg(): void {\n        if(!this.data) {\n            return;\n        }\n        let sizing = this.sizing,\n            processed = this.processed = this.selection.postProcessData(this.data);\n\n        // update y axis\n        this.y.paddingInner(this.selection.bandPadding);\n        if(processed && processed.labels) {\n            this.y.domain(d3.range(0,processed.labels.length));\n        }\n        this.yAxis.scale(this.y);\n        this.chart.selectAll('g .y.axis')\n            .call(this.yAxis);\n\n        this.chart.selectAll('.doy').remove();\n        if(processed && processed.data) {\n            let doys = this.chart.selectAll('.doy').data(processed.data, d => {\n                let point = d as ObservationDataDataPoint; // why is this necessary\n                return`${point.y}-${point.x}-${point.color}`;\n            });\n            doys = doys.enter().insert('line',':first-child').attr('class','doy');\n            let dx = Math.ceil(this.x.bandwidth()/2),\n                dy = this.y.bandwidth()/2;\n            doys.attr('x1', d => this.x(d.x)-dx)\n                .attr('y1', (d,i) => this.y(d.y)+dy)\n                .attr('x2', d => this.x(d.x)+dx)\n                .attr('y2', (d,i) => this.y(d.y)+dy)\n                .attr('doy-point',d => `(${d.x},${d.y})`)\n                .attr('stroke', d => d.color)\n                .attr('stroke-width', `${this.y.bandwidth()}`)\n                .append('title')\n                .text(function(d) {\n                    return d.x; // x is the doy\n                });\n        }\n        this.commonUpdates();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/calendar.component.ts","export {CalendarSelection} from './calendar-selection';\nexport {CalendarSelectionFactory} from './calendar-selection-factory.service';\nexport {CalendarComponent} from './calendar.component';\nexport {CalendarControlComponent} from './calendar-control.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/calendar/index.ts","import {Component, Input, OnInit} from '@angular/core';\nimport {ClippedWmsMapSelection} from './clipped-wms-map-selection';\n\n@Component({\n    selector: 'clipped-wms-map-control',\n    template: `\n    <mat-select class=\"map-service-input\" placeholder=\"Map\" [(ngModel)]=\"selection.service\" (change)=\"serviceChange()\">\n        <mat-option *ngFor=\"let s of validServices\" [value]=\"s.value\">{{s.label}}</mat-option>\n    </mat-select>\n    <mat-select class=\"map-layer-input\" placeholder=\"Layer\" [(ngModel)]=\"selection.layer\" (change)=\"layerChange()\">\n        <mat-option *ngFor=\"let l of validLayers\" [value]=\"l\">{{l.label}}</mat-option>\n    </mat-select>\n    `,\n    styles:[`\n        .map-service-input,\n        .map-layer-input {\n            width: 200px;\n        }\n    `]\n})\nexport class ClippedWmsMapControl implements OnInit {\n    @Input()\n    selection: ClippedWmsMapSelection;\n\n    validServices:any[];\n    validLayers:any[];\n\n    serviceChange() {\n        this.validLayers = this.selection.validLayers;\n        let selection = this.selection,\n            layers = this.selection.validLayers;\n        selection.layer = layers.length ? layers[0] : undefined;\n        this.layerChange();\n    }\n\n    layerChange() {\n        let selection = this.selection;\n        if(selection.isValid()) {\n            selection.update();\n        } else {\n            selection.reset();\n        }\n    }\n\n    ngOnInit() {\n        this.validServices = this.selection.validServices;\n        this.serviceChange();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-control.component.ts","import {Injectable,Inject} from '@angular/core';\n\nimport {DatePipe} from '@angular/common';\nimport {Http} from '@angular/http';\nimport {CacheService,NpnConfiguration,NPN_CONFIGURATION} from '../../common';\nimport {WmsMapLegendService} from '../../gridded';\n\nimport {ClippedWmsMapSelection} from './clipped-wms-map-selection';\n\n@Injectable()\nexport class ClippedWmsMapSelectionFactory {\n    constructor(protected http: Http,\n                protected cacheService: CacheService,\n                protected datePipe: DatePipe,\n                protected mapLegendService:WmsMapLegendService,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {}\n\n    newSelection(): ClippedWmsMapSelection {\n        return new ClippedWmsMapSelection(this.http,this.cacheService,this.datePipe,this.mapLegendService,this.config);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-selection-factory.ts","import {NetworkAwareVisSelection,selectionProperty,ONE_DAY_MILLIS} from '../vis-selection';\nimport{CacheService,NpnConfiguration} from '../../common';\nimport {WmsMapLegend,WmsMapLegendService,WmsMapSupportsOpacity} from '../../gridded';\n\nimport {DatePipe} from '@angular/common';\nimport {Http} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport {} from '@types/googlemaps';\n\nconst SIX_LAYERS:ClippedLayerDef[] = [{\n    label: 'Current Si-x leaf index',\n    layerName: 'si-x:average_leaf_ncep'\n},{\n    label: '6-day forecast',\n    layerName: 'si-x:average_leaf_ncep',\n    forecast: true\n}/* TODO not yet supported,{\n    label: 'Anomaly',\n    layerName: 'si-x:average_leaf_ncep',\n    forecast: false\n}*/];\nconst AGDD_LAYERS:ClippedLayerDef[] = [\n    // TODO add when agdd support arives\n];\n\nexport class ClippedWmsMapSelection extends NetworkAwareVisSelection {\n    @selectionProperty() // may need to use get/set pattern\n    service:string = 'si-x'; // si-x || agdd\n    @selectionProperty()\n    layer:ClippedLayerDef = SIX_LAYERS[0];\n    @selectionProperty()\n    fwsBoundary:string;\n\n    legend:WmsMapLegend;\n    overlay:ImageOverlay;\n    data:WmsMapSelectionData;\n    private features:any[];\n\n    constructor(protected http:Http,\n                protected cache:CacheService,\n                protected datePipe:DatePipe,\n                protected mapLegendService:WmsMapLegendService,\n                protected config:NpnConfiguration) {\n        super();\n    }\n\n    isValid():boolean {\n        return (this.service === 'si-x' || this.service === 'agdd') && !!this.layer && !!this.fwsBoundary;\n    }\n\n    get validServices(): any[] {\n        return [{\n            value: 'si-x',\n            label: 'Spring index'\n        },{\n            value: 'agdd',\n            label: 'Accumulated growing degree days'\n        }];\n    }\n    get validLayers(): any[] {\n        switch(this.service) {\n            case 'si-x':\n                return SIX_LAYERS;\n            case 'agdd':\n                return AGDD_LAYERS;\n        }\n        return [];\n    }\n\n    get apiDate(): string {\n        // always \"today\" or 6 days in the future for forecast\n        let d = new Date();\n        if(this.layer && this.layer.forecast) {\n            d.setTime(d.getTime()+(6*ONE_DAY_MILLIS));\n        }\n        return this.datePipe.transform(d,'y-MM-dd');\n    }\n\n    private cachedGet(url: string, params:any): Promise<any> {\n        return new Promise((resolve,reject) => {\n            let cacheKey = {\n                u: url,\n                params: params\n            },\n            data:any = this.cache.get(cacheKey);\n            if(data) {\n                resolve(data);\n            } else {\n                this.http.get(url,{params:params})\n                    .toPromise()\n                    .then(response => {\n                        data = response.json() as any;\n                        this.cache.set(cacheKey,data);\n                        resolve(data);\n                    })\n                    .catch(reject);\n            }\n        });\n    }\n\n    getBoundary(): Promise<any> {\n        return new Promise((resolve,reject) => {\n            let url = `${this.config.dataApiRoot}/v0/${this.service}/area/boundary`,\n                params = {\n                    format: 'geojson',\n                    fwsBoundary: this.fwsBoundary\n                };\n            this.cachedGet(url,params)\n                .then(response => {\n                    if(response && response.boundary) {\n                        this.cachedGet(response.boundary,{}).then(resolve).catch(reject);\n                    } else {\n                        reject('missing boundary in response.');\n                    }\n                })\n                .catch(reject);\n        });\n    }\n\n    getData(): Promise<any> {\n        let url = `${this.config.dataApiRoot}/v0/${this.service}/area/clippedImage`,\n            params = {\n                layerName: this.layer.layerName,\n                fwsBoundary: this.fwsBoundary,\n                date: this.apiDate,\n                style: true,\n                fileFormat: 'png'\n            };\n        return this.cachedGet(url,params);\n    }\n\n    getStatistics(): Promise<any> {\n        return new Promise((resolve,reject) => {\n            let url = `${this.config.dataApiRoot}/v0/${this.service}/area/statistics`,\n                params = {\n                    layerName: this.layer.layerName,\n                    fwsBoundary: this.fwsBoundary,\n                    date: this.apiDate,\n                    useCache: true // TODO not sure on this.\n                };\n            this.cachedGet(url,params)\n                .then(stats => {\n                    // translate the date string to a date object.\n                    let dateParts = /^(\\d{4})-(\\d{2})-(\\d{2})/.exec(stats.date);\n                    stats.date = new Date(\n                        parseInt(dateParts[1]),\n                        parseInt(dateParts[2])-1,\n                        parseInt(dateParts[3])\n                    );\n                    resolve(stats);\n                })\n                .catch(reject);\n        });\n\n    }\n\n    getAllData(): Promise<WmsMapSelectionData> {\n        return new Promise((resolve,reject) => {\n            Promise.all([\n                this.getData(),\n                this.getBoundary(),\n                this.getStatistics()\n            ])\n            .then(arr => {\n                resolve({\n                    data: arr[0],\n                    boundary: arr[1],\n                    statistics: arr[2]\n                });\n            })\n            .catch(reject);\n        });\n    }\n\n    resizeMap(map: google.maps.Map): Promise<any> {\n        return new Promise(resolve => {\n            if(this.data) {\n                let bounds = this.toBounds(this.data.data.bbox);\n                if(bounds) {\n                    map.fitBounds(bounds);\n                }\n            }\n            resolve();\n        });\n    }\n\n    removeFrom(map: google.maps.Map): Promise<any> {\n        return new Promise(resolve => {\n            if(this.overlay) {\n                this.overlay.remove();\n            }\n            (this.features||[]).forEach(f => {\n                map.data.remove(f);\n            });\n            this.data = undefined;\n            this.features = undefined;\n            this.overlay = undefined;\n            this.legend = undefined;\n            resolve();\n        });\n    }\n\n    addTo(map: google.maps.Map): Promise<any> {\n        return new Promise((_resolve,_reject) => {\n            this.working = true;\n            let resolve = (d?:any) => {\n                    this.working = false;\n                    _resolve(d);\n                },\n                reject = (e?:any) => {\n                    this.working = false;\n                    _reject(e);\n                };\n            if(this.overlay && this.features) {\n                return reject('already added to map, call removeFrom');\n            }\n            this.getAllData()\n                .then(all => {\n                    if(this.overlay && this.features) {\n                        console.log('in promise, already have overlay and features');\n                        return resolve();\n                    }\n                    this.data = all;\n                    let data = all.data,\n                        bounds = this.toBounds(data.bbox),\n                        clippedImage = data.clippedImage;\n                    if(bounds) {\n                        map.panTo(bounds.getCenter());\n                        /*\n                        let rect = new google.maps.Rectangle({\n                            strokeColor: '#FF0000',\n                            strokeOpacity: 0.8,\n                            strokeWeight: 2,\n                            fillColor: '#FF0000',\n                            fillOpacity: 0.35,\n                            map: map,\n                            bounds: bounds\n                        });*/\n                        map.fitBounds(bounds);\n\n                        // have to do this so that the google api classes aren't\n                        // touched too early and our class extension invalid\n                        lazyClassLoader();\n\n                        this.overlay = new ImageOverLayImpl(bounds,clippedImage,map);\n                        this.overlay.add();\n\n                        let geoJson = all.boundary;\n                        console.log('MAP boundary resonse',geoJson);\n                        this.features = map.data.addGeoJson(geoJson);\n                        map.data.setStyle(feature => {\n                            return {\n                                strokeColor: '#000000',\n                                strokeOpacity: 0.8,\n                                strokeWeight: 2,\n                                fillColor: '#FF0000',\n                                fillOpacity: 0.0,\n                            };\n                        });\n                    }\n                    this.mapLegendService.getLegend(data.layerClippedFrom)\n                        .then(legend => {\n                            console.debug('ClippedWmsMapSelection.legend:',legend);\n                            this.legend = legend;\n                            resolve();\n                        })\n                        .catch(reject);\n                })\n                .catch(reject);\n        });\n\n    }\n\n    private toBounds(bbox:number[]): google.maps.LatLngBounds {\n        if(bbox && bbox.length === 4) {\n            let sw_lng = bbox[0],\n                sw_lat = bbox[1],\n                ne_lng = bbox[2],\n                ne_lat = bbox[3];\n            return new google.maps.LatLngBounds(\n              new google.maps.LatLng(sw_lat,sw_lng),\n              new google.maps.LatLng(ne_lat,ne_lng)\n            );\n            /*\n            let coords = /^BOX\\(\\s*(-?\\d+\\.\\d+)\\s+(-?\\d+\\.\\d+),\\s*(-?\\d+\\.\\d+)\\s+(-?\\d+\\.\\d+)\\s*\\)/.exec(this.box);\n            if(coords.length === 5) {\n                let sw_lng = parseFloat(coords[1]),\n                    sw_lat = parseFloat(coords[2]),\n                    ne_lng = parseFloat(coords[3]),\n                    ne_lat = parseFloat(coords[4]);\n                return new google.maps.LatLngBounds(\n                  new google.maps.LatLng(sw_lat,sw_lng),\n                  new google.maps.LatLng(ne_lat,ne_lng)\n                );\n            }*/\n        }\n        return null;\n    }\n    // lat + N of equator, - S of equator\n    // lng + E of meridian - W of meridian\n}\n\ninterface ClippedLayerDef {\n    label: string;\n    layerName: string;\n    forecast?:boolean;\n}\n\ninterface ClippedImageResponse {\n    date: string;\n    layerClippedFrom: string;\n    clippedImage: string;\n    bbox: number [];\n}\n\ninterface WmsMapSelectionData {\n    data: ClippedImageResponse;\n    boundary: any; // geoJson\n    statistics: any;\n};\n\ninterface ImageOverlay extends google.maps.OverlayView,WmsMapSupportsOpacity {\n    add();\n    remove();\n}\nlet ImageOverLayImpl: { new (bounds: google.maps.LatLngBounds, image: string, map: google.maps.Map): ImageOverlay };\n\nfunction lazyClassLoader() {\n    ImageOverLayImpl = class ImageOverLayImpl extends google.maps.OverlayView implements ImageOverlay {\n        bounds: google.maps.LatLngBounds;\n        image: string;\n        map: google.maps.Map;\n        div_:any;\n        opacity:number = 0.75;\n\n        constructor(bounds: google.maps.LatLngBounds, image: string, map: google.maps.Map) {\n            super();\n            this.bounds = bounds;\n            this.image = image;\n            this.map = map;\n        }\n\n        add() {\n            this.setMap(this.map);\n        }\n\n        remove() {\n            this.setMap(null);\n        }\n\n        setOpacity(o:number) {\n            this.opacity = o;\n            if(this.div_) {\n                this.div_.style.opacity = o;\n            }\n        }\n\n        getOpacity():number {\n            return this.opacity;\n        }\n\n        onAdd() {\n            let div = document.createElement('div');\n            div.style.borderStyle = 'none';\n            div.style.borderWidth = '0px';\n            div.style.position = 'absolute';\n\n            // Create the img element and attach it to the div.\n            let img = document.createElement('img');\n            img.src = this.image;\n            img.style.width = '100%';\n            img.style.height = '100%';\n            img.style.position = 'absolute';\n            div.appendChild(img);\n\n            this.div_ = div;\n\n            // Add the element to the \"overlayLayer\" pane.\n            var panes = this.getPanes();\n            panes.overlayLayer.appendChild(div);\n            this.setOpacity(this.opacity);\n        }\n\n        draw() {\n            // We use the south-west and north-east\n            // coordinates of the overlay to peg it to the correct position and size.\n            // To do this, we need to retrieve the projection from the overlay.\n            var overlayProjection = this.getProjection();\n\n            // Retrieve the south-west and north-east coordinates of this overlay\n            // in LatLngs and convert them to pixel coordinates.\n            // We'll use these coordinates to resize the div.\n            var sw = overlayProjection.fromLatLngToDivPixel(this.bounds.getSouthWest());\n            var ne = overlayProjection.fromLatLngToDivPixel(this.bounds.getNorthEast());\n\n            // Resize the image's div to fit the indicated dimensions.\n            var div = this.div_;\n            div.style.left = sw.x + 'px';\n            div.style.top = ne.y + 'px';\n            div.style.width = (ne.x - sw.x) + 'px';\n            div.style.height = (sw.y - ne.y) + 'px';\n        }\n\n        onRemove() {\n            this.div_.parentNode.removeChild(this.div_);\n            this.div_ = null;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-selection.ts","import {Component, Input, OnInit} from '@angular/core';\n\n@Component({\n    selector: 'clipped-wms-map-statistics',\n    template: `\n    <table>\n        <tbody>\n            <tr><td>Date</td><td>{{statistics.date | date:'longDate'}}</td></tr>\n            <tr><td>Count</td><td>{{statistics.count}}</td></tr>\n            <tr><td>Mean</td><td>{{statistics.mean | number:'1.3-3'}}</td></tr>\n            <tr><td>Std Dev</td><td>{{statistics.stddev | number:'1.3-3'}}</td></tr>\n            <tr><td>Min</td><td>{{statistics.min}}</td></tr>\n            <tr><td>Max</td><td>{{statistics.max}}</td></tr>\n            <tr><td>Complete</td><td>{{statistics.percentComplete | number:'1.0-2'}}%</td></tr>\n        </tbody>\n    </table>\n    `,\n    styles:[`\n        :host {\n            line-height: 12px;\n        }\n        tr td:first-of-type {\n            font-weight: bold;\n            text-align: right;\n            padding-right: 5px;\n        }\n        tr td:first-of-type:after {\n            content: ':';\n        }\n    `]\n})\nexport class ClippedWmsMapStatisticsComponent {\n    @Input()\n    statistics: any;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map-statistics.component.ts","module.exports = \"<div class=\\\"vis-container\\\">\\n    <div class=\\\"vis-working\\\" *ngIf=\\\"selection.working\\\">\\n        <mat-progress-spinner mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n    </div>\\n    <div class=\\\"map-wrapper\\\">\\n        <agm-map (mapReady)=\\\"mapReady($event)\\\"></agm-map>\\n        <wms-map-legend *ngIf=\\\"!thumbnail\\\" [legend]=\\\"selection.legend\\\"></wms-map-legend>\\n        <clipped-wms-map-statistics *ngIf=\\\"!thumbnail && selection && selection.data && selection.data.statistics\\\"\\n            [statistics]=\\\"selection.data.statistics\\\"></clipped-wms-map-statistics>\\n    </div>\\n    <wms-map-opacity-control *ngIf=\\\"!thumbnail\\\" [supportsOpacity]=\\\"selection.overlay\\\"></wms-map-opacity-control>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.html\n// module id = ../../../../../../../../../../../../npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.html\n// module chunks = main","exports = module.exports = require(\"../../../drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".vis-container {\\n  display: block;\\n  position: relative; }\\n  .vis-container agm-map {\\n    /*\\n        /deep/ allows this rule to ignore then\\n        _ngcontent class added by angular (since this element is added by google.)\\n        other wise the rule turns into something like\\n        agm-map[_ngcontent-c4]   img[src*=usanpn][_ngcontent-c4] { ... }\\n        */ }\\n    .vis-container agm-map /deep/ img[src*=usanpn] {\\n      -ms-interpolation-mode: nearest-neighbor;\\n          image-rendering: -webkit-optimize-contrast;\\n          image-rendering: pixelated;\\n      image-rendering: -moz-crisp-edges; }\\n  .vis-container .vis-working {\\n    width: 100%;\\n    height: 100%;\\n    color: #fff;\\n    background-color: rgba(0, 0, 0, 0.25);\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    z-index: 2000;\\n    text-align: center; }\\n    .vis-container .vis-working i {\\n      margin-top: 15%; }\\n    .vis-container .vis-working mat-progress-spinner {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      -webkit-transform: translate(-50%, -50%);\\n              transform: translate(-50%, -50%); }\\n\\n/*\\n/deep/ .gridded-legend {\\n    border: 1px solid red;\\n}*/\\n.map-wrapper {\\n  position: relative; }\\n  .map-wrapper wms-map-legend,\\n  .map-wrapper clipped-wms-map-statistics {\\n    position: absolute;\\n    left: 10px;\\n    padding: 8px;\\n    border: 1px solid #aaa;\\n    background-color: rgba(255, 255, 255, 0.5);\\n    border-radius: 5px; }\\n  .map-wrapper wms-map-legend {\\n    bottom: 25px;\\n    width: 60%; }\\n    .map-wrapper wms-map-legend /deep/ .gridded-legend {\\n      width: 100%;\\n      height: 125px;\\n      border: none; }\\n  .map-wrapper clipped-wms-map-statistics {\\n    top: 10px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.scss\n// module id = ../../../../../../../../../../../../npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.scss\n// module chunks = main","import {Component,Input} from '@angular/core';\n\nimport {MapVisualizationBaseComponent} from '../map-visualization-base.component';\n\nimport {ClippedWmsMapSelection} from './clipped-wms-map-selection';\n\nimport {} from '@types/googlemaps';\n\n@Component({\n    selector: 'clipped-wms-map',\n    templateUrl: './clipped-wms-map.component.html',\n    styleUrls: ['./clipped-wms-map.component.scss']\n})\nexport class ClippedWmsMapComponent extends MapVisualizationBaseComponent {\n    @Input() selection: ClippedWmsMapSelection;\n\n    mapReady(map:google.maps.Map): void {\n        // TODO should be private.\n        this.getMapResolver(map);\n    }\n\n    protected reset(): void {\n        this.getMap().then(m => {\n            this.selection.removeFrom(m)\n                .then(() => {\n                    super.reset();\n                });\n        });\n    }\n\n    protected update(): void {\n        this.resize();\n        this.getMap().then(m => {\n            this.selection.removeFrom(m)\n                .then(() => {\n                    this.selection.addTo(m)\n                });\n        });\n    }\n\n    protected resize(): void {\n        super.resize();\n        this.getMap().then(m => this.selection.resizeMap(m));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/clipped-wms-map.component.ts","/*\nit would be ideal to do this and simplify the parent module which would also\nallow for each visualization to be imported and used independent of its siblings\nbut have to ferret out all the dependencies of each sub-module and\ninclude them i.e. all the angular material, etc. so probably an activity for a later date.\n\nimport {NgModule} from '@angular/core';\n\nimport {ClippedWmsMapSelectionFactory} from './clipped-wms-map-selection-factory';\nimport {ClippedWmsMapControl} from './clipped-wms-map-control.component';\nimport {ClippedWmsMapComponent} from './clipped-wms-map.component';\nimport {ClippedWmsMapStatisticsComponent} from './clipped-wms-map-statistics.component';\n\n@NgModule({\n    imports:[\n\n    ],\n    declarations: [\n        ClippedWmsMapControl,\n        ClippedWmsMapComponent,\n        ClippedWmsMapStatisticsComponent\n    ],\n    exports: [\n        ClippedWmsMapControl,\n        ClippedWmsMapComponent\n    ],\n    providers:[\n        ClippedWmsMapSelectionFactory\n    ]\n})\nexport class ClippedWmsMapVisModule {}\n*/\n\nexport {ClippedWmsMapSelection} from './clipped-wms-map-selection';\nexport {ClippedWmsMapSelectionFactory} from './clipped-wms-map-selection-factory';\nexport {ClippedWmsMapControl} from './clipped-wms-map-control.component';\nexport {ClippedWmsMapComponent} from './clipped-wms-map.component';\nexport {ClippedWmsMapStatisticsComponent} from './clipped-wms-map-statistics.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/clipped-wms-map/index.ts","export * from './species-phenophase-input.component';\nexport * from './year-range-input.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/index.ts","import {Component,Input,Output,EventEmitter,OnInit,DoCheck} from '@angular/core';\nimport {FormControl} from '@angular/forms';\n\nimport {Observable} from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/operator/debounceTime';\nimport 'rxjs/add/operator/startWith';\nimport 'rxjs/add/operator/map';\n\nimport {Species,Phenophase,SpeciesService,SpeciesTitlePipe} from '../../common';\nimport {VisSelection} from '../vis-selection';\n\nconst COLORS = [\n  '#1f77b4','#ff7f0e','#2ca02c','#d62728','#222299', '#c51b8a',  '#8c564b', '#637939', '#843c39',\n  '#5254a3','#636363',\n  '#bcbd22', '#7b4173','#e7ba52', '#222299',  '#f03b20', '#1b9e77','#e377c2',  '#ef8a62', '#91cf60', '#9467bd'\n];\n\n@Component({\n    selector: 'species-phenophase-input',\n    template: `\n    <mat-form-field class=\"species-input\">\n        <input matInput placeholder=\"Species\" aria-label=\"Species\"\n               [matAutocomplete]=\"sp\"\n               [formControl]=\"speciesControl\" [(ngModel)]=\"species\"/>\n        <mat-autocomplete #sp=\"matAutocomplete\" [displayWith]=\"speciesTitle.transform\">\n          <mat-option *ngFor=\"let s of filteredSpecies | async\" [value]=\"s\">\n            {{s | speciesTitle}} ({{s.number_observations}})\n          </mat-option>\n        </mat-autocomplete>\n        <mat-progress-bar *ngIf=\"!speciesList || !speciesList.length\" mode=\"query\"></mat-progress-bar>\n    </mat-form-field>\n\n    <mat-form-field class=\"phenophase-input\">\n        <mat-select placeholder=\"Phenophase\" [(ngModel)]=\"phenophase\" [disabled]=\"!phenophaseList.length\">\n          <mat-option *ngFor=\"let p of phenophaseList\" [value]=\"p\">{{p.phenophase_name}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n\n    <mat-form-field *ngIf=\"gatherColor\" class=\"color-input\">\n        <mat-select  placeholder=\"Color\" [(ngModel)]=\"color\">\n          <mat-select-trigger><div class=\"color-swatch\" [ngStyle]=\"{'background-color':color}\"></div></mat-select-trigger>\n          <mat-option *ngFor=\"let c of colorList\" [value]=\"c\"><div class=\"color-swatch\" [ngStyle]=\"{'background-color':c}\"></div></mat-option>\n        </mat-select>\n    </mat-form-field>\n    `,\n    styles: [`\n        .species-input {\n            width: 300px;\n        }\n        .phenophase-input {\n            width: 400px;\n        }\n        .color-swatch {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n        }\n        .color-input {\n\n        }\n        .color-input /deep/ .mat-select-trigger {\n            //border: 1px solid red;\n        }\n    `]\n})\nexport class SpeciesPhenophaseInputComponent implements OnInit,DoCheck {\n    @Input() startYear:number;\n    @Input() endYear:number;\n    @Input() selection:VisSelection;\n\n    @Output() speciesChange = new EventEmitter<Species>();\n    speciesValue:Species;\n    @Output() onSpeciesChange = new EventEmitter<any>();\n\n    @Output() phenophaseChange = new EventEmitter<Phenophase>();\n    phenophaseValue:Phenophase;\n    @Output() onPhenophaseChange = new EventEmitter<any>();\n\n    @Input() gatherColor:boolean = false;\n    @Output() colorChange = new EventEmitter<String>();\n    colorValue:string;\n    @Output() onColorChange = new EventEmitter<any>();\n    colorList:string[] = COLORS;\n\n    speciesControl:FormControl = new FormControl();\n    filteredSpecies: Observable<Species[]>;\n    speciesList:Species[];\n\n    phenophaseList:Phenophase[] = [];\n\n    private lastSpeciesParams:string;\n    private speciesParams = new Subject<any>();\n\n    constructor(private speciesService: SpeciesService,\n                private speciesTitle: SpeciesTitlePipe) {\n        this.filteredSpecies = this.speciesControl.valueChanges\n            .startWith(null)\n            .map(s => {\n                return s && this.speciesList ?\n                    this.filterSpecies(s) :\n                    this.speciesList ? this.speciesList.slice() : []\n            });\n    }\n\n    ngOnInit() {\n        this.speciesParams\n            .subscribe(params => {\n                this.speciesList = undefined;\n                // load up the available species\n                this.speciesService.getAllSpecies(params)\n                    .then(species => {\n                        this.speciesList = species.sort((a,b) => {\n                            if(a.number_observations < b.number_observations) {\n                                return 1;\n                            }\n                            if(a.number_observations > b.number_observations) {\n                                return -1;\n                            }\n                            return 0;\n                        });\n                    });\n            });\n    }\n\n    ngDoCheck() {\n        if(this.selection) {\n            let params = {},paramsS;\n            (this.selection.networkIds||[]).forEach((id,i) => params[`network_id[${i}]`] = `${id}`);\n            (this.selection.stationIds||[]).forEach((id,i) => params[`station_ids[${i}]`] = `${id}`);\n            paramsS = JSON.stringify(params);\n            if(paramsS !== this.lastSpeciesParams) {\n                this.lastSpeciesParams = paramsS;\n                this.speciesParams.next(params);\n            }\n        }\n    }\n\n    filterSpecies(s) {\n        if(typeof(s) === 'string') {\n            s = s.trim().toLowerCase();\n            return s !== '' ?\n                (this.speciesList||[]).filter(sp => {\n                    let title = this.speciesTitle.transform(sp).toLowerCase();;\n                    return title.indexOf(s) !== -1;\n                }) : (this.speciesList||[]);\n        }\n        return [s];\n    }\n\n    filterPhenophases(s) {\n        if(typeof(s) === 'string') {\n            s = s.toLowerCase();\n            return (this.phenophaseList||[]).filter(p => {\n                return p.phenophase_name.toLowerCase().indexOf(s) !== -1;\n            });\n        }\n        return [s];\n    }\n\n    displayPhenophase(p) {\n        return p ? p.phenophase_name : p;\n    }\n\n    @Input('species')\n    get species():Species {\n        return this.speciesValue;\n    }\n    set species(s:Species) {\n        if(!s || typeof(s) === 'object') { // might as well use any\n            if(s !== this.speciesValue) {\n                let oldValue = this.speciesValue;\n                this.speciesChange.emit(this.speciesValue = s);\n                this.onSpeciesChange.emit({\n                    oldValue: oldValue,\n                    newValue: this.speciesValue\n                });\n                this.phenophase = undefined;\n                this.phenophaseList = [];\n                if(s) {\n                    this.speciesService.getPhenophases(s,this.startYear,this.endYear)\n                        .then(phenophases => {\n                            this.phenophaseList = phenophases;\n                            this.phenophase = this.phenophaseList[0];\n                        });\n                }\n            }\n        }\n    }\n\n    @Input('phenophase')\n    get phenophase():Phenophase {\n        return this.phenophaseValue;\n    }\n    set phenophase(p:Phenophase) {\n        if(p !== this.phenophaseValue) {\n            let oldValue = this.phenophaseValue;\n            this.phenophaseChange.emit(this.phenophaseValue = p);\n            this.onPhenophaseChange.emit({\n                oldValue: oldValue,\n                newValue: this.phenophaseValue\n            });\n        }\n    }\n\n    @Input('color')\n    get color(): string {\n        return this.colorValue;\n    }\n    set color(c:string) {\n        if(c !== this.colorValue) {\n            let oldValue = this.colorValue;\n            this.colorChange.emit(this.colorValue = c);\n            this.onColorChange.emit({\n                oldValue: oldValue,\n                newValue: this.colorValue\n            });\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/species-phenophase-input.component.ts","import {Component,Input,Output,EventEmitter,OnInit} from '@angular/core';\n\n@Component({\n    selector: 'year-range-input',\n    template: `\n    <mat-form-field class=\"start-year\">\n        <mat-select placeholder=\"Start year\" [(ngModel)]=\"start\">\n            <mat-option *ngFor=\"let y of validStarts\" [value]=\"y\">{{y}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    <mat-form-field class=\"end-year\">\n        <mat-select placeholder=\"End year\" [(ngModel)]=\"end\" [disabled]=\"!start\">\n            <mat-option *ngFor=\"let y of validEnds\" [value]=\"y\">{{y}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    `\n})\nexport class YearRangeInputComponent {\n    @Output() startChange = new EventEmitter<number>();\n    startValue:number;\n    @Output() onStartChange = new EventEmitter<any>();\n\n    @Output() endChange = new EventEmitter<number>();\n    endValue:number;\n    @Output() onEndChange = new EventEmitter<any>();\n\n    @Input()\n    maxSpan:number = 10;\n\n    validStarts:number[] = (function(){\n        let max = (new Date()).getFullYear(),\n            current = 1900,\n            years:number[] = [];\n        while(current < max) {\n            years.push(current++);\n        }\n        return years;\n    })();\n    validEnds:number[] = [];\n\n    @Input()\n    get start() {\n        return this.startValue;\n    }\n    set start(s:number) {\n        if(typeof(s) === 'string') {\n            s = +s;\n        }\n        if(s !== this.startValue) {\n            let oldValue = this.startValue;\n            this.startChange.emit(this.startValue = s);\n            this.onStartChange.emit({\n                oldValue: oldValue,\n                newValue: this.startValue\n            });\n            if(s) {\n                let thisYear = (new Date()).getFullYear(),\n                    current = s+1,\n                    max = current+this.maxSpan,\n                    ends:number[] = [];\n                if(max > thisYear) {\n                    max = thisYear+1;\n                }\n                while(current < max) {\n                    ends.push(current++);\n                }\n                this.validEnds = ends;\n                if(this.end > max) {\n                    this.end = undefined;\n                }\n            }\n        }\n    }\n\n    @Input()\n    get end() {\n        return this.endValue;\n    }\n    set end(e:number) {\n        if(typeof(e) === 'string') {\n            e = +e;\n        }\n        if(e !== this.endValue) {\n            let oldValue = this.endValue;\n            this.endChange.emit(this.endValue = e);\n            this.onEndChange.emit({\n                oldValue: oldValue,\n                newValue: this.endValue\n            });\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/common-controls/year-range-input.component.ts","/*\nNOTE: this is currently one BIG module that includes all the visualizations.\nthat's ok generally but it would be better to have each visualization be its own\nmodule that deals with its own dependencies so that they could be imported individually\ninto an application (and simplify this module's imports).\n\nsee the commented out start of such a module in ./clipped-wms-map\n\nprobably should be an activity for a later date, or if time permits.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule,DatePipe } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\n\nimport {VisualizationDownloadComponent} from './visualization-download.component';\n\nimport {ScatterPlotSelectionFactory,ScatterPlotComponent,ScatterPlotControls} from './scatter-plot';\nimport {CalendarSelectionFactory,CalendarComponent,CalendarControlComponent} from './calendar';\nimport {ActivityCurvesSelectionFactory,ActivityCurvesComponent,CurveControlComponent,ActivityCurvesControlComponent} from './activity-curves';\nimport {ClippedWmsMapComponent,ClippedWmsMapControl,ClippedWmsMapStatisticsComponent,ClippedWmsMapSelectionFactory} from './clipped-wms-map';\n//import {ClippedWmsMapVisModule} from './clipped-wms-map';\nimport {ObserverActivitySelectionFactory,ObserverActivityComponent,ObserverActivityControl} from './observer-activity';\nimport {ObservationFrequencySelectionFactory,ObservationFrequencyComponent,ObservationFrequencyControl,ObvervationFrequencyStationControlComponent} from './observation-frequency';\nimport {VisualizationComponent} from './visualization.component';\n\nimport {VisualizationSelectionFactory} from './visualization-selection-factory.service';\nimport {SpeciesPhenophaseInputComponent,YearRangeInputComponent} from './common-controls';\n\nimport {BrowserModule} from '@angular/platform-browser';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {MatFormFieldModule,MatButtonModule, MatCheckboxModule, MatSelectModule,\n        MatProgressSpinnerModule,MatExpansionModule,MatAutocompleteModule,\n        MatInputModule,MatSliderModule,MatProgressBarModule} from '@angular/material';\n\nimport {AgmCoreModule} from '@agm/core';\n\nimport {NpnCommonModule} from '../common';\nimport {NpnGriddedModule} from '../gridded';\n\n@NgModule({\n  imports: [\n    BrowserAnimationsModule,\n    BrowserModule,\n    CommonModule,\n    FormsModule,ReactiveFormsModule,\n    MatFormFieldModule,MatButtonModule, MatCheckboxModule,MatSelectModule,\n    MatProgressSpinnerModule, MatExpansionModule,MatAutocompleteModule,\n    MatInputModule,MatSliderModule,MatProgressBarModule,\n    AgmCoreModule,\n    NpnCommonModule,NpnGriddedModule,\n  ],\n  declarations: [\n      ScatterPlotComponent,ScatterPlotControls,\n      CalendarComponent,CalendarControlComponent,\n      ActivityCurvesComponent,CurveControlComponent,ActivityCurvesControlComponent,\n      ObserverActivityComponent,ObserverActivityControl,\n      ObservationFrequencyComponent,ObservationFrequencyControl,ObvervationFrequencyStationControlComponent /* not exported private */,\n      ClippedWmsMapComponent,ClippedWmsMapControl,ClippedWmsMapStatisticsComponent,\n      VisualizationDownloadComponent,\n      VisualizationComponent,\n      SpeciesPhenophaseInputComponent,\n      YearRangeInputComponent\n  ],\n  exports: [\n      ScatterPlotComponent,\n      ScatterPlotControls,\n      ActivityCurvesComponent,ActivityCurvesControlComponent,\n      ObserverActivityComponent,ObserverActivityControl,\n      ObservationFrequencyComponent,ObservationFrequencyControl,\n      CalendarComponent,CalendarControlComponent,\n      ClippedWmsMapComponent,ClippedWmsMapControl,\n      VisualizationComponent,\n      SpeciesPhenophaseInputComponent\n  ],\n  providers: [\n      DatePipe,\n      // can inject a specific type of factory\n      ScatterPlotSelectionFactory,\n      CalendarSelectionFactory,\n      ClippedWmsMapSelectionFactory,\n      ActivityCurvesSelectionFactory,\n      ObserverActivitySelectionFactory,\n      ObservationFrequencySelectionFactory,\n      // OR one factory to rule them all\n      VisualizationSelectionFactory\n  ]\n})\nexport class VisualizationsModule { }\n\nexport {VisSelection,NetworkAwareVisSelection,StationAwareVisSelection} from './vis-selection';\nexport {VisualizationSelectionFactory} from './visualization-selection-factory.service';\nexport * from './calendar';\nexport * from './scatter-plot';\nexport * from './activity-curves';\nexport * from './clipped-wms-map';\nexport * from './observer-activity';\nexport * from './observation-frequency';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/index.ts","module.exports = \"<div class=\\\"vis-container\\\">\\n    <div class=\\\"vis-working\\\" *ngIf=\\\"selection.working\\\">\\n        <mat-progress-spinner mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n    </div>\\n    <agm-map (mapReady)=\\\"mapReady($event)\\\"></agm-map>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.html\n// module id = ../../../../../../../../../../../../npn_common/visualizations/map-visualization-base.component.html\n// module chunks = main","exports = module.exports = require(\"../../drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".vis-container {\\n  display: block;\\n  position: relative; }\\n  .vis-container agm-map {\\n    /*\\n        /deep/ allows this rule to ignore then\\n        _ngcontent class added by angular (since this element is added by google.)\\n        other wise the rule turns into something like\\n        agm-map[_ngcontent-c4]   img[src*=usanpn][_ngcontent-c4] { ... }\\n        */ }\\n    .vis-container agm-map /deep/ img[src*=usanpn] {\\n      -ms-interpolation-mode: nearest-neighbor;\\n          image-rendering: -webkit-optimize-contrast;\\n          image-rendering: pixelated;\\n      image-rendering: -moz-crisp-edges; }\\n  .vis-container .vis-working {\\n    width: 100%;\\n    height: 100%;\\n    color: #fff;\\n    background-color: rgba(0, 0, 0, 0.25);\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    z-index: 2000;\\n    text-align: center; }\\n    .vis-container .vis-working i {\\n      margin-top: 15%; }\\n    .vis-container .vis-working mat-progress-spinner {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      -webkit-transform: translate(-50%, -50%);\\n              transform: translate(-50%, -50%); }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.scss\n// module id = ../../../../../../../../../../../../npn_common/visualizations/map-visualization-base.component.scss\n// module chunks = main","import {Component} from '@angular/core';\n\nimport {VisSelection,VisSelectionEvent} from './vis-selection';\nimport {VisualizationBaseComponent,VisualizationSizing,VisualizationMargins} from './visualization-base.component';\n\nimport {} from '@types/googlemaps';\n\n@Component({\n  selector: 'map-visualization-base',\n  templateUrl: './map-visualization-base.component.html',\n  styleUrls: ['./map-visualization-base.component.scss']\n})\nexport abstract class MapVisualizationBaseComponent extends VisualizationBaseComponent {\n    protected latitude:number = 38.8402805;\n    protected longitude:number = -97.61142369999999\n    protected zoom:number = 4;\n\n    protected getMapResolver;\n    protected getMapPromise = new Promise<google.maps.Map>(resolve => {\n        this.getMapResolver = resolve;\n    });\n\n    mapReady(map: google.maps.Map): void {\n        map.addListener('resize',() => {\n            console.log('resize happened');\n            console.log('panning to center');\n            map.setZoom(3);\n            setTimeout(() => {\n                map.panTo(new google.maps.LatLng(this.latitude,this.longitude));\n                map.setZoom(this.zoom);\n            },500);\n        });\n        this.getMapResolver(map);\n    }\n\n    protected getMap(): Promise<google.maps.Map> {\n        return this.getMapPromise;\n    }\n\n    protected resize(): void {\n        this.getMap().then(map => {\n            let sizing = this.getSizeInfo(),\n                root = this.rootElement.nativeElement as HTMLElement,\n                mapElm = root.querySelector('agm-map') as HTMLElement;\n            mapElm.style.width = `${sizing.width}px`;\n            mapElm.style.height = `${sizing.height}px`;\n            google.maps.event.trigger(map,'resize');\n        });\n    }\n\n    protected reset(): void {\n        this.getMap().then(map => {\n            console.log('Map reset',map);\n            map.panTo(new google.maps.LatLng(this.latitude,this.longitude));\n            map.setZoom(this.zoom);\n        });\n    }\n\n    protected redraw(): void {\n        this.getMap().then(map => {\n            console.log('Map redraw',map);\n        });\n    }\n    protected update(): void {\n        this.resize();\n        this.getMap().then(map => {\n            console.log('Map update',map);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/map-visualization-base.component.ts","import {Headers,Http,URLSearchParams} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport {StationAwareVisSelection,selectionProperty} from './vis-selection';\nimport {CacheService,Species,Phenophase,SpeciesTitlePipe,NpnConfiguration} from '../common';\n\nexport class ObservationDatePlot {\n    color?: String;\n    species?: Species;\n    phenophase?: Phenophase;\n    [x: string]: any;\n}\n\nexport class ObservationDataDataPoint {\n    x: number;\n    y: number;\n    color: string;\n}\nexport class ObservationDateData {\n    labels: string[] = [];\n    data: ObservationDataDataPoint[] = [];\n}\n\nexport abstract class ObservationDateVisSelection extends StationAwareVisSelection {\n    private headers = new Headers({'Content-Type':'application/x-www-form-urlencoded'});\n\n    requestSrc:string = 'observation-date-vis-selection';\n\n    @selectionProperty()\n    negative:boolean = false;\n    @selectionProperty()\n    negativeColor:string = '#aaa'\n    @selectionProperty()\n    years:number[] = [];\n    @selectionProperty()\n    plots:ObservationDatePlot[] = [];\n\n    constructor(protected http:Http,\n                protected cacheService:CacheService,\n                protected speciesTitle:SpeciesTitlePipe,\n                protected config:NpnConfiguration) {\n        super();\n    }\n\n    isValid():boolean {\n        return this.years && this.years.length && this.validPlots.length > 0;\n    }\n\n    get validPlots(): ObservationDatePlot[] {\n        return (this.plots||[]).filter(p => {\n            return p.color && p.species && p.phenophase;\n        });\n    }\n\n    toURLSearchParams(): URLSearchParams {\n        let params = new URLSearchParams();\n        params.set('request_src',this.requestSrc);\n        this.years.forEach((y,i) => {\n            params.set(`year[${i}]`,`${y}`);\n        });\n        this.validPlots.forEach((plot,i) => {\n            params.set(`species_id[${i}]`,`${plot.species.species_id}`);\n            params.set(`phenophase_id[${i}]`,`${plot.phenophase.phenophase_id}`);\n        });\n        this.addNetworkParams(params);\n        return params;\n    }\n\n    postProcessData(data:any[]):ObservationDateData {\n        let response = new ObservationDateData(),\n            vPlots = this.validPlots,\n            y = (vPlots.length*this.years.length)-1,\n            addDoys = (doys,color) => {\n                doys.forEach(doy => {\n                    response.data.push({\n                        y: y,\n                        x: doy,\n                        color: color\n                    });\n                });\n            },\n            speciesMap = data.reduce((map,species) => {\n                map[species.species_id] = species;\n                // first time translate phenophases array to a map.\n                if(Array.isArray(species.phenophases)) {\n                    species.phenophases = species.phenophases.reduce(function(m,pp){\n                        m[pp.phenophase_id] = pp;\n                        return m;\n                    },{});\n                }\n                return map;\n            },{});\n            console.log('speciesMap',speciesMap);\n        vPlots.forEach(plot => {\n            let species = speciesMap[plot.species.species_id],\n                phenophase = species.phenophases[plot.phenophase.phenophase_id];\n            this.years.forEach(year => {\n                if(phenophase && phenophase.years && phenophase.years[year]) {\n                    if(this.negative) {\n                        console.debug('year negative',y,year,species.common_name,phenophase,phenophase.years[year].negative);\n                        addDoys(phenophase.years[year].negative,this.negativeColor);\n                    }\n                    console.debug('year positive',y,year,species.common_name,phenophase,phenophase.years[year].positive);\n                    addDoys(phenophase.years[year].positive,plot.color);\n                }\n                response.labels.splice(0,0,this.speciesTitle.transform(plot.species)+'/'+plot.phenophase.phenophase_name+' ('+year+')');\n                console.debug('y of '+y+' is for '+response.labels[0]);\n                y--;\n            });\n        });\n        console.log('observation data',response);\n        return response;\n    }\n\n    getData(): Promise<any[]> {\n        if(!this.isValid()) {\n            return Promise.reject(this.INVALID_SELECTION);\n        }\n        let params = this.toURLSearchParams(),\n        url = `${this.config.apiRoot}/npn_portal/observations/getObservationDates.json`,\n        cacheKey = {\n            u: url,\n            params: params.toString()\n        },\n        data:any[] = this.cacheService.get(cacheKey);\n\n        if(data) {\n            return Promise.resolve(data);\n        } else {\n            this.working = true;\n            return new Promise(resolve => {\n                this.http.post(url,params.toString(),{headers: this.headers})\n                    .toPromise()\n                    .then(response => {\n                        let arr = response.json() as any[];\n                        this.cacheService.set(cacheKey,arr);\n                        this.working = false;\n                        resolve(arr);\n                    })\n                    .catch(this.handleError);\n            });\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-date-vis-selection.ts","export * from './observation-frequency-selection';\nexport * from './observation-frequency-selection-factory.service';\nexport * from './observation-frequency.component';\nexport * from './observation-frequency-control.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/index.ts","import {Component, Input, OnInit} from '@angular/core';\n\nimport {ObservationFrequencySelection} from './observation-frequency-selection';\n\n@Component({\n    selector: 'observation-frequency-control',\n    template:`\n    <mat-form-field>\n        <mat-select class=\"year-input\" placeholder=\"Year\" [(ngModel)]=\"selection.year\" (change)=\"selection.update()\">\n            <mat-option *ngFor=\"let y of validYears\" [value]=\"y\">{{y}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    `,\n    styles:[`\n    `]\n})\nexport class ObservationFrequencyControl implements OnInit {\n    @Input()\n    selection: ObservationFrequencySelection;\n\n    // TODO what are the valid years?\n    validYears:number[] = (function(){\n        let max = (new Date()).getFullYear()+1,\n            current = 2000,\n            years:number[] = [];\n        while(current < max) {\n            years.push(current++);\n        }\n        return years.reverse();\n    })();\n\n    ngOnInit() {\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-control.component.ts","import {Injectable} from '@angular/core';\nimport {NetworkService,NpnServiceUtils} from '../../common';\n\nimport {ObservationFrequencySelection} from './observation-frequency-selection';\n\n@Injectable()\nexport class ObservationFrequencySelectionFactory {\n    constructor(protected serviceUtils:NpnServiceUtils,protected networkService: NetworkService) {}\n\n    newSelection(): ObservationFrequencySelection {\n        return new ObservationFrequencySelection(this.serviceUtils,this.networkService);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-selection-factory.service.ts","import {NpnServiceUtils,NetworkService} from '../../common';\nimport {NetworkAwareVisSelection,selectionProperty} from '../vis-selection';\n\nexport class ObservationFrequencySelection extends NetworkAwareVisSelection {\n    @selectionProperty()\n    _year:number;\n    @selectionProperty()\n    defaultStation:number;\n\n    constructor(protected serviceUtils:NpnServiceUtils,protected networkService: NetworkService) {\n        super();\n    }\n\n    set year(y:number) {\n        this._year = y;\n        delete this.defaultStation; // reset default station if there is one.\n    }\n\n    get year():number {\n        return this._year;\n    }\n\n    isValid():boolean {\n        return !!this.year && this.networkIds.length === 1;\n    }\n\n    dataCnt:number = 0;\n    getData():Promise<any> {\n        let url = this.serviceUtils.apiUrl('/npn_portal/networks/getSiteVisitFrequency.json'),\n            params = {\n                year: this.year,\n                network_id: this.networkIds[0]\n            };\n        return this.serviceUtils.cachedGet(url,params);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency-selection.ts","module.exports = \"<div class=\\\"vis-container\\\">\\n    <div class=\\\"vis-working\\\" *ngIf=\\\"selection.working\\\">\\n        <mat-progress-spinner mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n    </div>\\n    <div class=\\\"chart-container\\\">\\n        <visualization-download *ngIf=\\\"!thumbnail\\\" svgWrapperId=\\\"{{id}}\\\" filename=\\\"{{filename}}\\\"></visualization-download>\\n        <div [class]=\\\"clazz\\\" id=\\\"{{id}}\\\" [hidden]=\\\"thumbnailSrc\\\"><svg class=\\\"svg-visualization\\\"></svg></div>\\n        <div [hidden]=\\\"!thumbnailSrc\\\">\\n            <canvas class=\\\"thumbnail-canvas\\\" style=\\\"display: none;\\\"></canvas>\\n            <img class=\\\"thumbnail-image\\\" />\\n        </div>\\n    </div>\\n    <observation-frequency-station-control *ngIf=\\\"!thumbnail && stations && stations.length > 1\\\" [stations]=\\\"stations\\\" [(station)]=\\\"station\\\" (onStationChange)=\\\"redrawSvg()\\\"></observation-frequency-station-control>\\n    <div *ngIf=\\\"stations && stations.length > 1 && selection.editMode\\\" class=\\\"vis-disclaimer\\\">Note: The station selected here will be the initial station shown for visitors.</div>\\n</div>\\n<!--pre *ngIf=\\\"record\\\">{{record | json}}</pre-->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency.component.html\n// module id = ../../../../../../../../../../../../npn_common/visualizations/observation-frequency/observation-frequency.component.html\n// module chunks = main","import {Component,Input,Output,ElementRef,EventEmitter,OnInit} from '@angular/core';\n\nimport {Window} from '../../common';\nimport {VisualizationMargins} from '../visualization-base.component';\nimport {SvgVisualizationBaseComponent,DEFAULT_MARGINS,FONT_SIZE,FONT_SIZE_PX} from '../svg-visualization-base.component';\n\nimport {ObservationFrequencySelection} from './observation-frequency-selection';\n\nimport {Axis,axisBottom,axisLeft} from 'd3-axis';\nimport {Selection} from 'd3-selection';\nimport {ScaleBand,scaleBand,ScaleLinear,scaleLinear,ScaleOrdinal,scaleOrdinal} from 'd3-scale';\nimport * as d3 from 'd3';\n\nconst TITLE = 'Site visits by month';\n\n@Component({\n  selector: 'observation-frequency',\n  // IMPORTANT: this template is a copy of ../svg-visualization-base.component.html so that\n  // it can have added controls.  if the former changes this one may need updates too\n  templateUrl: './observation-frequency.component.html',\n  styleUrls: ['../svg-visualization-base.component.scss'],\n})\nexport class ObservationFrequencyComponent extends SvgVisualizationBaseComponent {\n    @Input()\n    selection:ObservationFrequencySelection;\n\n    title: Selection<any,any,any,any>;\n\n    x: ScaleBand<number>;\n    xAxis: Axis<number>;\n\n    y: ScaleLinear<number,number>;\n    yAxis: Axis<number>;\n\n    filename:string = 'observation-frequency.png';\n    margins: VisualizationMargins = {...DEFAULT_MARGINS, ...{top: 80,left: 80}};\n\n    stations:any[]; // to avoid null check\n    _station:any; // the current station being displayed\n    data:any;\n\n    constructor(protected window: Window,protected rootElement: ElementRef) {\n        super(window,rootElement);\n    }\n\n    set station(s:any) {\n        this._station = s;\n        if(this.selection.editMode) {\n            delete this.selection.defaultStation;\n            if(this._station) {\n                this.selection.defaultStation = this._station.station_id;\n            }\n        }\n    }\n\n    get station():any {\n        return this._station;\n    }\n\n    private getMonthFormat(): string {\n        if(this.sizing && this.sizing.width < 800) {\n            return '%b';\n        }\n        return '%B';\n    }\n\n    protected reset(): void {\n        console.debug('ObservationFrequencyComponent.reset');\n        super.reset();\n        let chart = this.chart,\n            sizing = this.sizing,\n            d3_month_fmt = d3.timeFormat(this.getMonthFormat()),\n            fontSize:number = this.baseFontSize() as number;\n        this.title =  chart.append('g')\n                     .attr('class','chart-title')\n                     .append('text')\n                     .attr('y', '0')\n                     .attr('dy','-3em')\n                     .attr('x', '0')\n                     .style('text-anchor','start')\n                     .style('font-size','18px');\n\n        this.x = scaleBand<number>()\n            .rangeRound([0,sizing.width])\n            .padding(0.05)\n            .domain(d3.range(0,12));\n        this.xAxis = axisBottom<number>(this.x).tickFormat(i =>  d3_month_fmt(new Date(1900,i)));\n        chart.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + sizing.height + ')')\n            .call(this.xAxis);\n\n        this.y = scaleLinear().range([sizing.height,0]).domain([0,20]); // just a default domain\n        this.yAxis = axisLeft<number>(this.y);\n        chart.append('g')\n            .attr('class', 'y axis')\n            .call(this.yAxis)\n          .append('text')\n          .attr('fill','#000') // somehow parent g has fill=\"none\"\n          .attr('transform', 'rotate(-90)')\n          .attr('y', '0')\n          .attr('dy','-3em')\n          .attr('x',-1*(sizing.height/2)) // looks odd but to move in the Y we need to change X because of transform\n          .style('text-anchor', 'middle')\n          .text('Site visits');\n\n        this.commonUpdates();\n    }\n\n    protected update(): void {\n        console.debug('ObservationFrequencyComponent.update');\n        this.reset();\n        delete this.data;\n        delete this.stations;\n        delete this.station;\n        this.selection.getData()\n            .then(data => {\n                this.data = data;\n                this.stations = data.stations;\n                this.redraw();\n            })\n            .catch(this.handleError);\n    }\n\n    protected redrawSvg(): void {\n        console.debug('ObservationFrequencyComponent.redrawSvg:data',this.data);\n        if(!this.stations || !this.stations.length) {\n            return;\n        }\n        if(!this.station) {\n            if(this.selection.defaultStation) {\n                this.station = this.stations.reduce((found,s) => {\n                    return found||(s.station_id === this.selection.defaultStation ? s : undefined);\n                },undefined);\n            }\n            if(!this.station) {\n                this.station = this.stations[0];\n            }\n        }\n        this.redrawStation();\n        this.commonUpdates();\n    }\n\n    private redrawStation():void {\n        this.title.text(`${TITLE}, \"TODO: Refuge Name\", ${this.selection.year}`);\n        if(!this.station) {\n            return;\n        }\n        let station = this.station;\n        console.debug('ObservationFrequencyComponent.redrawStation:station',station);\n        if(!station) {\n            return;\n        }\n\n        let sizing = this.sizing,\n            bars:any[] = station.months.slice(),\n            total = bars.reduce((sum,d) => sum+d,0),\n            max = bars.reduce((max,d) => (d > max ) ? d : max,0);\n\n        this.title.text(`${TITLE} (${this.selection.year}) \"${station.station_name}\" Total: ${total}`);\n        console.debug('ObservationFrequencyComponent.redrawStation:bars',bars);\n\n        // update x axis with months+total\n        this.x.domain(d3.range(0,bars.length));\n        this.chart.selectAll('g .x.axis').call(this.xAxis);\n        // update y axis domain\n        this.y.domain([0,max]);\n        this.chart.selectAll('g .y.axis').call(this.yAxis);\n\n        // update bars\n        this.chart.selectAll('g .bars').remove();\n        this.chart.append('g')\n            .attr('class','bars')\n            .attr('fill','#98abc5')\n            .selectAll('rect')\n            .data(bars)\n            .enter().append('rect')\n            .attr('x',(d,i) => this.x(i))\n            .attr('y',d => this.y(d))\n            .attr('title', d => d)\n            .attr('height', d => sizing.height - this.y(d))\n            .attr('width', this.x.bandwidth());\n\n        // update bar labels\n        this.chart.selectAll('g .bar-labels').remove();\n        this.chart.append('g')\n            .attr('class','bar-labels')\n            .attr('fill', '#000000')\n            .selectAll('text')\n            .data(bars)\n            .enter().append('text')\n                .attr('text-anchor','middle')\n                .attr('dy','-0.25em')\n                .attr('x',(d,i) => this.x(i)+(this.x.bandwidth()/2))\n                .attr('y',d => this.y(d))\n                .text(d => d);\n    }\n}\n\n@Component({\n    selector: 'observation-frequency-station-control',\n    template:`\n    <button mat-button (click)=\"prev()\">&lt; Previous</button>\n    <mat-form-field class=\"station-input\">\n        <mat-select placeholder=\"Station\" [(ngModel)]=\"station\" [disabled]=\"!stations || !stations.length\">\n            <mat-option *ngFor=\"let s of stations\" [value]=\"s\">{{s.station_name}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    <button mat-button (click)=\"next()\">Next &gt;</button>\n    `,\n    styles:[`\n        .station-input {\n            width: 300px;\n        }\n    `]\n})\nexport class ObvervationFrequencyStationControlComponent {\n    @Input() stations:any[];\n    @Output() stationChange = new EventEmitter<any>();\n    stationValue:any;\n\n    @Output() onStationChange = new EventEmitter<any>();\n\n    @Input('station')\n    get station():any {\n        return this.stationValue;\n    }\n    set station(s) {\n        if(s !== this.stationValue) {\n            let oldValue = this.stationValue;\n            this.stationChange.emit(this.stationValue = s);\n            this.onStationChange.emit({\n                oldValue: oldValue,\n                newValue: this.stationValue\n            });\n        }\n    }\n\n    prev() {\n        let idx = this.stations.indexOf(this.station);\n        if(idx > 0) {\n            this.station = this.stations[idx-1];\n        } else {\n            this.station = this.stations[this.stations.length-1]; // loop around to last station\n        }\n    }\n\n    next() {\n        let idx = this.stations.indexOf(this.station);\n        if(idx < this.stations.length-1) {\n            this.station = this.stations[idx+1];\n        } else {\n            this.station = this.stations[0]; // loop around to the first station.\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observation-frequency/observation-frequency.component.ts","export * from './observer-activity-selection';\nexport * from './observer-activity-selection-factory.service';\nexport * from './observer-activity.component';\nexport * from './observer-activity-control.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/index.ts","import {Component, Input, OnInit} from '@angular/core';\n\nimport {ObserverActivitySelection} from './observer-activity-selection';\n\n@Component({\n    selector: 'observer-activity-control',\n    template:`\n    <mat-form-field>\n        <mat-select class=\"year-input\" placeholder=\"Year\" [(ngModel)]=\"selection.year\" (change)=\"selection.update()\">\n            <mat-option *ngFor=\"let y of validYears\" [value]=\"y\">{{y}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    `,\n    styles:[`\n    `]\n})\nexport class ObserverActivityControl implements OnInit {\n    @Input()\n    selection: ObserverActivitySelection;\n\n    // TODO what are the valid years?\n    validYears:number[] = (function(){\n        let max = (new Date()).getFullYear()+1,\n            current = 2000,\n            years:number[] = [];\n        while(current < max) {\n            years.push(current++);\n        }\n        return years.reverse();\n    })();\n\n    ngOnInit() {\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-control.component.ts","import {Injectable} from '@angular/core';\nimport {CacheService,NpnServiceUtils} from '../../common';\n\nimport {ObserverActivitySelection} from './observer-activity-selection';\n\n@Injectable()\nexport class ObserverActivitySelectionFactory {\n    constructor(protected serviceUtils:NpnServiceUtils) {}\n\n    newSelection(): ObserverActivitySelection {\n        return new ObserverActivitySelection(this.serviceUtils);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-selection-factory.service.ts","import {NpnServiceUtils} from '../../common';\nimport {StationAwareVisSelection,selectionProperty} from '../vis-selection';\n\n// TODO is this always network wide or can they select specific stations\nexport class ObserverActivitySelection extends StationAwareVisSelection {\n    @selectionProperty()\n    year:number;\n\n    constructor(protected serviceUtils:NpnServiceUtils) {\n        super();\n    }\n\n    isValid():boolean {\n        return !!this.year;\n    }\n\n    dataCnt:number = 0;\n    getData():Promise<any> {\n        // /npn_portal/networks/getObserversByMonth.json?year=2015&network_id=69\n        let url = this.serviceUtils.apiUrl('/npn_portal/networks/getObserversByMonth.json'),\n            params = {\n                year: this.year,\n                network_id: this.networkIds[0]\n            };\n        return new Promise((resolve,reject) => {\n            this.serviceUtils.cachedGet(url,params)\n                .then(data => {\n                    let months = [1,2,3,4,5,6,7,8,9,10,11,12].map(i => {\n                        return {...{month:i},...data.months[i]};\n                    });\n                    data.months = months;\n                    resolve(data);\n                })\n                .catch(reject);\n            /*\n            // mocked up randomly generated response\n            let response:any = {\n                network_id: this.networkIds[0],\n                months: []\n            },\n            rint = (min,max) => {\n                min = Math.ceil(min);\n                max = Math.floor(max);\n                return Math.floor(Math.random() * (max-min)) + min;\n            };\n            // mock up a bogus response\n            // every other return a full year and then a partial year\n            let max = 13;\n            if(this.year === (new Date()).getFullYear()) {\n                // if it's this year then return up to this month\n                max = (new Date()).getMonth()+2\n            }\n            for(let i = 1; i < max; i++) {\n                let nobs = rint(0,10);\n                response.months.push({\n                    month: i,\n                    //month_name: 'ignore',\n                    number_new_observers: nobs,\n                    number_active_observers: rint(nobs,20)\n                });\n            }\n            resolve(response);\n            */\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity-selection.ts","import {Component, Input, ElementRef} from '@angular/core';\n\nimport {Window} from '../../common';\nimport {VisualizationMargins} from '../visualization-base.component';\nimport {SvgVisualizationBaseComponent,DEFAULT_MARGINS,FONT_SIZE,FONT_SIZE_PX} from '../svg-visualization-base.component';\n\nimport {ObserverActivitySelection} from './observer-activity-selection';\n\nimport {Axis,axisBottom,axisLeft} from 'd3-axis';\nimport {Selection} from 'd3-selection';\nimport {ScaleBand,scaleBand,ScaleLinear,scaleLinear,ScaleOrdinal,scaleOrdinal} from 'd3-scale';\nimport * as d3 from 'd3';\n\nconst TITLE = 'New/Active Observers by Month';\n\n@Component({\n  selector: 'observer-activity',\n  templateUrl: '../svg-visualization-base.component.html',\n  styleUrls: ['../svg-visualization-base.component.scss'],\n})\nexport class ObserverActivityComponent extends SvgVisualizationBaseComponent {\n    @Input()\n    selection:ObserverActivitySelection;\n\n    legend: Selection<any,any,any,any>;\n    title: Selection<any,any,any,any>;\n\n    x: ScaleBand<number>;\n    xAxis: Axis<number>;\n\n    y: ScaleLinear<number,number>;\n    yAxis: Axis<number>;\n\n    keyLabels:string[] = ['New observers','Active observers'];\n    keys:string[] = ['number_new_observers','number_active_observers'];\n    z: ScaleOrdinal<string,string> = scaleOrdinal<string,string>()\n        .domain(this.keys)\n        .range([\"#98abc5\", \"#d0743c\"]);\n    zDarker : ScaleOrdinal<string,string> = scaleOrdinal<string,string>()\n        .domain(this.keys)\n        .range(this.z.range().map(c => {\n            return d3.color(c).darker().toString();\n        }));\n\n    filename:string = 'observer-activity.png';\n    margins: VisualizationMargins = {...DEFAULT_MARGINS, ...{top: 100,left: 80}};\n\n    data:any;\n\n    constructor(protected window: Window,protected rootElement: ElementRef) {\n        super(window,rootElement);\n    }\n\n    private getMonthFormat(): string {\n        if(this.sizing && this.sizing.width < 800) {\n            return '%b';\n        }\n        return '%B';\n    }\n\n    protected reset(): void {\n        super.reset();\n        let chart = this.chart,\n            sizing = this.sizing,\n            d3_month_fmt = d3.timeFormat(this.getMonthFormat()),\n            fontSize:number = this.baseFontSize() as number;\n        this.title =  chart.append('g')\n                     .attr('class','chart-title')\n                     .append('text')\n                     .attr('y', '0')\n                     .attr('dy','-4.2em')\n                     .attr('x', '0')\n                     .style('text-anchor','start')\n                     .style('font-size','18px');\n        let legend = this.legend = chart.append('g')\n            .attr('class','legend')\n            .attr('transform','translate(0,-'+(sizing.margin.top-10)+')')\n            .attr('text-anchor','start')\n            .style('font-size',fontSize)\n            .selectAll('g')\n            .data(this.keyLabels)\n            .enter().append('g')\n            .attr('transform',(d,i) => `translate(0,${i*22+24})`);\n        legend.append('rect')\n            .attr('x',0)\n            .attr('width',20)\n            .attr('height',20)\n            .attr('fill',this.z);\n        legend.append('text')\n            .attr('x',24)\n            .attr('y',fontSize-0.5)\n            .attr('dy','0.32em')\n            .text(d => d);\n\n        this.x = scaleBand<number>()\n            .rangeRound([0,sizing.width])\n            .padding(0.05)\n            .domain(d3.range(0,12));\n        this.xAxis = axisBottom<number>(this.x).tickFormat((i) => d3_month_fmt(new Date(1900,i)));\n        chart.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + sizing.height + ')')\n            .call(this.xAxis);\n\n        this.y = scaleLinear().range([sizing.height,0]).domain([0,20]); // just a default domain\n        this.yAxis = axisLeft<number>(this.y);\n        chart.append('g')\n            .attr('class', 'y axis')\n            .call(this.yAxis)\n          .append('text')\n          .attr('fill','#000') // somehow parent g has fill=\"none\"\n          .attr('transform', 'rotate(-90)')\n          .attr('y', '0')\n          .attr('dy','-3em')\n          .attr('x',-1*(sizing.height/2)) // looks odd but to move in the Y we need to change X because of transform\n          .style('text-anchor', 'middle')\n          .text('New/Active Observers');\n        this.commonUpdates();\n    }\n\n    protected update(): void {\n        this.reset();\n        this.selection.getData()\n            .then(data => {\n                this.data = data;\n                this.redraw();\n            })\n            .catch(this.handleError);\n    }\n\n    protected redrawSvg(): void {\n        if(!this.data) {\n            return;\n        }\n        this.title.text(`${TITLE}, \"TODO: Refuge Name\", ${this.selection.year}`);\n        console.debug('ObserverActivityComponent:data',this.data);\n        let data = this.data.months.slice(),\n            chart = this.chart,\n            new_sum = data.reduce((sum,d) => sum+d.number_new_observers,0),\n            active_sum = data.reduce((sum,d) => sum+d.number_active_observers,0),\n            max = data.reduce((max,d) => {\n                let sum = d.number_new_observers+d.number_active_observers;\n                if(sum > max) {\n                    max = sum;\n                }\n                return max;\n            },0);\n        console.debug(`ObserverActivityComponent:vis data (max=${max})`,data);\n        console.debug('ObserverActivityComponent:stacked data',d3.stack().keys(this.keys)(data));\n\n        // update x axis with months+total\n        this.x.domain(d3.range(0,data.length));\n        this.chart.selectAll('g .x.axis').call(this.xAxis);\n\n        // update y axis, domain is 0 to max of sum of the two keys\n        // largest will always be the total column\n        this.y.domain([0,max]);\n        this.chart.selectAll('g .y.axis').call(this.yAxis);\n\n        this.chart.selectAll('g .bars').remove();\n        this.chart.append('g')\n            .attr('class','bars')\n            .selectAll('g')\n            .data(d3.stack().keys(this.keys)(data))\n        .enter().append('g')\n          .attr('fill', d => this.z(d.key))\n        .selectAll('rect')\n        .data(d => d as any[])\n            .enter().append('rect')\n              .attr('x', (d,i) => this.x(i))\n              .attr('y', d => this.y(d[1]))\n              .attr('title', d => `${d[1]}`)\n              .attr('height',d => this.y(d[0]) - this.y(d[1]))\n              .attr('width',this.x.bandwidth());\n\n        this.chart.selectAll('g .bar-labels').remove();\n        this.chart.append('g')\n            .attr('class','bar-labels')\n            .selectAll('g')\n            .data(d3.stack().keys(this.keys)(data))\n        .enter().append('g')\n          .attr('fill', d => this.zDarker(d.key))\n        .selectAll('text')\n        .data(d => d as any[])\n            .enter().append('text')\n                .attr('text-anchor','middle')\n                .attr('dy','-0.25em')\n                .attr('x', (d,i) => this.x(i)+(this.x.bandwidth()/2))\n                .attr('y', (d,i) => {\n                    //console.log(`y.d[${i}]`,d[1],d);\n                    // TODO when one is 0 d[1] isn't the number we're looking for\n                    // needs adjustment in text below as well.\n                    return this.y(d[1]);\n                })\n                .text(d => `${d[1]}`)\n\n\n        this.legend.selectAll('text')\n            .each((function(nSum,aSum,labels){\n                return function(d,i) {\n                    let t = d3.select(this),\n                        n = d === labels[0] ? nSum : aSum;\n                    t.text(`${d} [Total: ${n}]`);\n                };\n            })(new_sum,active_sum,this.keyLabels));\n        this.commonUpdates();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/observer-activity/observer-activity.component.ts","export {ScatterPlotSelection,ScatterPlotSelectionPlot} from './scatter-plot-selection';\nexport {ScatterPlotSelectionFactory} from './scatter-plot-selection-factory.service';\nexport {ScatterPlotComponent} from './scatter-plot.component';\nexport {ScatterPlotControls} from './scatter-plot-controls.component';\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/index.ts","import {Component, Input, OnInit} from '@angular/core';\n\nimport {VisSelectionEvent} from '../vis-selection';\nimport {ScatterPlotSelection,AXIS} from './scatter-plot-selection';\n\nimport {Subject} from 'rxjs/Subject';\nimport 'rxjs/add/operator/debounceTime';\n\n@Component({\n    selector: 'scatter-plot-control',\n    template: `\n    <year-range-input [(start)]=\"selection.start\" [(end)]=\"selection.end\" (onStartChange)=\"updateChange()\" (onEndChange)=\"updateChange()\"></year-range-input>\n\n    <div class=\"phenophase-input-wrapper\" *ngFor=\"let spi of selection.plots; index as idx\">\n        <species-phenophase-input\n            [(species)]=\"spi.species\" [(phenophase)]=\"spi.phenophase\" [(color)]=\"spi.color\"\n            [selection]=\"selection\"\n            [gatherColor]=\"true\"\n            (onSpeciesChange)=\"updateChange()\"\n            (onPhenophaseChange)=\"updateChange()\"\n            (onColorChange)=\"redrawChange($event)\"></species-phenophase-input>\n        <button *ngIf=\"idx > 0\" mat-button class=\"remove-plot\" (click)=\"removePlot(idx)\">Remove</button>\n        <button *ngIf=\"selection.plots.length < 3 && idx === (selection.plots.length-1)\" mat-button class=\"add-plot\" [disabled]=\"!plotsValid()\" (click)=\"addPlot()\">Add</button>\n    </div>\n\n    <div>\n        <mat-form-field>\n            <mat-select placeholder=\"X Axis\" name=\"xAxis\" [(ngModel)]=\"selection.axis\" (change)=\"redrawChange()\">\n              <mat-option *ngFor=\"let a of axis\" [value]=\"a\">{{a.label}}</mat-option>\n            </mat-select>\n        </mat-form-field>\n\n        <mat-checkbox [(ngModel)]=\"selection.regressionLines\" (change)=\"redrawChange()\">Fit Lines</mat-checkbox>\n\n        <mat-checkbox [(ngModel)]=\"selection.individualPhenometrics\" (change)=\"updateChange()\">Use Individual Phenometrics</mat-checkbox>\n\n    </div>\n    `,\n    styles: [`\n        year-range-input,\n        .phenophase-input-wrapper {\n            display: block;\n            margin-top: 15px;\n        }\n    `]\n})\nexport class ScatterPlotControls implements OnInit {\n    @Input()\n    selection: ScatterPlotSelection;\n    axis = AXIS;\n\n    updateSent:boolean = false;\n\n    ngOnInit() {\n        if(this.selection.plots.length === 0) {\n            this.addPlot();\n        }\n    }\n\n    updateChange() {\n        if(this.selection.isValid()) {\n            this.selection.update();\n            this.updateSent = true;\n        }\n    }\n\n    redrawChange(change) {\n        if(this.selection.isValid()) {\n            if(change && !change.oldValue && change.newValue) { // e.g. no color to a color means a plot that wasn't valid is now potentially valid.\n                this.updateChange();\n            } else {\n                if(this.updateSent) {\n                    this.selection.redraw();\n                } else {\n                    this.updateChange();\n                }\n            }\n        }\n    }\n\n    addPlot() {\n        this.selection.plots.push({});\n    }\n\n    removePlot(index:number) {\n        this.selection.plots.splice(index,1);\n        this.updateChange();\n    }\n\n    plotsValid() {\n        return this.selection.plots.length === this.selection.validPlots.length;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-controls.component.ts","import {Injectable,Inject} from '@angular/core';\nimport {Http} from '@angular/http';\nimport {CacheService,NpnConfiguration,NPN_CONFIGURATION} from '../../common';\n\nimport {ScatterPlotSelection} from './scatter-plot-selection';\n\n@Injectable()\nexport class ScatterPlotSelectionFactory {\n    constructor(protected http: Http,\n                protected cacheService: CacheService,\n                @Inject(NPN_CONFIGURATION) private config:NpnConfiguration) {}\n\n    newSelection(): ScatterPlotSelection {\n        return new ScatterPlotSelection(this.http,this.cacheService,this.config);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-selection-factory.service.ts","import {environment} from '../../environments/environment';\nimport {NULL_DATA,ONE_DAY_MILLIS,selectionProperty} from '../vis-selection';\nimport {SiteOrSummaryVisSelection} from '../site-or-summary-vis-selection';\nimport {URLSearchParams} from '@angular/http';\n\nimport {Species,Phenophase} from '../../common';\n\nimport * as d3 from 'd3';\n\nconst KEYS_TO_NORMALIZE  = {\n    daylength: 'mean_daylength',\n    acc_prcp: 'mean_accum_prcp',\n    gdd: 'mean_gdd'\n};\n\nexport const AXIS = [\n    {key: 'latitude', label: 'Latitude', axisFmt: d3.format('.2f')},\n    {key: 'longitude', label: 'Longitude', axisFmt: d3.format('.2f')},\n    {key:'elevation_in_meters',label:'Elevation (m)'},\n    {key:'fyy', label: 'Year'},\n\n    {key:'prcp_fall',label:'Precip Fall (mm)'},\n    {key:'prcp_spring',label:'Precip Spring (mm)'},\n    {key:'prcp_summer',label:'Precip Summer (mm)'},\n    {key:'prcp_winter',label:'Precip Winter (mm)'},\n\n    {key:'tmax_fall',label:'Tmax Fall (C\\xB0)'},\n    {key:'tmax_spring',label:'Tmax Spring (C\\xB0)'},\n    {key:'tmax_summer',label:'Tmax Summer (C\\xB0)'},\n    {key:'tmax_winter',label:'Tmax Winter (C\\xB0)'},\n\n    {key:'tmin_fall',label:'Tmin Fall (C\\xB0)'},\n    {key:'tmin_spring',label:'Tmin Spring (C\\xB0)'},\n    {key:'tmin_summer',label:'Tmin Summer (C\\xB0)'},\n    {key:'tmin_winter',label:'Tmin Winter (C\\xB0)'},\n\n    {key:'daylength',label:'Day Length (s)'},\n    {key:'acc_prcp',label:'Accumulated Precip (mm)'},\n    {key:'gdd',label:'AGDD'}\n];\n\n// NOTE: It's possible that the \"plot\" class here and the other\n// criteria like start/end should be hoisted into the parent class\n// which would probably mean the entirety of this class should go there\n// but it's not clear if that's the case without another visualization\n// making use of the same service/s to drive it...\nexport interface ScatterPlotSelectionPlot {\n    color?: string;\n    species?: Species;\n    phenophase?: Phenophase;\n    [x: string]: any;\n}\nconst TODAY = new Date();\n\nexport class ScatterPlotSelection extends SiteOrSummaryVisSelection {\n    @selectionProperty()\n    start: number = 2010;\n    @selectionProperty()\n    end: number;\n    @selectionProperty()\n    regressionLines: boolean = false;\n    @selectionProperty()\n    axis:any = AXIS[0];\n    @selectionProperty({\n        ser: d => {\n            return {\n                color: d.color,\n                species: d.species,\n                phenophase: d.phenophase\n            };\n        }\n    })\n    plots:ScatterPlotSelectionPlot[] = [];\n\n    private d3DateFormat = d3.timeFormat('%x');\n\n    isValid():boolean {\n        return this.start &&\n               this.end &&\n               (this.start < this.end) &&\n               this.validPlots.length > 0;\n    }\n\n    get validPlots():ScatterPlotSelectionPlot[] {\n        return this.plots.filter(p => p.color && p.species && p.phenophase);\n    }\n\n    toURLSearchParams(): URLSearchParams {\n        let params = new URLSearchParams();\n        params.set('climate_data','1');\n        params.set('request_src','npn-vis-scatter-plot');\n        params.set('start_date',`${this.start}-01-01`);\n        params.set('end_date',`${this.end}-12-31`);\n        // TODO - this typically comes from app wide configuration settings`\n        // is \"environment\" an ok place to bind this config, probably not\n        params.set('num_days_quality_filter',''+environment.appConfig.num_days_quality_filter);\n        this.validPlots.forEach((p,i) => {\n            params.set(`species_id[${i}]`,`${p.species.species_id}`);\n            params.set(`phenophase_id[${i}]`,`${p.phenophase.phenophase_id}`);\n        });\n        this.addNetworkParams(params);\n        return params;\n    }\n\n    doyDateFormat(doy:number):string {\n        let start = new Date(this.start,0,1),\n            time = ((doy-1)*ONE_DAY_MILLIS)+start.getTime(), // TODO, not enforcing that start/end be midnight on Jan 1\n            date = new Date(time);\n        return this.d3DateFormat(date);\n    }\n\n    // data access functions, not sure if the functionality here is too specific\n    // to the visualization of the resulting data so should be held somewhere else\n    // but it's here for now\n    getDoy(d): any {\n        return this.individualPhenometrics ? d.first_yes_doy : d.mean_first_yes_doy;\n    }\n\n    getFirstYesYear(d): any {\n        return this.individualPhenometrics ? d.first_yes_year : d.mean_first_yes_year;\n    }\n\n    axisData(d:any):number {\n        return d[this.axis.key];\n    }\n\n    axisNonNull(data:any[]): any[] {\n        return data.filter((d) => {\n            return this.axisData(d) !== NULL_DATA;\n        });\n    }\n\n    postProcessData(data:any[]):any[] {\n        let colorKey = (d) => { return `${d.species_id}:${d.phenophase_id}`},\n            colorMap = this.validPlots.reduce((map,p) => {\n                map[`${p.species.species_id}:${p.phenophase.phenophase_id}`] = p.color;\n                return map;\n            },{}),\n            startYear = this.start,\n            result = data.filter((d,i) => {\n                if(!(d.color = colorMap[colorKey(d)])) {\n                    // this can happen if a phenophase id spans two species but is only plotted for one\n                    // e.g. boxelder/breaking leaf buds, boxelder/unfolding leaves, red maple/breaking leaf buds\n                    // the service will return data for 'red maple/unfolding leaves' but the user hasn't requested\n                    // that be plotted so we need to discard this data.\n                    return false;\n                }\n                d.id = i;\n                d.fyy = this.getFirstYesYear(d);\n                for(let summaryKey in KEYS_TO_NORMALIZE) {\n                    let siteKey = KEYS_TO_NORMALIZE[summaryKey];\n                    if(typeof(d[summaryKey]) === 'undefined') {\n                        d[summaryKey] = d[siteKey];\n                    }\n                }\n                // this is the day # that will get plotted 1 being the first day of the start_year\n                // 366 being the first day of start_year+1, etc.\n                d.day_in_range = ((d.fyy-startYear)*365)+this.getDoy(d);\n                return true;\n            });\n            this.working = false;\n            return result;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot-selection.ts","import {Component, Input, ElementRef} from '@angular/core';\n\nimport {Window,SpeciesTitlePipe} from '../../common';\nimport {VisualizationMargins} from '../visualization-base.component';\nimport {SvgVisualizationBaseComponent,DEFAULT_MARGINS,FONT_SIZE,FONT_SIZE_PX} from '../svg-visualization-base.component';\n\nimport {ScatterPlotSelection} from './scatter-plot-selection';\n\nimport {Axis,axisBottom,axisLeft} from 'd3-axis';\nimport {Selection} from 'd3-selection';\nimport {ScaleLinear,scaleLinear} from 'd3-scale';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'scatter-plot',\n  templateUrl: '../svg-visualization-base.component.html',\n  styleUrls: ['../svg-visualization-base.component.scss'],\n  /*styles: [` // really because of the \"inline styles\" there's no big need to categorize things...\n      .visualization.ScatterPlotComponent {\n              border: 1px solid red;\n      }\n  `]*/\n})\nexport class ScatterPlotComponent extends SvgVisualizationBaseComponent {\n    @Input() selection : ScatterPlotSelection;\n\n    title: Selection<any,any,any,any>;\n\n    x: ScaleLinear<number,number>;\n    xAxis: Axis<number>;\n\n    y: ScaleLinear<number,number>;\n    yAxis: Axis<number>;\n\n    defaultAxisFormat = d3.format('d');\n    dateFormat = d3.timeFormat('%x');\n\n    filename:string = 'scatter-plot.png';\n    // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-1.html#object-spread-and-rest\n    // similar to _|angular.extend\n    margins: VisualizationMargins = {...DEFAULT_MARGINS, ...{top: 80,left: 60}};\n\n    private data:any[];\n\n    constructor(protected window: Window, protected rootElement: ElementRef, protected speciesTitle: SpeciesTitlePipe) {\n        super(window,rootElement);\n    }\n\n    protected reset(): void {\n        super.reset();\n        let chart = this.chart,\n            sizing = this.sizing;\n        this.title =  chart.append('g')\n                     .attr('class','chart-title')\n                     .append('text')\n                     .attr('y', '0')\n                     .attr('dy','-3em')\n                     .attr('x', (this.sizing.width/2))\n                     .style('text-anchor','middle')\n                     .style('font-size','18px');\n        this.x = scaleLinear().range([0,sizing.width]).domain([0,100]);\n        this.xAxis = axisBottom<number>(this.x).tickFormat((i) => {\n            // TODO\n            return this.defaultAxisFormat(i);\n        });\n        this.y = scaleLinear().range([sizing.height,0]).domain([1,365]);\n        this.yAxis = axisLeft<number>(this.y);\n\n        chart.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + sizing.height + ')')\n            .call(this.xAxis);\n\n        chart.append('g')\n            .attr('class', 'y axis')\n            .call(this.yAxis)\n          .append('text')\n          .attr('fill','#000') // somehow parent g has fill=\"none\"\n          .attr('transform', 'rotate(-90)')\n          .attr('y', '0')\n          .attr('dy','-3em')\n          .attr('x',-1*(sizing.height/2)) // looks odd but to move in the Y we need to change X because of transform\n          .style('text-anchor', 'middle')\n          .text('Onset Day of Year');\n\n        this.commonUpdates();\n    }\n\n    protected update(): void {\n        this.reset();\n        this.selection.getData().then((data) => {\n            this.data = data;\n            this.redraw();\n        })\n        .catch(e => this.handleError(e));\n    }\n\n    protected redrawSvg():void {\n        if(!this.data) {\n            return;\n        }\n        this.disclaimer = this.selection.filterDisclaimer;\n        let processedData = this.selection.postProcessData(this.data),\n            padding = 1,\n            selection = this.selection,\n            nonNullData = selection.axisNonNull(processedData),\n            getX = d => selection.axisData(d),\n            getY = d => selection.getDoy(d), // dataFunc\n            extent = d3.extent(nonNullData,getX),\n            formatXTickLabels = selection.axis.axisFmt||this.defaultAxisFormat;\n\n        this.title.text(`${selection.start} - ${selection.end}`);\n\n        this.x.domain([extent[0]-padding,extent[1]+padding]);\n        this.xAxis.scale(this.x).tickFormat(d3.format('.2f')); // TODO per-selection tick formatting\n        let xA = this.chart.selectAll('g .x.axis');\n        xA.call(this.xAxis.tickFormat(formatXTickLabels));\n        xA.selectAll('.axis-label').remove();\n        xA.append('text')\n          .attr('class','axis-label')\n          .attr('x',(this.sizing.width/2))\n          .attr('dy', '3em')\n          .attr('fill','#000')\n          .style('text-anchor', 'middle')\n          .style('font-size', '12px')\n          .text(this.selection.axis.label);\n\n        this.chart.selectAll('.circle').remove();\n        let circles = this.chart.selectAll('.circle').data(nonNullData,d => d.id)\n            .enter().append('circle')\n            .attr('class', 'circle')\n            .style('stroke','#333')\n            .style('stroke-width','1');\n\n        circles.attr('cx', d => this.x(getX(d)))\n              .attr('cy', d => this.y(getY(d)))\n              .attr('r', '5')\n              .attr('fill',d => d.color)\n              .on('click',d => {\n                    if (d3.event.defaultPrevented){\n                        return;\n                    }\n                    this.record = d;\n                })\n              .append('title')\n              .text(d => `${selection.doyDateFormat(d.day_in_range)} [${d.latitude},${d.longitude}]`);\n\n        this.chart.selectAll('.regression').remove();\n        selection.validPlots.forEach(plot => delete plot.regressionLine);\n        if(this.selection.regressionLines) {\n            let regressionLines = [];\n            selection.validPlots.forEach(plot => {\n                let series = nonNullData.filter(d => d.color === plot.color);\n                if(series.length) {\n                    regressionLines.push(plot.regressionLine = new RegressionLine(\n                        `${plot.species.species_id}.${plot.phenophase.phenophase_id}`,\n                        plot.color,\n                        series,\n                        getX, getY\n                    ));\n                }\n            });\n            let regression = this.chart.selectAll('.regression')\n                .data(regressionLines,d => d.id)\n                .enter().append('line')\n                .attr('class','regression');\n                regression\n                    //.attr('data-legend',function(d) { return d.legend; } )\n                    .attr('x1', d => this.x(d.p1[0]))\n                    .attr('y1', d => this.y(d.p1[1]))\n                    .attr('x2', d => this.x(d.p2[0]))\n                    .attr('y2', d => this.y(d.p2[1]))\n                    .attr('fill', d => d.color)\n                    .attr('stroke', d => d.color)\n                    .attr('stroke-width', 2);\n        }\n\n        // TODO abstract legend out to a class...\n        this.chart.select('.legend').remove();\n        let legend = this.chart.append('g')\n            .attr('class','legend')\n            .attr('transform','translate(0,-'+(this.sizing.margin.top-10)+')')\n            .style('font-size','1em'),\n            r = 5, vpad = 4;\n        this.selection.validPlots.forEach((plot,i) => {\n            let row = legend.append('g')\n                .attr('class','legend-item')\n                .attr('transform','translate(10,'+(((i+1)*(this.baseFontSize() as number))+(i*vpad))+')'),\n                title = this.speciesTitle.transform(plot.species)+'/'+plot.phenophase.phenophase_name;\n            if(plot.regressionLine && typeof(plot.regressionLine.r2) === 'number') {\n                // NOTE: the baseline-shift doesn't appear to work on Firefox\n                title += ` (R<tspan style=\"baseline-shift: super; font-size: 0.65em;\">2</tspan> ${plot.regressionLine.r2.toFixed(2)})`;\n            }\n            row.append('circle')\n                .attr('r',r)\n                .attr('fill',plot.color);\n            row.append('text')\n                .style('font-size',this.baseFontSize(true))\n                .attr('x',(2*4))\n                .attr('y',(r/2))\n                .html(title);\n        });\n\n        this.commonUpdates();\n    }\n}\n\nclass RegressionLine {\n    id: string;\n    color: string;\n    legend: string; // TODO\n    p1: number[];\n    p2: number[];\n    r2: number;\n\n    constructor(id: string, color: string, data: any[], getX, getY) {\n        let datas = data.sort(function(o1,o2){ // sorting isn't necessary but makes it easy to pick min/max x\n                return getX(o1) - getX(o2);\n            }),\n            isNumber = d => typeof(d) === 'number',\n            xSeries = datas.map(getX).filter(isNumber),\n            ySeries = datas.map(getY).filter(isNumber),\n            leastSquaresCoeff = this.leastSquares(xSeries,ySeries),\n            x1 = xSeries[0] as number,\n            y1 = this.approxY(leastSquaresCoeff,x1),\n            x2 = xSeries[xSeries.length-1] as number,\n            y2 = this.approxY(leastSquaresCoeff,x2);\n\n        this.id = id;\n        this.color = color;\n        this.p1 = [x1,y1];\n        this.p2 = [x2,y2];\n        this.r2 = leastSquaresCoeff[2];\n    }\n\n    leastSquares(xSeries,ySeries): [number,number,number] {\n        if(xSeries.length === 0 || ySeries.length === 0) {\n            return [Number.NaN,Number.NaN,Number.NaN];\n        }\n        let reduceSumFunc = function(prev, cur) { return prev + cur; };\n\n        let xBar = xSeries.reduce(reduceSumFunc) * 1.0 / xSeries.length;\n        let yBar = ySeries.reduce(reduceSumFunc) * 1.0 / ySeries.length;\n\n        let ssXX = xSeries.map(function(d) { return Math.pow(d - xBar, 2); })\n            .reduce(reduceSumFunc);\n\n        let ssYY = ySeries.map(function(d) { return Math.pow(d - yBar, 2); })\n            .reduce(reduceSumFunc);\n\n        let ssXY = xSeries.map(function(d, i) { return (d - xBar) * (ySeries[i] - yBar); })\n            .reduce(reduceSumFunc);\n\n        let slope = ssXY / ssXX;\n        let intercept = yBar - (xBar * slope);\n        let rSquare = Math.pow(ssXY, 2) / (ssXX * ssYY);\n\n        return [slope, intercept, rSquare];\n    }\n\n    approxY(leastSquaresCoeff,x): number {\n        // y = a + bx\n        let a = leastSquaresCoeff[1],\n            b = leastSquaresCoeff[0];\n        return a + (b*x);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/scatter-plot/scatter-plot.component.ts","import {Headers,Http,URLSearchParams} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport {CacheService,NpnConfiguration} from '../common';\nimport {environment} from '../environments/environment';\nimport {StationAwareVisSelection,selectionProperty} from './vis-selection';\n\nexport abstract class SiteOrSummaryVisSelection extends StationAwareVisSelection {\n    private headers = new Headers({'Content-Type':'application/x-www-form-urlencoded'});\n\n    @selectionProperty()\n    individualPhenometrics: boolean = false;\n    @selectionProperty()\n    filterDisclaimer: string;\n\n    constructor(protected http:Http,\n                protected cacheService:CacheService,\n                protected config:NpnConfiguration) {\n        super();\n    }\n\n    abstract toURLSearchParams(): URLSearchParams;\n\n    private filterSuspectSummaryData (d){\n        var bad = (d.latitude === 0.0 || d.longitude === 0.0 || d.elevation_in_meters < 0);\n        if(bad) {\n            console.warn('suspect station data',d);\n        }\n        return !bad;\n    }\n\n    private filterLqSummaryData (d) {\n        var keep = d.numdays_since_prior_no >= 0;\n        if(!keep) {\n            console.debug('filtering less precise data from summary output',d);\n        }\n        return keep;\n    }\n\n    private filterLqSiteData(d) {\n        var keep = d.mean_numdays_since_prior_no >= 0;\n        if(!keep) {\n            console.debug('filtering less precise data from site level output',d);\n        }\n        return keep;\n    }\n\n    getData(): Promise<Array<any>> {\n        if(!this.isValid()) {\n            return Promise.reject(this.INVALID_SELECTION);\n        }\n        let params = this.toURLSearchParams(), // TODO \"addCommonParams\"\n            url = `${this.config.apiRoot}/npn_portal/observations/${this.individualPhenometrics ? 'getSummarizedData': 'getSiteLevelData'}.json`,\n            cacheKey = {\n                u: url,\n                params: params.toString()\n            },\n            data:any[] = this.cacheService.get(cacheKey),\n            filterLqd = this.individualPhenometrics ?\n                (data) => { // summary\n                    let minusSuspect = data.filter(this.filterSuspectSummaryData),\n                        filtered = environment.appConfig.filterLqdSummary ?  minusSuspect.filter(this.filterLqSummaryData) : minusSuspect,\n                        individuals = filtered.reduce(function(map,d){\n                            var key = d.individual_id+'/'+d.phenophase_id+'/'+d.first_yes_year;\n                            map[key] = map[key]||[];\n                            map[key].push(d);\n                            return map;\n                        },{}),\n                        uniqueIndividuals = [];\n                    console.debug('filtered out '+(data.length-minusSuspect.length)+'/'+data.length+' suspect records');\n                    console.debug('filtered out '+(minusSuspect.length-filtered.length)+'/'+minusSuspect.length+' LQD records.');\n                    for(let key in individuals) {\n                        let arr = individuals[key];\n                        if(arr.length > 1) {\n                            // sort by first_yes_doy\n                            arr.sort(function(a,b){\n                                return a.first_yes_doy - b.first_yes_doy;\n                            });\n                        }\n                        // use the earliest record\n                        uniqueIndividuals.push(arr[0]);\n                    }\n                    console.debug('filtered out '+(filtered.length-uniqueIndividuals.length)+'/'+filtered.length+ ' individual records (preferring lowest first_yes_doy)');\n                    this.filterDisclaimer = (minusSuspect.length !== filtered.length) ?\n                        environment.appConfig.filterLqdDisclaimer : undefined;\n                    return filtered;\n                } :\n                (data) => { // site\n                    let minusSuspect = data.filter(this.filterSuspectSummaryData),\n                        filtered = environment.appConfig.filterLqdSummary ? minusSuspect.filter(this.filterLqSiteData) : minusSuspect;\n                    console.debug('filtered out '+(data.length-minusSuspect.length)+'/'+data.length+' suspect records');\n                    console.debug('filtered out '+(minusSuspect.length-filtered.length)+'/'+minusSuspect.length+' LQD records.');\n                    this.filterDisclaimer = (minusSuspect.length !== filtered.length) ?\n                        environment.appConfig.filterLqdDisclaimer : undefined;\n                    return filtered;\n                }\n\n        if(data) {\n            console.log('found in cache',data);\n            return Promise.resolve(filterLqd(data));\n        }\n        this.working = true;\n        return this.http.post(url,params.toString(),{headers: this.headers})\n            .toPromise()\n            .then(response => {\n                let arr = response.json() as any[]\n                this.cacheService.set(cacheKey,arr);\n                let filtered = filterLqd(arr);\n                this.working = false;\n                return filtered;\n            })\n            .catch(this.handleError);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/site-or-summary-vis-selection.ts","module.exports = \"<div class=\\\"vis-container\\\">\\n    <div class=\\\"vis-working\\\" *ngIf=\\\"selection.working\\\">\\n        <mat-progress-spinner mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n    </div>\\n    <div class=\\\"chart-container\\\">\\n        <visualization-download *ngIf=\\\"!thumbnail\\\" svgWrapperId=\\\"{{id}}\\\" filename=\\\"{{filename}}\\\"></visualization-download>\\n        <div [class]=\\\"clazz\\\" id=\\\"{{id}}\\\" [hidden]=\\\"thumbnailSrc\\\"><svg class=\\\"svg-visualization\\\"></svg></div>\\n        <div [hidden]=\\\"!thumbnailSrc\\\">\\n            <canvas class=\\\"thumbnail-canvas\\\" style=\\\"display: none;\\\"></canvas>\\n            <img class=\\\"thumbnail-image\\\" />\\n        </div>\\n\\n    </div>\\n    <div *ngIf=\\\"disclaimer && !thumbnail\\\" class=\\\"vis-disclaimer\\\">{{disclaimer}}</div>\\n</div>\\n<!--pre *ngIf=\\\"record\\\">{{record | json}}</pre-->\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.html\n// module id = ../../../../../../../../../../../../npn_common/visualizations/svg-visualization-base.component.html\n// module chunks = main","exports = module.exports = require(\"../../drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".vis-container {\\n  display: block;\\n  position: relative; }\\n  .vis-container .chart-container {\\n    position: relative; }\\n  .vis-container .visualization > svg,\\n  .vis-container img.thumbnail-image {\\n    border: 1px solid #000; }\\n  .vis-container .vis-disclaimer {\\n    margin-top: 5px;\\n    font-size: .75em;\\n    float: right; }\\n  .vis-container .vis-working {\\n    width: 100%;\\n    height: 100%;\\n    color: #fff;\\n    background-color: rgba(0, 0, 0, 0.25);\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    z-index: 2000;\\n    text-align: center; }\\n    .vis-container .vis-working i {\\n      margin-top: 15%; }\\n    .vis-container .vis-working mat-progress-spinner {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      -webkit-transform: translate(-50%, -50%);\\n              transform: translate(-50%, -50%); }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.scss\n// module id = ../../../../../../../../../../../../npn_common/visualizations/svg-visualization-base.component.scss\n// module chunks = main","import {Component,Input} from '@angular/core';\n\nimport {VisSelection,VisSelectionEvent} from './vis-selection';\nimport {VisualizationBaseComponent,VisualizationSizing,VisualizationMargins} from './visualization-base.component';\n\nimport {Selection} from 'd3-selection';\nimport * as d3 from 'd3';\n\nexport const DEFAULT_MARGINS:VisualizationMargins = {top: 20, right: 30, bottom: 60, left: 40};\nexport const FONT_SIZE:number = 14;\nexport const FONT_SIZE_PX:string = FONT_SIZE+'px';\n\n@Component({\n  selector: 'svg-visualization-base',\n  templateUrl: './svg-visualization-base.component.html',\n  styleUrls: ['./svg-visualization-base.component.scss']\n})\nexport abstract class SvgVisualizationBaseComponent extends VisualizationBaseComponent {\n    record: any;\n\n    disclaimer: string;\n\n    filename:string = 'visualization.png';\n\n    // wrapping element\n    visRoot: Selection<any,any,any,any>;\n    // svg element\n    svg: Selection<any,any,any,any>;\n    // base g element that the chart draws on\n    chart: Selection<any,any,any,any>;\n\n    margins: VisualizationMargins = DEFAULT_MARGINS;\n\n    protected minWidth:number = 700;\n    thumbnailSrc:any;\n\n    baseFontSize(withPx?:boolean): number | string {\n        let fs = FONT_SIZE;\n        if(this.sizing) {\n            if(this.sizing.width < 650) {\n                fs -=2;\n            }\n            if(this.sizing.width < 400) {\n                fs -= 2;\n            }\n        }\n        return withPx ? `${fs}px` : fs;\n    }\n\n    /**\n     * sub-classes should call after they have redrawn the visualization to get any\n     * common styling updates applied.\n     */\n    protected commonUpdates(): void {\n        let chart = this.chart,\n            fontSizePx = this.baseFontSize(true);\n\n        ['.axis path','.axis line'].forEach(selector =>\n            chart.selectAll(selector).style('fill','none')\n                .style('stroke','#000')\n                .style('shape-rendering','crispEdges'));\n\n        chart.selectAll('text')\n            .style('font-family','Arial');\n        chart.selectAll('g .axis text')\n            .style('font-size',fontSizePx);\n    }\n\n    /**\n     * `reset` is intended to initialize a visualziation to it's known \"clean\" state\n     * placing all common elements, etc.  Subclasses will almost certainly over-ride\n     * this implementation and call it to get the ball rolling.\n     *\n     * No asynchronous work should be done here, fetching data, etc. should happen\n     * only within `update`.\n     */\n    protected reset(): void {\n        let sizing = this.getSizeInfo(),\n            svg = this.svg;\n        // remove all children\n        svg.selectAll('*').remove();\n        // set size\n        svg.attr('width', sizing.width + sizing.margin.left + sizing.margin.right)\n            .attr('height', sizing.height + sizing.margin.top + sizing.margin.bottom);\n        svg.append('g')\n            .attr('class','vis-background')\n            .append('rect')\n            .attr('width','100%')\n            .attr('height','100%')\n            .attr('fill','#fff');\n        this.chart = svg.append('g')\n            .attr('transform',`translate(${sizing.margin.left},${sizing.margin.top})`)\n            .attr('class','vis-chart');\n\n        svg.append('g')\n            .attr('transform',`translate(10,${sizing.height+sizing.margin.top+sizing.margin.bottom-10})`)\n            .append('text')\n\t\t\t.attr('font-size', '11px')\n\t\t\t.attr('font-style','italic')\n\t\t\t.attr('text-anchor','right').text('USA National Phenology Network, www.usanpn.org');\n    }\n\n    protected resize(): void {\n        this.reset();\n        this.redraw();\n    }\n\n    // this used to be in ngAfterViewInit and most time it would succeed from there\n    // but very occasionally ngAfterViewInit would be called BEFORE the underlying\n    // elements exist in the DOM.  No time to understand cleanly why so these selections\n    // are now made whever asking about sizing which is the FIRST thing necessary to\n    // render an SVG visualization so it should be safe.\n    private selectElements() {\n        this.visRoot = d3.select('#'+this.id);\n        this.svg = this.visRoot.select('svg');\n    }\n\n    getSizeInfo(minWidth?:number): VisualizationSizing {\n        this.selectElements();\n        return super.getSizeInfo(this.minWidth);\n    }\n\n    /**\n     * IMPORTANT:\n     * Sub-classes should implement the redrawSvg and not over-ride redraw.\n     * If redraw is over-ridden the implementation  will lose the ability to\n     * dynamically replace themselves with a thumbnail should the screen\n     * realestate for the visualization get too small.\n     */\n    protected redraw(): void {\n        this.redrawSvg();\n        let sizeInfo = this.sizing,\n            w = sizeInfo.width + sizeInfo.margin.left + sizeInfo.margin.right;\n        if(w === this.minWidth) {\n            let native = this.rootElement.nativeElement as HTMLElement,\n                svg = native.querySelector('svg.svg-visualization') as SVGElement,\n                wrappedSvg = d3.select(svg),\n                canvas = native.querySelector('canvas.thumbnail-canvas') as HTMLCanvasElement,\n                img = native.querySelector('img.thumbnail-image') as HTMLImageElement,\n                wrappedImg = d3.select(img),\n                h = sizeInfo.height + sizeInfo.margin.top + sizeInfo.margin.bottom;\n            console.debug('SvgVisualizationBaseComponent: minWidth hit, replacing with generated thumbnail image.');\n            wrappedSvg.attr('version',1.1)\n                .attr('xmlns', 'http://www.w3.org/2000/svg');\n            let svgParent = svg.parentNode as HTMLElement,\n                html = svgParent.innerHTML;\n            canvas.width = +wrappedSvg.attr('width');\n            canvas.height = +wrappedSvg.attr('height');\n            wrappedImg.attr('width',sizeInfo.scaledWidth);\n            let context = canvas.getContext('2d'),\n                image = new Image();\n            image.onload = () => {\n                context.drawImage(image,0,0);\n                this.thumbnailSrc = img.src = canvas.toDataURL('image/png');\n            };\n            image.src = 'data:image/svg+xml;base64,'+ window.btoa(html);\n        } else {\n            this.thumbnailSrc = undefined;\n        }\n    }\n\n    /**\n     * SVG replacement for the redraw function.\n     */\n    protected abstract redrawSvg(): void;\n\n    ngAfterViewInit() {\n        this.selectElements();\n        // sets up common handlers\n        super.ngAfterViewInit();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/svg-visualization-base.component.ts","import {EventEmitter} from '@angular/core';\nimport {URLSearchParams} from '@angular/http';\nimport {Guid} from '../common';\n\nexport const NULL_DATA = -9999;\nexport const ONE_DAY_MILLIS:number = (24*60*60*1000);\n\nexport const enum VisSelectionEvent {\n    RESET, // go back to a \"clean\" slate\n    REDRAW, // assuming you have data simply re-draw with that data\n    UPDATE, // go get new data and reset/redraw\n    RESIZE, // short cut for reset/redraw\n}\n\n/*\n * A VisSelection is a jumble of properties and methods, not all of which should be serialized\n * and deserialized when [re]storing a selection to/from JSON.  In standard JavaScript this\n * could probably be dealt with cleanly via Object.defineProperty (and a big constructor) but\n * with TypeScript it's significantly more complicated.  For this reason all properties that\n * are part of what should be serialized for a given selection MUST be annotated with @selectionProperty()\n *\n * The virtual `external` property on a selection will produce a plain object representation\n * for a selection.  Assigning an object to the `external` property will deserialize it onto\n * the selection object.\n *\n * IMPORTANT: If a property key is prefixed with `_` it is assumed, by convention, that is the\n * internal representation of a virtual property of the same name without the leading `_`.\n * Such properties will be serialized without the leading `_` and when deserialized will be set\n * directly without the leading `_` so that any logic defined in the corresponding property setter\n * is run.\n */\nimport 'reflect-metadata';\nconst selectionPropertyMetadataKey = Symbol('npnSelectionProperty');\nconst IDENTITY = d => d;\n/**\n * Defines a property handler for a selection property.\n */\nexport class SelectionPropertyHandler {\n    /**\n     * A function that is used to serialize a property object.\n     * Takes as input an object and returns an object.\n     * Defaults to object identity.\n     */\n    ser?: Function;\n    /**\n     * A function that is used to serialize a property object.\n     * Takes as input an object and returns an object.\n     * Defaults to object identity.\n     */\n    des?: Function;\n}\n/**\n * Property decorator to indicate which properties of a selection should\n * be part of the external form of the selection.\n * E.g.\n * <pre>\n *   @selectionProperty()\n *   private s:string;\n *   @selectionProperty({des: d => new Date(d)})\n *   private date:Date;\n *   @selectionProperty({\n *     des: d => {\n *       let o = new MyClass();\n *       ... copy properties for d to o ...\n *       return o;\n *     },\n *     ser: d => d\n *   })\n *   private o:MyClass;\n * </pre>\n */\nexport const selectionProperty = (handler?:SelectionPropertyHandler) => {\n    let the_handler = {\n        ...{des: IDENTITY,ser:IDENTITY},\n        ...(handler||{})\n    };\n    return Reflect.metadata(selectionPropertyMetadataKey,the_handler);\n};\nconst isSelectionProperty = (target:any, propertyKey: string) => {\n    let meta = Reflect.getMetadata(selectionPropertyMetadataKey,target,propertyKey);\n    if(!meta) {\n        meta = Reflect.getMetadata(selectionPropertyMetadataKey,target,`_${propertyKey}`);\n    }\n    return meta;\n};\n// these are exported functions so that other classes can use similar\n// s11n/des11n functionality.\nexport function GET_EXTERNAL() {\n    let ext = {\n        $class: this.constructor.name\n    };\n    Object.keys(this).forEach(key => {\n        let handler = isSelectionProperty(this,key);\n        if(handler) {\n            let v = this[key];\n            if(/^_/.test(key)) {\n                key = key.substring(1);\n            }\n            if(Array.isArray(v)) {\n                ext[key] = v.map(d => handler.ser(d));\n            } else {\n                ext[key] = handler.ser(v);\n            }\n        }\n    });\n    return ext;\n};\nexport function SET_EXTERNAL(o) {\n    Object.keys(o).forEach(key => {\n        let handler = isSelectionProperty(this,key);\n        if(handler) {\n            let v = o[key];\n            if(typeof(v) !== 'undefined') {\n                if(Array.isArray(v)) {\n                    this[key] = v.map(d => handler.des(d));\n                } else {\n                    this[key] = handler.des(v);\n                }\n            } else {\n                this[key] = undefined;\n            }\n        }\n    });\n};\n\nexport const REJECT_INVALID_SELECTION = 'invalid selection';\n\n/**\n * Base class for visualization selection (user input).  A VisSelection is attached\n * to a specific visualization and the selection itself sends events to the visualization\n * to tell it when meaningful changes have happened and it should reset/redraw or update.\n *\n * The utility methods reset/redraw/update send instructions to the visualization.  These\n * functions can be called at any time, even before the selection has been wired to its\n * visualization.  Events will be held onto and delivered if/when the visualization has\n * subscribed.\n *\n * Note: EventEmitter does not have an unsubscribe (though it, today, extends RxJs Subject)\n * so technically does.  Should perhaps consider not extending Angular's EventEmitter\n */\nexport abstract class VisSelection extends EventEmitter<VisSelectionEvent> {\n    @selectionProperty()\n    guid:string = Guid.newGuid();\n    @selectionProperty()\n    meta:any = {}; // a place for non selection specific info to be held\n    debug:boolean = false;\n    working:boolean = false;\n    // this flag is not persisted but can be used by a visualization if it\n    // would like to have a control pick \"default state\" while the visualization\n    // is being built.\n    editMode:boolean = false;\n    [x: string]: any\n\n    readonly INVALID_SELECTION = REJECT_INVALID_SELECTION;\n\n    private lastEmit:any = {};\n    private firstSubscriberResolver:any;\n    private firstSubscriber:Promise<any> = new Promise<any>((resolve) => {\n        this.firstSubscriberResolver = resolve;\n    });\n\n    get external() { return GET_EXTERNAL.apply(this,arguments); }\n    set external(o) { SET_EXTERNAL.apply(this,arguments); }\n\n    /**\n     * Instruct the visualization to go back to a \"clean\" slate\n     */\n    reset(): void {\n        this.emit(VisSelectionEvent.RESET);\n    }\n\n    /**\n     * Instruct the visualization to redraw itself using the data it already\n     * has and the current state of the selection.\n     */\n    redraw(): void {\n        this.emit(VisSelectionEvent.REDRAW);\n    }\n\n    /**\n     * Instruct the visualization to go get new data and reset/redraw itself.\n     */\n    update(): void {\n        this.emit(VisSelectionEvent.UPDATE);\n    }\n\n    /**\n     * Instruct the visualization to resize itself.\n     */\n    resize(): void {\n        this.emit(VisSelectionEvent.RESIZE);\n    }\n\n    abstract isValid(): boolean;\n\n    protected handleError(e?:any):void {\n        console.error(e);\n        this.working = false;\n    }\n\n    // make sure no events go out until there is at least one subscriber to receive them.\n    emit(value?: VisSelectionEvent) {\n        var self = this,\n            emitArgs = arguments,\n            thisEmit:any = {\n                value: value,\n                when: Date.now(),\n                ext: JSON.stringify(this.external)\n            };\n        // throttle events on emit rather than requiring subscribers to do this.\n        // i.e. if the event being emitted differs from the last event emitted it\n        // always gets through.  events get pruned out if they are not distinct\n        // and happen within the specific interval\n        // e.g.\n        // selection.update(); selection.update(); selection.update();\n        // only the first will get through\n        // but selection.update() setTimeout(() => selection.update(),600);\n        // both will get through\n        if(this.lastEmit.value !== thisEmit.value || this.lastEmit.ext !== thisEmit.ext || this.lastEmit.when < (thisEmit.when-500)) {\n            this.lastEmit = thisEmit;\n            console.log('letting event through',thisEmit);\n            this.firstSubscriber.then(() => {\n                super.emit.apply(self,emitArgs);\n            });\n        } else {\n            console.log('pruned out redundant event',thisEmit);\n        }\n    }\n\n    subscribe(generatorOrNext?: any, error?: any, complete?: any): any {\n        // resolve the above promise..\n        this.firstSubscriberResolver();\n        return super.subscribe.apply(this,arguments);\n    }\n}\n\nexport abstract class NetworkAwareVisSelection extends VisSelection {\n    @selectionProperty()\n    networkIds?:any[] = [];\n\n    addNetworkParams(params:any):any {\n        if(params instanceof URLSearchParams) {\n            let p = params as URLSearchParams;\n            (this.networkIds||[]).forEach((id,i) => p.set(`network_id[${i}]`,`${id}`));\n        } else if (params && typeof(params) === 'object') {\n            (this.networkIds||[]).forEach((id,i) => params[`network_id[${i}]`] = `${id}`);\n        }\n        return params;\n    }\n}\n\nexport abstract class StationAwareVisSelection extends NetworkAwareVisSelection {\n    @selectionProperty()\n    stationIds?:any[] = [];\n\n    addNetworkParams(params:any):any {\n        super.addNetworkParams(params);\n        if(params instanceof URLSearchParams) {\n            let p = params as URLSearchParams;\n            (this.stationIds||[]).forEach((id,i) => p.set(`station_ids[${i}]`,`${id}`));\n        } else if (params && typeof(params) === 'object') {\n            (this.stationIds||[]).forEach((id,i) => params[`station_ids[${i}]`] = `${id}`);\n        }\n        return params;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/vis-selection.ts","module.exports = \"<div class=\\\"vis-container\\\">\\n    <div class=\\\"vis-working\\\" *ngIf=\\\"selection.working\\\">\\n        <mat-progress-spinner mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n    </div>\\n    <div class=\\\"chart-container\\\">\\n        <visualization-download svgWrapperId=\\\"{{id}}\\\" filename=\\\"{{filename}}\\\"></visualization-download>\\n        <div [class]=\\\"clazz\\\" id=\\\"{{id}}\\\"><svg></svg></div>\\n    </div>\\n    <div *ngIf=\\\"disclaimer\\\" class=\\\"vis-disclaimer\\\">{{disclaimer}}</div>\\n</div>\\n<pre *ngIf=\\\"record\\\">{{record | json}}</pre>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.html\n// module id = ../../../../../../../../../../../../npn_common/visualizations/visualization-base.component.html\n// module chunks = main","exports = module.exports = require(\"../../drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".vis-container {\\n  display: block;\\n  position: relative; }\\n  .vis-container .chart-container {\\n    position: relative; }\\n  .vis-container .visualization > svg {\\n    border: 1px solid #000; }\\n  .vis-container .vis-disclaimer {\\n    margin-top: 5px;\\n    font-size: .75em;\\n    float: right; }\\n  .vis-container .vis-working {\\n    width: 100%;\\n    height: 100%;\\n    color: #fff;\\n    background-color: rgba(0, 0, 0, 0.25);\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    z-index: 2000;\\n    text-align: center; }\\n    .vis-container .vis-working i {\\n      margin-top: 15%; }\\n    .vis-container .vis-working mat-progress-spinner {\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      -webkit-transform: translate(-50%, -50%);\\n              transform: translate(-50%, -50%); }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.scss\n// module id = ../../../../../../../../../../../../npn_common/visualizations/visualization-base.component.scss\n// module chunks = main","import {Component, Input, AfterViewInit, HostListener, ElementRef, OnDestroy} from '@angular/core';\n\nimport {Window} from '../common';\nimport {VisSelection,VisSelectionEvent,REJECT_INVALID_SELECTION} from './vis-selection';\n\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/operator/debounceTime';\n\nimport {Selection} from 'd3-selection';\nimport * as d3 from 'd3';\n\nexport const DEFAULT_MARGINS:VisualizationMargins = {top: 20, right: 30, bottom: 60, left: 40};\nexport const FONT_SIZE:number = 14;\nexport const FONT_SIZE_PX:string = FONT_SIZE+'px';\n\n@Component({\n  selector: 'visualization-base',\n  templateUrl: './visualization-base.component.html',\n  styleUrls: ['./visualization-base.component.scss']\n})\nexport abstract class VisualizationBaseComponent implements AfterViewInit, OnDestroy {\n    @Input()\n    selection: VisSelection;\n    @Input()\n    thumbnail:boolean = false;\n\n    id: string = 'visualization-'+Math.floor(Math.random()*1000);\n\n    sizing: VisualizationSizing;\n    clazz: string = 'visualization '+this.constructor.name;\n\n    margins: VisualizationMargins = {top: 0, right: 0, left: 0, bottom: 0};\n\n    private resizeSubscription:any;\n    private subscription:any;\n\n    constructor(protected window: Window, protected rootElement: ElementRef) {}\n\n    /**\n     * Calculates the dimensions (width based) that the visualization should\n     * be drawn to fit properly within the parent element.\n     */\n    getSizeInfo(minWidth?:number): VisualizationSizing {\n        let native = this.rootElement.nativeElement as HTMLElement,\n            parent = native.parentElement as HTMLElement,\n            ratioMult = 0.5376, // ratio based on initial w/h of 930/500\n            strToPx = s => parseInt(s.replace(/px$/,'')),\n            style = getComputedStyle(parent,null),\n            minusLeft = strToPx(style.paddingLeft)+strToPx(style.borderLeftWidth),\n            minusRight = strToPx(style.paddingRight)+strToPx(style.borderRightWidth),\n            innerWidth = parent.clientWidth - minusLeft - minusRight,\n            margin = this.margins,\n            cw = Math.floor(innerWidth),\n            scaledWidth = cw;\n        if(minWidth && cw < minWidth) {\n            cw = minWidth;\n        }\n        let ch = Math.floor(cw*ratioMult),\n            w = cw  - margin.left - margin.right,\n            h = ch  - margin.top - margin.bottom;\n        if(isNaN(w)) {\n            w = 0;\n        }\n        if(isNaN(h)) {\n            h = 0;\n        }\n        return (this.sizing={scaledWidth: scaledWidth, width: w, height : h, margin: margin});\n    }\n\n    /**\n     * `reset` is intended to initialize a visualziation to it's known \"clean\" state\n     * placing all common elements, etc.  Subclasses will almost certainly over-ride\n     * this implementation and call it to get the ball rolling.\n     *\n     * No asynchronous work should be done here, fetching data, etc. should happen\n     * only within `update`.\n     */\n    protected abstract reset(): void;\n\n    /**\n     * Called when the visualization should be redrawn from data already in hand\n     * using the current state of the selection.\n     */\n    protected abstract redraw():void;\n\n    /**\n     * Called when the visualization should go get new clean data, based on its\n     * selection, and reset/redraw itself.\n     */\n    protected abstract update():void;\n\n    /**\n     * Called when the visualization should resize itself.\n     */\n    protected abstract resize(): void;\n\n    ngAfterViewInit() {\n        console.debug('visualization.ngAfterViewInit');\n        // redraw and update the visualization on window re-size, debounce\n        // to avoid rapid redraws as the window is resized\n        // NOTE: there may be some stupid issue with IE11 and the window\n        // resize event.  Could perhaps use the @HostListener route below but\n        // that should then implement its own debounce (via setTimeout)\n        // and they seem to want to push the use of RxJs so this kind of thing\n        // feels cleaner.\n        this.resizeSubscription = Observable.fromEvent(window,'resize')\n            .debounceTime(500)\n            .subscribe((event) => {\n                this.resize();\n            });\n\n        // now that we're prepared to start listening to our selection for\n        // VisSelectionEvents.\n        this.subscription = this.selection\n            .subscribe((event) => {\n                switch(event) {\n                    case VisSelectionEvent.RESET:\n                        return this.reset();\n                    case VisSelectionEvent.REDRAW:\n                        return this.redraw();\n                    case VisSelectionEvent.UPDATE:\n                        return this.update();\n                    case VisSelectionEvent.RESIZE:\n                        return this.resize();\n                }\n            });\n    }\n\n    ngOnDestroy() {\n        console.debug('visualization.ngOnDestroy');\n        if(this.subscription) {\n            this.subscription.unsubscribe();\n        }\n        if(this.resizeSubscription) {\n            this.resizeSubscription.unsubscribe();\n        }\n    }\n\n    /* a way of capturing window events...\n    @HostListener('window:resize',['$event'])\n    onResize(event) {\n        this.redraw();\n    }*/\n\n    protected handleError(e?:any):void {\n        if(e && e !== REJECT_INVALID_SELECTION) {\n            console.error(e);\n        }\n    }\n}\n\nexport class VisualizationMargins {\n    top?: number;\n    right?: number;\n    bottom?: number;\n    left?: number;\n}\n\nexport class VisualizationSizing {\n    scaledWidth?: number;\n    width: number;\n    height: number;\n    margin: VisualizationMargins;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-base.component.ts","import {Component, Input} from '@angular/core';\n\nimport * as d3 from 'd3';\n\n@Component({\n    selector: 'visualization-download',\n    template: `\n    <div class=\"vis-download\">\n        <a href (click)=\"download($event)\" title=\"Download\"><i class=\"fa fa-download\"></i></a>\n        <canvas id=\"dlcanvas-{{svgWrapperId}}\" style=\"display: none;\"></canvas>\n        <a id=\"dllink-{{svgWrapperId}}\" style=\"display: none;\">download</a>\n    </div>\n    `,\n    styles: [`\n        .vis-download {\n            height: 28px;\n            width: 28px;\n            position: absolute;\n            right: 0px;\n            margin: 10px;\n            font-size: 1.5em;\n        }\n        .vis-download >a {\n            color: #000;\n            &:hover {\n                color: #000;\n            }\n        }\n    `]\n})\nexport class VisualizationDownloadComponent {\n    @Input() svgWrapperId: string;\n    @Input() filename: string;\n\n    download($event): void {\n        $event.preventDefault();\n\n        let svg = document.querySelector(`#${this.svgWrapperId} >svg`) as SVGElement,\n            wrappedSvg = d3.select(svg);\n        wrappedSvg.attr('version',1.1)\n            .attr('xmlns', 'http://www.w3.org/2000/svg');\n        let parent = svg.parentNode as HTMLElement,\n            html = parent.innerHTML,\n            imgsrc = 'data:image/svg+xml;base64,'+ window.btoa(html),\n            canvas = document.querySelector(`#dlcanvas-${this.svgWrapperId}`) as HTMLCanvasElement,\n            link = document.querySelector(`#dllink-${this.svgWrapperId}`) as HTMLAnchorElement;\n        canvas.width = +wrappedSvg.attr('width');\n        canvas.height = +wrappedSvg.attr('height');\n\n        let context = canvas.getContext('2d'),\n            image = new Image();\n        image.onload = () => {\n            context.drawImage(image,0,0);\n            let canvasdata = canvas.toDataURL('image/png');\n            link.download = this.filename;\n            link.href = canvasdata;\n            link.click();\n        };\n        image.src = imgsrc;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-download.component.ts","import {Injectable} from '@angular/core';\n\nimport {VisSelection} from './vis-selection';\nimport {ScatterPlotSelection,ScatterPlotSelectionFactory} from './scatter-plot';\nimport {CalendarSelection,CalendarSelectionFactory} from './calendar';\nimport {ActivityCurvesSelection,ActivityCurvesSelectionFactory} from './activity-curves';\nimport {ObserverActivitySelection,ObserverActivitySelectionFactory} from './observer-activity';\nimport {ObservationFrequencySelection,ObservationFrequencySelectionFactory} from './observation-frequency';\nimport {ClippedWmsMapSelection,ClippedWmsMapSelectionFactory} from './clipped-wms-map';\n\n@Injectable()\nexport class VisualizationSelectionFactory {\n    private factoryMap:any = {};\n\n    constructor(private calendar: CalendarSelectionFactory,\n                private scatter: ScatterPlotSelectionFactory,\n                private activity: ActivityCurvesSelectionFactory,\n                private observer: ObserverActivitySelectionFactory,\n                private observationFreq: ObservationFrequencySelectionFactory,\n                private clippedWmsMap: ClippedWmsMapSelectionFactory) {\n        this.factoryMap.CalendarSelection = calendar;\n        this.factoryMap.ScatterPlotSelection = scatter;\n        this.factoryMap.ActivityCurvesSelection = activity;\n        this.factoryMap.ObserverActivitySelection = observer;\n        this.factoryMap.ObservationFrequencySelection = observationFreq;\n        this.factoryMap.ClippedWmsMapSelection = clippedWmsMap;\n    }\n\n    newCalendarSelection():CalendarSelection {\n        return this.calendar.newSelection();\n    }\n\n    newScatterPlotSelection():ScatterPlotSelection {\n        return this.scatter.newSelection();\n    }\n\n    newActivityCurvesSelection():ActivityCurvesSelection {\n        return this.activity.newSelection();\n    }\n\n    newObserverActivitySelection():ObserverActivitySelection {\n        return this.observer.newSelection();\n    }\n    \n    newObservationFrequencySelection(): ObservationFrequencySelection {\n        return this.observationFreq.newSelection();\n    }\n\n    newClippedWmsMapSelection(): ClippedWmsMapSelection {\n        return this.clippedWmsMap.newSelection();\n    }\n\n    cloneSelection(selection:VisSelection): VisSelection {\n        return this.newSelection(selection.external);\n    }\n\n    newSelections(selections:any[]): VisSelection[] {\n        return selections.map(s => this.newSelection(s));\n    }\n\n    newSelection(selection:any): VisSelection {\n        if(!this.factoryMap[selection.$class]) {\n            throw new Error(`Unknown selection type \"${selection.$class}\"`);\n        }\n        let s:VisSelection = this.factoryMap[selection.$class].newSelection();\n        s.external = selection;\n        return s\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization-selection-factory.service.ts","import {Component,Input,OnInit} from '@angular/core';\n\nimport {VisSelection} from './vis-selection';\n\nimport {ScatterPlotSelection} from './scatter-plot';\nimport {CalendarSelection} from './calendar';\nimport {ActivityCurvesSelection} from './activity-curves';\nimport {ObserverActivitySelection} from './observer-activity';\nimport {ClippedWmsMapSelection} from './clipped-wms-map';\nimport {ObservationFrequencySelection} from './observation-frequency';\n\n// the idea here is that with Angular 2/4 there is no $compile functionality\n// so instead it's probably best to create an \"all knowing\" directive that\n// includes all possible visualizations and picks which to render based on\n// the type of selection it is given.\n@Component({\n    selector: 'npn-visualization',\n    template: `\n    <scatter-plot *ngIf=\"scatter\" [selection]=\"scatter\" [thumbnail]=\"thumbnail\"></scatter-plot>\n    <calendar *ngIf=\"calendar\" [selection]=\"calendar\"  [thumbnail]=\"thumbnail\"></calendar>\n    <activity-curves *ngIf=\"activity\" [selection]=\"activity\"  [thumbnail]=\"thumbnail\"></activity-curves>\n    <observer-activity *ngIf=\"observer\" [selection]=\"observer\" [thumbnail]=\"thumbnail\"></observer-activity>\n    <observation-frequency *ngIf=\"observationFreq\" [selection]=\"observationFreq\" [thumbnail]=\"thumbnail\"></observation-frequency>\n    <clipped-wms-map *ngIf=\"clippedWmsMap\" [selection]=\"clippedWmsMap\" [thumbnail]=\"thumbnail\"></clipped-wms-map>\n    <mat-expansion-panel *ngIf=\"selection.debug\">\n        <mat-expansion-panel-header>\n            <mat-panel-title>Selection</mat-panel-title>\n        </mat-expansion-panel-header>\n        <pre>{{selection.external | json}}</pre>\n    </mat-expansion-panel>\n    `,\n    styles: [`\n        pre {\n            font-family: \"courier new\";\n        }\n        mat-expansion-panel {\n            margin-top: 10px;\n        }\n    `]\n})\nexport class VisualizationComponent implements OnInit {\n    @Input()\n    thumbnail:boolean = false;\n\n    @Input()\n    selection: VisSelection;\n\n    private scatter: ScatterPlotSelection;\n    private calendar: CalendarSelection;\n    private activity: ActivityCurvesSelection;\n    private observer: ObserverActivitySelection;\n    private observationFreq: ObservationFrequencySelection;\n    private clippedWmsMap: ClippedWmsMapSelection;\n\n    ngOnInit() {\n        if(this.selection instanceof ScatterPlotSelection) {\n            this.scatter = this.selection;\n        } else if(this.selection instanceof CalendarSelection) {\n            this.calendar = this.selection;\n        } else if(this.selection instanceof ClippedWmsMapSelection) {\n            this.clippedWmsMap = this.selection;\n        } else if(this.selection instanceof ActivityCurvesSelection) {\n            this.activity = this.selection;\n        } else if(this.selection instanceof ObserverActivitySelection) {\n            this.observer = this.selection;\n        } else if (this.selection instanceof ObservationFrequencySelection) {\n            this.observationFreq = this.selection;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/npn_common/visualizations/visualization.component.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_gendir lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/$$_gendir lazy\n// module id = ../../../../../src/$$_gendir lazy recursive\n// module chunks = main","import {BrowserModule} from '@angular/platform-browser';\nimport {NgModule} from '@angular/core';\nimport {HttpModule} from '@angular/http';\n\nimport {NpnLibModule,NpnCommonModule,VisualizationsModule,NPN_BASE_HREF,NpnConfiguration,NPN_CONFIGURATION} from '../../node_modules/npn_common';\n\nimport {FocalSpeciesComponent} from './focal-species.component';\nimport {FindingsComponent} from './findings.component';\nimport {ResourcesComponent} from './resources.component';\nimport {RefugeDashboardComponent} from './refuge-dashboard.component';\nimport {NewVisualizationDialogComponent,NewVisualizationBuilderComponent,VisualizationScopeSelectionComponent} from './new-visualization-dialog.component';\nimport {RefugeService} from './refuge.service';\n\nimport {FormsModule,ReactiveFormsModule} from '@angular/forms';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {MatCheckboxModule,MatGridListModule,MatCardModule,MatListModule,\n        MatTooltipModule,MatSnackBarModule,MatDialogModule,MatStepperModule,\n        MatButtonModule,MatRadioModule,MatProgressSpinnerModule,MatSelectModule,\n        MatInputModule,MatFormFieldModule,MatTabsModule,MatButtonToggleModule} from '@angular/material';\n\nimport {environment} from '../../node_modules/npn_common/environments/environment';\nimport {AgmCoreModule} from '@agm/core';\n\nimport {DndModule} from 'ng2-dnd';\n\nexport declare var npn_base_href;\nexport declare var npn_configuration:NpnConfiguration;\n\n@NgModule({\n  declarations: [\n    RefugeDashboardComponent,\n    FocalSpeciesComponent,\n    FindingsComponent,\n    ResourcesComponent,\n    NewVisualizationBuilderComponent,\n    VisualizationScopeSelectionComponent,\n    NewVisualizationDialogComponent\n  ],\n  entryComponents: [\n      NewVisualizationDialogComponent\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    BrowserModule,\n    NpnLibModule,\n    VisualizationsModule,\n    NpnCommonModule,\n    HttpModule,\n    FormsModule,ReactiveFormsModule,\n    MatCheckboxModule,MatGridListModule,\n    MatCardModule,MatListModule,\n    MatTooltipModule,MatSnackBarModule,\n    MatDialogModule,MatStepperModule,\n    MatButtonModule,MatRadioModule,\n    MatProgressSpinnerModule,MatSelectModule,\n    MatInputModule,MatFormFieldModule,MatTabsModule,MatButtonToggleModule,\n    AgmCoreModule.forRoot({\n        apiKey: environment.googleMapsApiKey\n    }),\n    DndModule.forRoot()\n  ],\n  bootstrap: [RefugeDashboardComponent],\n  providers: [\n      RefugeService,\n      {provide:NPN_BASE_HREF,useValue:npn_base_href},\n      {provide:NPN_CONFIGURATION,useValue:npn_configuration}\n  ]\n})\nexport class AppModule { }\n\n/*\nlet noop = () => {};\nconsole.log = noop;\nconsole.debug = noop;\nconsole.info = noop;\n*/\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/app.module.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\n  position: relative;\\n  display: block; }\\n  :host.adminMode {\\n    /* if were not in another container would simply be $admin-width\\n           but the page content has its own padding so for now just picking\\n           a value that works */\\n    padding-left: 200px; }\\n\\n.visualizations {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-flow: row wrap;\\n          flex-flow: row wrap; }\\n  .visualizations mat-card {\\n    margin: 10px auto;\\n    padding: 20px;\\n    -webkit-box-flex: 0;\\n        -ms-flex: 0 1 28%;\\n            flex: 0 1 28%;\\n    /* a non flex layout attempt\\n        box-sizing: border-box;\\n        width: 100%;\\n        padding: 2px;\\n        margin: 10px 0px;\\n        display: block;\\n        @media(min-width: $screen-sm-min) {\\n            padding: 10px;\\n        }\\n        @media(min-width: $screen-md-min) {\\n            padding: 20px;\\n            display: inline-block;\\n            width: 48%;\\n            margin: 5px;\\n        }\\n        @media(min-width: $screen-lg-min) {\\n            width: 30%;\\n        }\\n\\n        &:first-of-type {\\n            @media(min-width: $screen-md-min) {\\n                margin: auto;\\n                display: block;\\n                width: 95%;\\n            }\\n        }*/\\n    vertical-align: top;\\n    position: relative;\\n    overflow: hidden; }\\n    .visualizations mat-card:first-of-type {\\n      -webkit-box-flex: 0;\\n          -ms-flex: 0 1 95%;\\n              flex: 0 1 95%;\\n      /* attempt to avoid jumpiness when switching the active visualization\\n               thisnumber is rough based on the above 95% width and the current site\\n               container width which doesn't appear to be adaptive (i.e. this will probably changed) */\\n      min-height: 670px; }\\n    .visualizations mat-card .visualization-title {\\n      font-size: 2em;\\n      margin-bottom: 10px;\\n      text-align: center; }\\n    .visualizations mat-card .visualization-description {\\n      color: #aaa;\\n      font-size: 0.8em;\\n      text-align: center; }\\n    .visualizations mat-card > .cover {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      z-index: 2;\\n      text-align: center; }\\n      .visualizations mat-card > .cover:hover {\\n        cursor: pointer;\\n        background-color: rgba(0, 0, 0, 0.25); }\\n        .visualizations mat-card > .cover:hover .visualization-title {\\n          display: inherit; }\\n      .visualizations mat-card > .cover .visualization-title {\\n        font-size: 1.25em;\\n        color: #fff;\\n        text-shadow: 1px 1px 2px #000;\\n        display: none;\\n        position: absolute;\\n        top: 50%;\\n        left: 50%;\\n        -webkit-transform: translate(-50%, -50%);\\n                transform: translate(-50%, -50%); }\\n    .visualizations mat-card.new-vis-placeholder {\\n      height: 200px;\\n      background-color: #eee; }\\n      .visualizations mat-card.new-vis-placeholder:before {\\n        content: 'Drop New Visualization Here';\\n        position: absolute;\\n        top: 50%;\\n        left: 50%;\\n        -webkit-transform: translate(-50%, -50%);\\n                transform: translate(-50%, -50%); }\\n\\nmat-list.new-vis-list {\\n  position: fixed;\\n  top: 55px;\\n  left: 0px;\\n  padding: 100px 0px 100px 5px;\\n  width: 320px;\\n  background-color: rgba(0, 0, 0, 0.25);\\n  z-index: 5000;\\n  height: 100vh;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n  -webkit-box-pack: start;\\n      -ms-flex-pack: start;\\n          justify-content: flex-start;\\n  -webkit-box-align: start;\\n      -ms-flex-align: start;\\n          align-items: flex-start;\\n  -ms-flex-line-pack: start;\\n      align-content: flex-start; }\\n  mat-list.new-vis-list mat-list-item {\\n    width: 150px;\\n    margin-right: 5px; }\\n    mat-list.new-vis-list mat-list-item.vis-template {\\n      border: 1px dotted black;\\n      margin-bottom: 10px; }\\n      mat-list.new-vis-list mat-list-item.vis-template /deep/ .mat-list-item-content {\\n        height: auto;\\n        padding: 0px; }\\n        mat-list.new-vis-list mat-list-item.vis-template /deep/ .mat-list-item-content img {\\n          width: 100%; }\\n    mat-list.new-vis-list mat-list-item.trash, mat-list.new-vis-list mat-list-item.save {\\n      position: relative;\\n      margin-top: 20px; }\\n      mat-list.new-vis-list mat-list-item.trash:before, mat-list.new-vis-list mat-list-item.save:before {\\n        font-family: 'FontAwesome';\\n        font-size: 2em;\\n        position: absolute;\\n        top: 50%;\\n        left: 50%;\\n        -webkit-transform: translate(-50%, -50%);\\n                transform: translate(-50%, -50%); }\\n    mat-list.new-vis-list mat-list-item.trash:before {\\n      content: '\\\\F1F8'; }\\n    mat-list.new-vis-list mat-list-item.save:hover {\\n      cursor: pointer; }\\n    mat-list.new-vis-list mat-list-item.save:before {\\n      content: '\\\\F0C7'; }\\n\\n.select-refuge {\\n  width: 400px; }\\n\\n.admin-toggle:before {\\n  font-family: 'FontAwesome';\\n  content: '\\\\F073';\\n  margin-right: 5px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/findings.component.scss\n// module id = ../../../../../src/app/findings.component.scss\n// module chunks = main","import {Component,OnInit,Input,ElementRef,HostBinding,Inject,Injectable,Optional} from '@angular/core';\nimport {MatSnackBar,MatDialog} from '@angular/material';\n\nimport {Refuge,RefugeService} from './refuge.service';\nimport {VisSelection,VisualizationSelectionFactory,NPN_BASE_HREF} from '../../node_modules/npn_common';\nimport {NewVisualizationDialogComponent} from './new-visualization-dialog.component';\n\nconst VIS_TEMPLATES = [{\n    $class: 'ActivityCurvesSelection',\n    $thumbnail: 'assets/activity-curves.png',\n    $tooltip: 'Add Activity Curves'\n},{\n    $class: 'ScatterPlotSelection',\n    $thumbnail: 'assets/scatter-plot.png',\n    $tooltip: 'Add Scatter Plot'\n},{\n    $class: 'CalendarSelection',\n    $thumbnail: 'assets/calendar.png',\n    $tooltip: 'Add Calendar'\n},{\n    $class: 'ObserverActivitySelection',\n    $thumbnail: 'assets/observer-activity.png',\n    $tooltip: 'Add Observer Activity Metrics'\n},{\n    $class: 'ClippedWmsMapSelection',\n    $thumbnail: 'assets/clipped-wms-map.png',\n    $tooltip: 'Add Map'\n},{\n    $class: 'ObservationFrequencySelection',\n    $thumbnail: 'assets/observation-frequency.png',\n    $tooltip: 'Add Observation Frequency'\n}];\n\n@Component({\n  selector: 'refuge-findings',\n  template: `\n<mat-list *ngIf=\"adminMode\" class=\"new-vis-list\">\n  <mat-list-item class=\"vis-template\"\n                *ngFor=\"let template of visTemplates\"\n                [matTooltip]=\"template.$tooltip\"\n                matTooltipPosition=\"right\"\n                dnd-draggable [dragData]=\"template\"\n                [dropZones]=\"['newvis-dropZone']\">\n    <img class=\"new-vis-thumbnail\" src=\"{{baseHref}}{{template.$thumbnail}}\" />\n  </mat-list-item>\n  <mat-list-item class=\"trash\"\n                matTooltip=\"Drag and drop visualization here to remove\"\n                dnd-droppable [dropZones]=\"['trash-dropZone']\"\n                (onDropSuccess)=\"trashVisualization($event)\"></mat-list-item>\n  <mat-list-item class=\"save\" *ngIf=\"isReordered()\" matTooltip=\"Save current visualization order\" (click)=\"save()\">\n  </mat-list-item>\n</mat-list>\n\n<div class=\"visualizations\" *ngIf=\"refuge\" dnd-sortable-container [sortableData]=\"refuge.selections\" [dropZones]=\"['list-dropZone','trash-dropZone']\" >\n    <mat-card  *ngFor=\"let selection of refuge.selections; first as isFirst; let i = index\"\n              dnd-sortable [sortableIndex]=\"i\"\n              [dragEnabled]=\"adminMode\"\n              [dragData]=\"selection\"\n              (onDragStart)=\"dragStart($event)\"\n              (onDropSuccess)=\"reorderVisualizations()\">\n        <div *ngIf=\"!isFirst\" class=\"cover\" (click)=\"makeCurrent(selection)\">\n            <span class=\"visualization-title\">{{selection.meta.title}}</span>\n        </div>\n        <div *ngIf=\"isFirst\" class=\"visualization-details\">\n            <div class=\"visualization-title\">{{selection.meta.title}}</div>\n            <p *ngIf=\"selection.meta.description\" class=\"visualization-description\">{{selection.meta.description}}</p>\n        </div>\n        <npn-visualization [selection]=\"selection\" [thumbnail]=\"i > 0\"></npn-visualization>\n    </mat-card>\n    <mat-card *ngIf=\"adminMode && refuge.selections.length < maxVisualizations\" class=\"new-vis-placeholder\"\n        dnd-droppable [dropZones]=\"['newvis-dropZone']\"\n        (onDropSuccess)=\"addVisualization($event)\"></mat-card>\n</div>\n<mat-button-toggle *ngIf=\"userIsAdmin\" (change)=\"toggleAdminMode($event)\"><span class=\"admin-toggle\">Customize</span></mat-button-toggle>\n<!--mat-checkbox *ngIf=\"userIsAdmin\" [(ngModel)]=\"adminMode\" (change)=\"resizeAllAfterDelay()\">Admin mode</mat-checkbox-->\n  `,\n  styleUrls: ['./findings.component.scss']\n})\nexport class FindingsComponent implements OnInit {\n    @Input()\n    refuge:Refuge;\n    @Input()\n    userIsAdmin:boolean = false;\n\n    trash:VisSelection[] = [];\n\n    @HostBinding('class.adminMode') adminMode:boolean = false;\n    maxVisualizations:number = 7;\n    visTemplates:any[] = VIS_TEMPLATES;\n    guidOrder:string[];\n    dragStartIndex:number;\n\n    constructor(private refugeService:RefugeService,\n                private selectionFactory: VisualizationSelectionFactory,\n                public dialog: MatDialog,\n                private snackBar: MatSnackBar,\n                @Optional() @Inject(NPN_BASE_HREF) private baseHref?: string) {\n    }\n\n    toggleAdminMode($event) {\n        this.adminMode = !this.adminMode;\n        this.resizeAllAfterDelay();\n    }\n\n    setRefuge(refuge:Refuge) {\n        this.refuge = refuge;\n        refuge.selections.forEach((s,i) => {\n            //s.debug = (i === 0);\n            s.update()\n        });\n        this.guidOrder = refuge.selections.map(s => s.guid);\n    }\n\n    ngOnInit() {\n        this.setRefuge(this.refuge);\n    }\n\n    resizeAll() {\n        this.refuge.selections.forEach((s,i) => {\n            //s.debug = i === 0;\n            s.resize()\n        });\n    }\n\n    resizeAllAfterDelay() {\n        setTimeout(() => {\n            this.resizeAll();\n        });\n    }\n\n    makeCurrent(s:VisSelection) {\n        let selections = this.refuge.selections,\n            index = selections.indexOf(s);\n        if(index) {\n            console.log('MAKE CURRENT',index);\n            // swap the currently selected with the newly selected\n            selections[index] = selections[0];\n            selections[0] = s;\n            this.reorderVisualizations();\n        }\n    }\n\n    addVisualization($event){\n        console.log('add.$event',$event);\n        let s = this.selectionFactory.newSelection($event.dragData);\n        console.log('add.selection',s);\n        let dialogRef = this.dialog.open(NewVisualizationDialogComponent,{\n            height: '90vh',\n            width: '90vw',\n            disableClose: true,\n            data: {\n                refuge: this.refuge,\n                selection: s\n            }\n        });\n        dialogRef.afterClosed().subscribe(selection => {\n            if(selection) {\n                this.refuge.selections.push(selection);\n                this.save();\n            }\n        });\n    }\n\n    isReordered() {\n        if(this.guidOrder && this.guidOrder.length === this.refuge.selections.length) {\n            return this.refuge.selections.reduce((reordered,s,i) => {\n                return reordered||(s.guid !== this.guidOrder[i] ? true: false);\n            },false);\n        }\n        return false;\n    }\n\n    reorderVisualizations() {\n        setTimeout(() => {\n            this.resizeAll();\n        });\n    }\n\n    save(noSnackBar?:boolean) {\n        this.refugeService.saveRefuge(this.refuge)\n            .then(refuge => {\n                this.setRefuge(refuge)\n                if(!noSnackBar) {\n                    this.snackBar.open('Visualizations saved',null,{duration:2000});\n                }\n            })\n            .catch(e => this.handleError(e));\n    }\n\n    // capture where a selection was at drag start so it can be restored to its position\n    // for undo trash\n    dragStart($event) {\n        // this seems inconstent but it seems that $event in the onDragStart/End\n        // events is the dragData, unlike onDragSuccess\n        this.dragStartIndex = $event ? this.refuge.selections.indexOf($event) : undefined;\n        console.log('dragStart.$event',$event,this.dragStartIndex);\n    }\n\n    trashVisualization($event) {\n        console.log('trash.$event',$event);\n        let selection = $event.dragData,\n            index = this.refuge.selections.indexOf(selection);\n        console.log(`trashing selection ${index}`);\n        this.refuge.selections.splice(index,1);\n        this.refugeService.saveRefuge(this.refuge)\n            .then(refuge => {\n                this.setRefuge(refuge);\n                this.snackBar.open('Visualization Deleted','Undo',{\n                        duration: 5000,\n                    }).onAction().subscribe(() => {\n                        // issue because of the drag re-order selections normally get put back\n                        // at index #1, may need to keep track of index on selection object\n                        // change on resize or some such\n                        index = typeof(this.dragStartIndex) !== 'undefined' ? this.dragStartIndex : index;\n                        console.log(`restoring selection ${index}`);\n                        this.refuge.selections.splice(index,0,this.selectionFactory.cloneSelection(selection));\n                        this.save(true);\n                    });\n            })\n            .catch(e => this.handleError(e));\n    }\n\n    handleError(e?:any) {\n        console.error(e);\n        this.snackBar.open('Something went wrong',null,{duration: 5000});\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/findings.component.ts","import {Component,Input,OnChanges,SimpleChanges} from '@angular/core';\n\nimport {Species,SpeciesService,SpeciesTitlePipe} from '../../node_modules/npn_common';\nimport {Refuge,RefugeService} from './refuge.service';\n\n@Component({\n    selector: 'focal-species',\n    template:`\n    <div *ngIf=\"refuge\">\n        <h3>Focal Species for {{refuge.title}}</h3>\n        <ul *ngIf=\"speciesList && speciesList.length\">\n            <li *ngFor=\"let s of speciesList\">\n            <a target=\"_blank\" [href]=\"'https://usanpn.org/nn/'+s.genus+'_'+s.species\">{{s | speciesTitle:'common-name'}} ({{s | speciesTitle:'scientific-name'}})</a>\n            </li>\n        </ul>\n    </div>\n    `\n})\nexport class FocalSpeciesComponent implements OnChanges {\n    @Input()\n    refuge:Refuge;\n\n    speciesList:Species[];\n\n    constructor(private speciesService:SpeciesService) {\n\n    }\n\n    ngOnChanges(changes:SimpleChanges) {\n        if(changes.refuge && changes.refuge.currentValue) {\n            this.speciesService.getAllSpecies({'network_id[0]':changes.refuge.currentValue.network_id})\n                .then(list => this.speciesList = list)\n                .catch(e => console.error(e));\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/focal-species.component.ts","import {Component,Inject,Input,OnInit} from '@angular/core';\nimport {MAT_DIALOG_DATA,MatDialogRef} from '@angular/material';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\n\nimport {Refuge} from './refuge.service';\nimport {VisSelection,NetworkService,NetworkAwareVisSelection,StationAwareVisSelection,\n        ActivityCurvesSelection,ScatterPlotSelection,CalendarSelection,\n        ObserverActivitySelection,ObservationFrequencySelection,ClippedWmsMapSelection} from '../../node_modules/npn_common';\n\n@Component({\n    selector: 'new-vis-dialog',\n    template: `\n    <!-- for \"station aware\" visualizations display a multi-step process -->\n    <mat-horizontal-stepper (selectionChange)=\"stepChanged($event)\">\n        <mat-step *ngIf=\"stationAware\" [stepControl]=\"step1FormGroup\" label=\"Choose scope\">\n            <div>\n                <div>\n                    <visualization-scope-selection [selection]=\"selection\" [refuge]=\"refuge\"></visualization-scope-selection>\n                    <div>\n                        <button mat-button (click)=\"dialogRef.close()\">Cancel</button>\n                        <button mat-button matStepperNext>Next</button>\n                    </div>\n                </div>\n            </div>\n        </mat-step>\n\n        <mat-step [stepControl]=\"step2FormGroup\" label=\"Build visualization\">\n            <div *ngIf=\"showVis\">\n                <new-visualization-builder [selection]=\"selection\" [refuge]=\"refuge\"></new-visualization-builder>\n                <div>\n                    <button mat-button (click)=\"dialogRef.close()\">Cancel</button>\n                    <button *ngIf=\"stationAware\"  mat-button matStepperPrevious>Back</button>\n                    <button mat-button matStepperNext>Next</button>\n                </div>\n            </div>\n        </mat-step>\n\n        <mat-step [stepControl]=\"step3FormGroup\" label=\"Visualization details\">\n            <div *ngIf=\"showDetails\">\n                <mat-form-field class=\"visualization-title\">\n                    <input matInput placeholder=\"Visualization title\" [(ngModel)]=\"selection.meta.title\" required />\n                </mat-form-field>\n                <mat-form-field class=\"visualization-description\">\n                    <textarea matInput placeholder=\"Visualization description\" [(ngModel)]=\"selection.meta.description\"></textarea>\n                </mat-form-field>\n                <div>\n                    <button mat-button (click)=\"dialogRef.close()\">Cancel</button>\n                    <button mat-button matStepperPrevious>Back</button>\n                    <button mat-button (click)=\"dialogRef.close(selection)\" [disabled]=\"!selection.meta.title || !selection.isValid()\">Add</button>\n                </div>\n            </div>\n        </mat-step>\n    </mat-horizontal-stepper>\n    `,\n    styles: [`\n        .visualization-title,\n        .visualization-description {\n            display: block;\n            width: 100%;\n        }\n        .visualization-description textarea {\n            height: 5em;\n        }\n    `]\n})\nexport class NewVisualizationDialogComponent implements OnInit {\n    private stationAware:boolean;\n    private step1FormGroup: FormGroup;\n    private step2FormGroup: FormGroup;\n    private step3FormGroup: FormGroup;\n    private showVis:number;\n    private showDetails:boolean;\n\n    private refuge:Refuge;\n    private selection: VisSelection;\n\n    constructor(private formBuilder: FormBuilder,\n                private dialogRef: MatDialogRef<NewVisualizationDialogComponent>,\n                @Inject(MAT_DIALOG_DATA) private data:any) {\n        this.step1FormGroup = this.formBuilder.group({\n            firstCtrl: ['',Validators.required]\n        });\n        this.step2FormGroup = this.formBuilder.group({\n            secondCtrl: ['',Validators.required]\n        });\n        this.step3FormGroup = this.formBuilder.group({\n            thirdCtrl: ['',Validators.required]\n        });\n        this.selection = data.selection as VisSelection;\n        this.refuge = data.refuge;\n    }\n\n    ngOnInit() {\n        let s = this.selection;\n        s.editMode = true;\n        //s.debug = true; // uncomment to show the selection for dev purposes\n        // NOTE: TS support for interfaces doesn't extend to actual runtime type\n        // introspection.  VisSelection has class extensions Network/StationAwareVisSelection\n        // that selections can extend, if use cases get more complex then may instead need\n        // to use the `'stationIds' in s` kind of logic instead.\n        this.stationAware = s instanceof StationAwareVisSelection;// || 'stationIds' in s;\n        this.showVis = !this.stationAware ? 1 : 0;\n        if(s instanceof NetworkAwareVisSelection) {\n            s.networkIds = [this.refuge.network_id];\n        }\n    }\n\n    stepChanged($event) {\n        let visIndex = !this.stationAware ? 0 : 1;\n        console.debug(`NewVisualizationDialogComponent:stepChanged visIndex=${visIndex}`,$event);\n        if($event.selectedIndex === visIndex) {\n            this.showVis++;\n            setTimeout(() => {\n                if(this.showVis === 1 || !this.selection.isValid()) {\n                    this.selection.resize()\n                } else {\n                    this.selection.update();\n                }\n            });\n        }\n        this.showDetails = $event.selectedIndex === (visIndex+1);\n    }\n}\n\n@Component({\n    selector: 'new-visualization-builder',\n    template: `\n    <activity-curves-control  *ngIf=\"activity\" [selection]=\"activity\"></activity-curves-control>\n    <scatter-plot-control *ngIf=\"scatter\" [selection]=\"scatter\"></scatter-plot-control>\n    <calendar-control *ngIf=\"calendar\" [selection]=\"calendar\"></calendar-control>\n    <observer-activity-control *ngIf=\"observer\" [selection]=\"observer\"></observer-activity-control>\n    <observation-frequency-control *ngIf=\"observationFreq\" [selection]=\"observationFreq\"></observation-frequency-control>\n    <clipped-wms-map-control *ngIf=\"clipped\" [selection]=\"clipped\"></clipped-wms-map-control>\n\n    <npn-visualization *ngIf=\"selection\" [selection]=\"selection\"></npn-visualization>\n    `,\n    styles:[`\n        npn-visualization {\n            margin-top: 20px;\n            width: 98%; // within stepper o/w horizontal scroll\n        }\n    `]\n})\nexport class NewVisualizationBuilderComponent implements OnInit {\n    @Input()\n    private selection: VisSelection;\n    @Input()\n    private refuge: Refuge;\n\n    private scatter: ScatterPlotSelection;\n    private calendar: CalendarSelection;\n    private activity: ActivityCurvesSelection;\n    private observer: ObserverActivitySelection;\n    private observationFreq: ObservationFrequencySelection;\n    private clipped: ClippedWmsMapSelection;\n\n    ngOnInit() {\n        let s = this.selection;\n        //s.debug = true;\n        if(s instanceof ActivityCurvesSelection) {\n            this.activity = s;\n        } else if(s instanceof ScatterPlotSelection) {\n            this.scatter = s;\n        } else if(s instanceof CalendarSelection) {\n            this.calendar = s;\n        } else if (s instanceof ObserverActivitySelection) {\n            this.observer = s;\n        } else if (s instanceof ObservationFrequencySelection) {\n            this.observationFreq = s;\n        } else if (s instanceof ClippedWmsMapSelection) {\n            this.clipped = s;\n            s.fwsBoundary = this.refuge.boundary_id;\n        }\n        s.resize();\n    }\n}\n\n@Component({\n    selector: 'visualization-scope-selection',\n    template: `\n    <mat-radio-group name=\"visScope\" class=\"vis-scope-input\" [(ngModel)]=\"visScope\" (change)=\"scopeChanged()\">\n      <!--mat-radio-button class=\"vis-scope-radio\" [value]=\"'all'\">No restrictions</mat-radio-button-->\n      <mat-radio-button class=\"vis-scope-radio\" [value]=\"'refuge'\">Restrict visualization to \"{{refuge.title}}\"</mat-radio-button>\n      <mat-radio-button class=\"vis-scope-radio\" [value]=\"'station'\">Restrict visualization to one or more stations at \"{{refuge.title}}\"</mat-radio-button>\n    </mat-radio-group>\n    <mat-progress-spinner *ngIf=\"stationFetch\" mode=\"indeterminate\"></mat-progress-spinner>\n    <div *ngIf=\"visScope === 'station' && stations && stations.length\">\n        <mat-checkbox *ngFor=\"let s of stations\" class=\"station-input\" [(ngModel)]=\"s.selected\" (change)=\"stationChange()\">{{s.station_name}}</mat-checkbox>\n    </div>\n    `,\n    styles:[`\n        .vis-scope-input {\n          display: inline-flex;\n          flex-direction: column;\n        }\n        .vis-scope-radio {\n          margin: 5px;\n        }\n        .station-input {\n            display: block;\n        }\n    `]\n})\nexport class VisualizationScopeSelectionComponent {\n    @Input()\n    private selection: VisSelection;\n    @Input()\n    private refuge: Refuge;\n\n    private visScope:string = 'refuge';\n    private stationFetch:boolean = false;\n    private stations:any[];\n\n    constructor(private networkService:NetworkService) {}\n\n    scopeChanged() {\n        this.selection.networkIds = [];\n        this.selection.stationIds = [];\n        switch(this.visScope) {\n            case 'all':\n                break;\n            case 'refuge':\n                this.selection.networkIds = [this.refuge.network_id];\n                break;\n            case 'station':\n                this.selection.networkIds = [this.refuge.network_id];\n                if(!this.stations) {\n                    this.stationFetch = true;\n                    this.networkService.getStations(this.refuge.network_id)\n                        .then(stations => {\n                            this.stations = stations;\n                            this.stationFetch = false;\n                        })\n                        .catch(e => {\n                            this.stationFetch = false;\n                            console.error(e);\n                        });\n                }\n                break;\n        }\n    }\n\n    stationChange() {\n        this.selection.stationIds = this.stations.filter(s => s.selected).map(s => s.station_id);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/new-visualization-dialog.component.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\n  display: block;\\n  background-color: transparent;\\n  /* when content goes away for a flash avoid dashboard height shrinking and making the page jump around. */\\n  min-height: 896px; }\\n\\n/deep/ .mat-tab-header {\\n  border-bottom: none; }\\n  /deep/ .mat-tab-header .mat-ink-bar {\\n    display: none; }\\n  /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label {\\n    height: 96px;\\n    opacity: 1;\\n    color: #fff;\\n    padding: 0px;\\n    background-color: transparent; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label > .rd-tab-label {\\n      display: block;\\n      padding: 0px;\\n      height: 100%; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:focus {\\n      background-color: transparent; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label.mat-tab-label-active {\\n      color: orange; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(1) > .rd-tab-label {\\n      background-color: #271614;\\n      padding-left: 24px; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(1)::after {\\n      content: '';\\n      border-top: 48px solid #3f322b;\\n      border-right: 48px solid #3f322b;\\n      border-bottom: 48px solid #271614;\\n      border-left: 48px solid #271614; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(2) > .rd-tab-label {\\n      background-color: #3f322b; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(2)::after {\\n      content: '';\\n      border-top: 48px solid #574d3f;\\n      border-right: 48px solid #574d3f;\\n      border-bottom: 48px solid #3f322b;\\n      border-left: 48px solid #3f322b; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(3) > .rd-tab-label {\\n      background-color: #574d3f; }\\n    /deep/ .mat-tab-header .mat-tab-labels > .mat-tab-label:nth-of-type(3)::after {\\n      content: '';\\n      border-top: 48px solid transparent;\\n      border-right: 48px solid transparent;\\n      border-bottom: 48px solid #574d3f;\\n      border-left: 48px solid #574d3f; }\\n\\n.rd-tab-label {\\n  position: relative;\\n  text-transform: uppercase; }\\n  .rd-tab-label > label {\\n    color: inherit;\\n    margin-top: 3.25em; }\\n  .rd-tab-label:before {\\n    font-family: 'FontAwesome';\\n    position: absolute;\\n    top: 0.5em;\\n    right: 50%;\\n    -webkit-transform: translateX(-50%);\\n            transform: translateX(-50%);\\n    font-size: 2em; }\\n  .rd-tab-label.focal-species:before {\\n    right: 25%;\\n    content: '\\\\F1B0'; }\\n  .rd-tab-label.findings:before {\\n    content: '\\\\F002'; }\\n  .rd-tab-label.resources:before {\\n    content: '\\\\F02D'; }\\n\\n.rd-tab-content {\\n  min-height: 800px;\\n  padding: 20px;\\n  color: #000;\\n  border-left: 2px solid #ddd;\\n  border-right: 2px solid #ddd;\\n  background-color: #fff; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge-dashboard.component.scss\n// module id = ../../../../../src/app/refuge-dashboard.component.scss\n// module chunks = main","import {Component,OnInit,ElementRef,ViewChild} from '@angular/core';\n\nimport {FindingsComponent} from './findings.component';\nimport {Refuge,RefugeService} from './refuge.service';\n\nimport {MatTabChangeEvent} from '@angular/material';\n\n@Component({\n  selector: 'refuge-dashboard',\n  template: `\n  <mat-tab-group class=\"refuge-dashboard-tabs\" (selectedTabChange)=\"selectedTabChange($event)\">\n    <mat-tab label=\"Focal Species\">\n        <ng-template mat-tab-label>\n            <div class=\"rd-tab-label focal-species\">\n                <label>Focal Species</label>\n            </div>\n        </ng-template>\n        <div class=\"rd-tab-content\" *ngIf=\"renderFocalSpecies\">\n            <focal-species [refuge]=\"refuge\"></focal-species>\n        </div>\n    </mat-tab>\n\n    <mat-tab label=\"What we're finding\">\n        <ng-template mat-tab-label>\n            <div class=\"rd-tab-label findings\">\n                <label>What we're finding</label>\n            </div>\n        </ng-template>\n        <div class=\"rd-tab-content\" *ngIf=\"renderVisualizations\">\n            <refuge-findings *ngIf=\"refuge\" [refuge]=\"refuge\" [userIsAdmin]=\"userIsAdmin\"></refuge-findings>\n        </div>\n    </mat-tab>\n\n    <mat-tab label=\"Resources for observers\">\n        <ng-template mat-tab-label>\n            <div class=\"rd-tab-label resources\">\n                <label>Resources for observers</label>\n            </div>\n        </ng-template>\n        <div class=\"rd-tab-content\" *ngIf=\"renderResources\">\n            <refuge-resources [refuge]=\"refuge\"></refuge-resources>\n        </div>\n    </mat-tab>\n  </mat-tab-group>\n  `,\n  styleUrls: ['./refuge-dashboard.component.scss']\n})\nexport class RefugeDashboardComponent implements OnInit {\n    refuge_id:string;\n    refuge:Refuge;\n    userIsAdmin:boolean = false;\n\n    renderFocalSpecies:boolean = true;\n    renderVisualizations:boolean = false;\n    renderResources:boolean = false;\n\n    @ViewChild(FindingsComponent)\n    private findingsComponent:FindingsComponent;\n\n    constructor(private element:ElementRef,\n                private refugeService:RefugeService) {\n        let e = element.nativeElement as HTMLElement;\n        this.refuge_id = e.getAttribute('refuge_id');\n        this.userIsAdmin = e.getAttribute('user_is_admin') !== null;\n    }\n\n    ngOnInit() {\n        this.refugeService.getRefuge(this.refuge_id).then(refuge => this.refuge = refuge);\n    }\n\n    selectedTabChange($event:MatTabChangeEvent) {\n        this.renderFocalSpecies = this.renderFocalSpecies||($event.index === 0);\n        // lazily render the visualizations, only once visiting their tab\n        this.renderVisualizations = this.renderVisualizations||($event.index === 1);\n        this.renderResources = this.renderResources||($event.index === 2);\n        if($event.index === 1) {\n            // if the visualizations are selected makes ure that resizeAll() is called\n            // in case the browser was re-sized AFTER the visualizations were visited but\n            // while another tab was visible (the visualizations would have resized themselves down to nothing).\n            setTimeout(() => {\n                if(this.findingsComponent) {\n                    this.findingsComponent.resizeAll();\n                }\n            });\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge-dashboard.component.ts","import {Injectable} from '@angular/core';\n\nimport {Headers,Http,URLSearchParams} from '@angular/http';\nimport 'rxjs/add/operator/toPromise';\n\nimport {CacheService,VisualizationSelectionFactory,VisSelection} from '../../node_modules/npn_common';\n\nimport {MockRefuge} from './mock-refuge';\n\nconst HEADERS = new Headers({'Content-Type':'application/json'});\n\n// this means that the app can no longer function outside of the context of Drupal, period.\nconst API_ROOT = '/api/refuge';\n\n@Injectable()\nexport class RefugeService {\n    constructor(private http: Http,\n                protected cacheService: CacheService,\n                protected selectionFactory: VisualizationSelectionFactory) {\n    }\n\n    parseSelections(json:string):VisSelection[] {\n        let selections = this.selectionFactory.newSelections(JSON.parse(json));\n        /*\n        console.log('JSON',json);\n        console.log('SELECTIONS',selections);\n        */\n        return selections;\n    }\n\n    private refugeUrl(refuge_id) {\n        return `${API_ROOT}/${refuge_id}`;\n    }\n\n    private castRefuge(refuge_id,refuge:any):Refuge {\n        refuge.id = refuge_id;\n        let selections = (refuge.selections||[]).map(s => JSON.parse(s));\n        refuge.selections = this.selectionFactory.newSelections(selections);\n        return refuge as Refuge;\n    }\n\n    refugeList():Promise<any> {\n        return new Promise((resolve,reject) => {\n            this.http.get(`${API_ROOT}`)\n                .toPromise()\n                .then(response => {\n                    let refuges = response.json();\n                    resolve(Object.keys(refuges).map(key => {\n                        return {\n                            id: key,\n                            title: refuges[key].title\n                        };\n                    })); // firebase returns a keyed map of them all.\n                })\n                .catch(reject);\n        });\n    }\n\n    getRefuge(refuge_id):Promise<Refuge> {\n        return new Promise((resolve,reject) => {\n            this.http.get(this.refugeUrl(refuge_id))\n                .toPromise()\n                .then(response => {\n                    resolve(this.castRefuge(refuge_id,response.json()));\n                })\n                .catch(reject);\n        });\n    }\n\n    saveRefuge(refuge:Refuge):Promise<Refuge> {\n        return new Promise((resolve,reject) => {\n            let r = {...{},...refuge} as any;\n            r.selections = (r.selections||[]).map(s => JSON.stringify(s.external) );\n            let json = JSON.stringify(r);\n            console.log(`JSON ${json}`)\n            this.http.put(this.refugeUrl(refuge.id),json,{headers:HEADERS})\n                .toPromise()\n                .then(response => {\n                    resolve(this.castRefuge(refuge.id,response.json()));\n                })\n                .catch(reject);\n        });\n    }\n}\n\nexport class Refuge {\n    id:string;\n    title:string;\n    network_id:number;\n    boundary_id:string;\n    selections:VisSelection[];\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/refuge.service.ts","import {Component,Input} from '@angular/core';\nimport {Refuge} from './refuge.service';\n\n@Component({\n    selector: 'refuge-resources',\n    template: `\n    <div [innerHtml]=\"refuge && refuge.resources ? refuge.resources : ''\"></div>\n    `\n})\nexport class ResourcesComponent {\n    @Input()\n    refuge:Refuge;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/app/resources.component.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from '../node_modules/npn_common/environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// /Users/adamspe/Sites/djcase/npn-fws/drupal/sites/fws-drupal/modules/custom/fws_dashboard/npn_fws_dashboard/src/main.ts"],"sourceRoot":"webpack:///"}